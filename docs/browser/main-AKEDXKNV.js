var yV=Object.create;var oh=Object.defineProperty,vV=Object.defineProperties,xV=Object.getOwnPropertyDescriptor,bV=Object.getOwnPropertyDescriptors,wV=Object.getOwnPropertyNames,fp=Object.getOwnPropertySymbols,TV=Object.getPrototypeOf,Zy=Object.prototype.hasOwnProperty,IS=Object.prototype.propertyIsEnumerable;var AS=(n,e,t)=>e in n?oh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,S=(n,e)=>{for(var t in e||={})Zy.call(e,t)&&AS(n,t,e[t]);if(fp)for(var t of fp(e))IS.call(e,t)&&AS(n,t,e[t]);return n},W=(n,e)=>vV(n,bV(e));var Tr=(n,e)=>{var t={};for(var r in n)Zy.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&fp)for(var r of fp(n))e.indexOf(r)<0&&IS.call(n,r)&&(t[r]=n[r]);return t};var SV=(n,e)=>()=>(n&&(e=n(n=0)),e);var xe=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),MS=(n,e)=>{for(var t in e)oh(n,t,{get:e[t],enumerable:!0})},OS=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of wV(e))!Zy.call(n,i)&&i!==t&&oh(n,i,{get:()=>e[i],enumerable:!(r=xV(e,i))||r.enumerable});return n};var pa=(n,e,t)=>(t=n!=null?yV(TV(n)):{},OS(e||!n||!n.__esModule?oh(t,"default",{value:n,enumerable:!0}):t,n)),EV=n=>OS(oh({},"__esModule",{value:!0}),n);var L=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(c){i(c)}},o=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())});var cO=xe((Rae,lO)=>{"use strict";function Vz(n){var e=new Qn(n),t=e.readChunk();if(t.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+t.id+"'";for(var r=Uz(t.data),i=[],s=0;!e.eof()&&s<r.numTracks;s++){var o=e.readChunk();if(o.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+o.id+"'";var a=jz(o.data);i.push(a)}return{header:r,tracks:i}}function Uz(n){var e=new Qn(n),t=e.readUInt16(),r=e.readUInt16(),i={format:t,numTracks:r},s=e.readUInt16();return s&32768?(i.framesPerSecond=256-(s>>8),i.ticksPerFrame=s&255):i.ticksPerBeat=s,i}function jz(n){for(var e=new Qn(n),t=[];!e.eof();){var r=s();t.push(r)}return t;var i;function s(){var o={};o.deltaTime=e.readVarInt();var a=e.readUInt8();if((a&240)===240)if(a===255){o.meta=!0;var l=e.readUInt8(),c=e.readVarInt();switch(l){case 0:if(o.type="sequenceNumber",c!==2)throw"Expected length for sequenceNumber event is 2, got "+c;return o.number=e.readUInt16(),o;case 1:return o.type="text",o.text=e.readString(c),o;case 2:return o.type="copyrightNotice",o.text=e.readString(c),o;case 3:return o.type="trackName",o.text=e.readString(c),o;case 4:return o.type="instrumentName",o.text=e.readString(c),o;case 5:return o.type="lyrics",o.text=e.readString(c),o;case 6:return o.type="marker",o.text=e.readString(c),o;case 7:return o.type="cuePoint",o.text=e.readString(c),o;case 32:if(o.type="channelPrefix",c!=1)throw"Expected length for channelPrefix event is 1, got "+c;return o.channel=e.readUInt8(),o;case 33:if(o.type="portPrefix",c!=1)throw"Expected length for portPrefix event is 1, got "+c;return o.port=e.readUInt8(),o;case 47:if(o.type="endOfTrack",c!=0)throw"Expected length for endOfTrack event is 0, got "+c;return o;case 81:if(o.type="setTempo",c!=3)throw"Expected length for setTempo event is 3, got "+c;return o.microsecondsPerBeat=e.readUInt24(),o;case 84:if(o.type="smpteOffset",c!=5)throw"Expected length for smpteOffset event is 5, got "+c;var u=e.readUInt8(),h={0:24,32:25,64:29,96:30};return o.frameRate=h[u&96],o.hour=u&31,o.min=e.readUInt8(),o.sec=e.readUInt8(),o.frame=e.readUInt8(),o.subFrame=e.readUInt8(),o;case 88:if(o.type="timeSignature",c!=2&&c!=4)throw"Expected length for timeSignature event is 4 or 2, got "+c;return o.numerator=e.readUInt8(),o.denominator=1<<e.readUInt8(),c===4?(o.metronome=e.readUInt8(),o.thirtyseconds=e.readUInt8()):(o.metronome=36,o.thirtyseconds=8),o;case 89:if(o.type="keySignature",c!=2)throw"Expected length for keySignature event is 2, got "+c;return o.key=e.readInt8(),o.scale=e.readUInt8(),o;case 127:return o.type="sequencerSpecific",o.data=e.readBytes(c),o;default:return o.type="unknownMeta",o.data=e.readBytes(c),o.metatypeByte=l,o}}else if(a==240){o.type="sysEx";var c=e.readVarInt();return o.data=e.readBytes(c),o}else if(a==247){o.type="endSysEx";var c=e.readVarInt();return o.data=e.readBytes(c),o}else throw"Unrecognised MIDI event type byte: "+a;else{var d;if(a&128)d=e.readUInt8(),i=a;else{if(i===null)throw"Running status byte encountered before status byte";d=a,a=i,o.running=!0}var f=a>>4;switch(o.channel=a&15,f){case 8:return o.type="noteOff",o.noteNumber=d,o.velocity=e.readUInt8(),o;case 9:var p=e.readUInt8();return o.type=p===0?"noteOff":"noteOn",o.noteNumber=d,o.velocity=p,p===0&&(o.byte9=!0),o;case 10:return o.type="noteAftertouch",o.noteNumber=d,o.amount=e.readUInt8(),o;case 11:return o.type="controller",o.controllerType=d,o.value=e.readUInt8(),o;case 12:return o.type="programChange",o.programNumber=d,o;case 13:return o.type="channelAftertouch",o.amount=d,o;case 14:return o.type="pitchBend",o.value=d+(e.readUInt8()<<7)-8192,o;default:throw"Unrecognised MIDI event type: "+f}}}}function Qn(n){this.buffer=n,this.bufferLen=this.buffer.length,this.pos=0}Qn.prototype.eof=function(){return this.pos>=this.bufferLen};Qn.prototype.readUInt8=function(){var n=this.buffer[this.pos];return this.pos+=1,n};Qn.prototype.readInt8=function(){var n=this.readUInt8();return n&128?n-256:n};Qn.prototype.readUInt16=function(){var n=this.readUInt8(),e=this.readUInt8();return(n<<8)+e};Qn.prototype.readInt16=function(){var n=this.readUInt16();return n&32768?n-65536:n};Qn.prototype.readUInt24=function(){var n=this.readUInt8(),e=this.readUInt8(),t=this.readUInt8();return(n<<16)+(e<<8)+t};Qn.prototype.readInt24=function(){var n=this.readUInt24();return n&8388608?n-16777216:n};Qn.prototype.readUInt32=function(){var n=this.readUInt8(),e=this.readUInt8(),t=this.readUInt8(),r=this.readUInt8();return(n<<24)+(e<<16)+(t<<8)+r};Qn.prototype.readBytes=function(n){var e=this.buffer.slice(this.pos,this.pos+n);return this.pos+=n,e};Qn.prototype.readString=function(n){var e=this.readBytes(n);return String.fromCharCode.apply(null,e)};Qn.prototype.readVarInt=function(){for(var n=0;!this.eof();){var e=this.readUInt8();if(e&128)n+=e&127,n<<=7;else return n+e}return n};Qn.prototype.readChunk=function(){var n=this.readString(4),e=this.readUInt32(),t=this.readBytes(e);return{id:n,length:e,data:t}};lO.exports=Vz});var hO=xe((Nae,uO)=>{"use strict";function Gz(n,e){if(typeof n!="object")throw"Invalid MIDI data";e=e||{};var t=n.header||{},r=n.tracks||[],i,s=r.length,o=new tn;for(Hz(o,t,s),i=0;i<s;i++)$z(o,r[i],e);return o.buffer}function Hz(n,e,t){var r=e.format==null?1:e.format,i=128;e.timeDivision?i=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?i=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(i=e.ticksPerBeat&32767);var s=new tn;s.writeUInt16(r),s.writeUInt16(t),s.writeUInt16(i),n.writeChunk("MThd",s.buffer)}function $z(n,e,t){var r=new tn,i,s=e.length,o=null;for(i=0;i<s;i++)(t.running===!1||!t.running&&!e[i].running)&&(o=null),o=Wz(r,e[i],o,t.useByte9ForNoteOff);n.writeChunk("MTrk",r.buffer)}function Wz(n,e,t,r){var i=e.type,s=e.deltaTime,o=e.text||"",a=e.data||[],l=null;switch(n.writeVarInt(s),i){case"sequenceNumber":n.writeUInt8(255),n.writeUInt8(0),n.writeVarInt(2),n.writeUInt16(e.number);break;case"text":n.writeUInt8(255),n.writeUInt8(1),n.writeVarInt(o.length),n.writeString(o);break;case"copyrightNotice":n.writeUInt8(255),n.writeUInt8(2),n.writeVarInt(o.length),n.writeString(o);break;case"trackName":n.writeUInt8(255),n.writeUInt8(3),n.writeVarInt(o.length),n.writeString(o);break;case"instrumentName":n.writeUInt8(255),n.writeUInt8(4),n.writeVarInt(o.length),n.writeString(o);break;case"lyrics":n.writeUInt8(255),n.writeUInt8(5),n.writeVarInt(o.length),n.writeString(o);break;case"marker":n.writeUInt8(255),n.writeUInt8(6),n.writeVarInt(o.length),n.writeString(o);break;case"cuePoint":n.writeUInt8(255),n.writeUInt8(7),n.writeVarInt(o.length),n.writeString(o);break;case"channelPrefix":n.writeUInt8(255),n.writeUInt8(32),n.writeVarInt(1),n.writeUInt8(e.channel);break;case"portPrefix":n.writeUInt8(255),n.writeUInt8(33),n.writeVarInt(1),n.writeUInt8(e.port);break;case"endOfTrack":n.writeUInt8(255),n.writeUInt8(47),n.writeVarInt(0);break;case"setTempo":n.writeUInt8(255),n.writeUInt8(81),n.writeVarInt(3),n.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":n.writeUInt8(255),n.writeUInt8(84),n.writeVarInt(5);var c={24:0,25:32,29:64,30:96},u=e.hour&31|c[e.frameRate];n.writeUInt8(u),n.writeUInt8(e.min),n.writeUInt8(e.sec),n.writeUInt8(e.frame),n.writeUInt8(e.subFrame);break;case"timeSignature":n.writeUInt8(255),n.writeUInt8(88),n.writeVarInt(4),n.writeUInt8(e.numerator);var h=Math.floor(Math.log(e.denominator)/Math.LN2)&255;n.writeUInt8(h),n.writeUInt8(e.metronome),n.writeUInt8(e.thirtyseconds||8);break;case"keySignature":n.writeUInt8(255),n.writeUInt8(89),n.writeVarInt(2),n.writeInt8(e.key),n.writeUInt8(e.scale);break;case"sequencerSpecific":n.writeUInt8(255),n.writeUInt8(127),n.writeVarInt(a.length),n.writeBytes(a);break;case"unknownMeta":e.metatypeByte!=null&&(n.writeUInt8(255),n.writeUInt8(e.metatypeByte),n.writeVarInt(a.length),n.writeBytes(a));break;case"sysEx":n.writeUInt8(240),n.writeVarInt(a.length),n.writeBytes(a);break;case"endSysEx":n.writeUInt8(247),n.writeVarInt(a.length),n.writeBytes(a);break;case"noteOff":var d=r!==!1&&e.byte9||r&&e.velocity==0?144:128;l=d|e.channel,l!==t&&n.writeUInt8(l),n.writeUInt8(e.noteNumber),n.writeUInt8(e.velocity);break;case"noteOn":l=144|e.channel,l!==t&&n.writeUInt8(l),n.writeUInt8(e.noteNumber),n.writeUInt8(e.velocity);break;case"noteAftertouch":l=160|e.channel,l!==t&&n.writeUInt8(l),n.writeUInt8(e.noteNumber),n.writeUInt8(e.amount);break;case"controller":l=176|e.channel,l!==t&&n.writeUInt8(l),n.writeUInt8(e.controllerType),n.writeUInt8(e.value);break;case"programChange":l=192|e.channel,l!==t&&n.writeUInt8(l),n.writeUInt8(e.programNumber);break;case"channelAftertouch":l=208|e.channel,l!==t&&n.writeUInt8(l),n.writeUInt8(e.amount);break;case"pitchBend":l=224|e.channel,l!==t&&n.writeUInt8(l);var f=8192+e.value,p=f&127,m=f>>7&127;n.writeUInt8(p),n.writeUInt8(m);break;default:throw"Unrecognized event type: "+i}return l}function tn(){this.buffer=[]}tn.prototype.writeUInt8=function(n){this.buffer.push(n&255)};tn.prototype.writeInt8=tn.prototype.writeUInt8;tn.prototype.writeUInt16=function(n){var e=n>>8&255,t=n&255;this.writeUInt8(e),this.writeUInt8(t)};tn.prototype.writeInt16=tn.prototype.writeUInt16;tn.prototype.writeUInt24=function(n){var e=n>>16&255,t=n>>8&255,r=n&255;this.writeUInt8(e),this.writeUInt8(t),this.writeUInt8(r)};tn.prototype.writeInt24=tn.prototype.writeUInt24;tn.prototype.writeUInt32=function(n){var e=n>>24&255,t=n>>16&255,r=n>>8&255,i=n&255;this.writeUInt8(e),this.writeUInt8(t),this.writeUInt8(r),this.writeUInt8(i)};tn.prototype.writeInt32=tn.prototype.writeUInt32;tn.prototype.writeBytes=function(n){this.buffer=this.buffer.concat(Array.prototype.slice.call(n,0))};tn.prototype.writeString=function(n){var e,t=n.length,r=[];for(e=0;e<t;e++)r.push(n.codePointAt(e));this.writeBytes(r)};tn.prototype.writeVarInt=function(n){if(n<0)throw"Cannot write negative variable-length integer";if(n<=127)this.writeUInt8(n);else{var e=n,t=[];for(t.push(e&127),e>>=7;e;){var r=e&127|128;t.push(r),e>>=7}this.writeBytes(t.reverse())}};tn.prototype.writeChunk=function(n,e){this.writeString(n),this.writeUInt32(e.length),this.writeBytes(e)};uO.exports=Gz});var Jb=xe(Kb=>{"use strict";Kb.parseMidi=cO();Kb.writeMidi=hO()});var e1=xe(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.insert=xc.search=void 0;function dO(n,e,t){t===void 0&&(t="ticks");var r=0,i=n.length,s=i;if(i>0&&n[i-1][t]<=e)return i-1;for(;r<s;){var o=Math.floor(r+(s-r)/2),a=n[o],l=n[o+1];if(a[t]===e){for(var c=o;c<n.length;c++){var u=n[c];u[t]===e&&(o=c)}return o}else{if(a[t]<e&&l[t]>e)return o;a[t]>e?s=o:a[t]<e&&(r=o+1)}}return-1}xc.search=dO;function zz(n,e,t){if(t===void 0&&(t="ticks"),n.length){var r=dO(n,e[t],t);n.splice(r+1,0,e)}else n.push(e)}xc.insert=zz});var Rg=xe(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.Header=Ga.keySignatureKeys=void 0;var t1=e1(),Og=new WeakMap;Ga.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var qz=function(){function n(e){var t=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",Og.set(this,480),e){Og.set(this,e.header.ticksPerBeat),e.tracks.forEach(function(i){i.forEach(function(s){s.meta&&(s.type==="timeSignature"?t.timeSignatures.push({ticks:s.absoluteTime,timeSignature:[s.numerator,s.denominator]}):s.type==="setTempo"?t.tempos.push({bpm:6e7/s.microsecondsPerBeat,ticks:s.absoluteTime}):s.type==="keySignature"&&t.keySignatures.push({key:Ga.keySignatureKeys[s.key+7],scale:s.scale===0?"major":"minor",ticks:s.absoluteTime}))})});var r=0;e.tracks[0].forEach(function(i){r+=i.deltaTime,i.meta&&(i.type==="trackName"?t.name=i.text:(i.type==="text"||i.type==="cuePoint"||i.type==="marker"||i.type==="lyrics")&&t.meta.push({text:i.text,ticks:r,type:i.type}))}),this.update()}}return n.prototype.update=function(){var e=this,t=0,r=0;this.tempos.sort(function(i,s){return i.ticks-s.ticks}),this.tempos.forEach(function(i,s){var o=s>0?e.tempos[s-1].bpm:e.tempos[0].bpm,a=i.ticks/e.ppq-r,l=60/o*a;i.time=l+t,t=i.time,r+=a}),this.timeSignatures.sort(function(i,s){return i.ticks-s.ticks}),this.timeSignatures.forEach(function(i,s){var o=s>0?e.timeSignatures[s-1]:e.timeSignatures[0],a=(i.ticks-o.ticks)/e.ppq,l=a/o.timeSignature[0]/(o.timeSignature[1]/4);o.measures=o.measures||0,i.measures=l+o.measures})},n.prototype.ticksToSeconds=function(e){var t=(0,t1.search)(this.tempos,e);if(t!==-1){var r=this.tempos[t],i=r.time,s=(e-r.ticks)/this.ppq;return i+60/r.bpm*s}else{var o=e/this.ppq;return 60/120*o}},n.prototype.ticksToMeasures=function(e){var t=(0,t1.search)(this.timeSignatures,e);if(t!==-1){var r=this.timeSignatures[t],i=(e-r.ticks)/this.ppq;return r.measures+i/(r.timeSignature[0]/r.timeSignature[1])/4}else return e/this.ppq/4},Object.defineProperty(n.prototype,"ppq",{get:function(){return Og.get(this)},enumerable:!1,configurable:!0}),n.prototype.secondsToTicks=function(e){var t=(0,t1.search)(this.tempos,e,"time");if(t!==-1){var r=this.tempos[t],i=r.time,s=e-i,o=s/(60/r.bpm);return Math.round(r.ticks+o*this.ppq)}else{var a=e/.5;return Math.round(a*this.ppq)}},n.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(e){return{bpm:e.bpm,ticks:e.ticks}}),timeSignatures:this.timeSignatures}},n.prototype.fromJSON=function(e){this.name=e.name,this.tempos=e.tempos.map(function(t){return Object.assign({},t)}),this.timeSignatures=e.timeSignatures.map(function(t){return Object.assign({},t)}),this.keySignatures=e.keySignatures.map(function(t){return Object.assign({},t)}),this.meta=e.meta.map(function(t){return Object.assign({},t)}),Og.set(this,e.ppq),this.update()},n.prototype.setTempo=function(e){this.tempos=[{bpm:e,ticks:0}],this.update()},n}();Ga.Header=qz});var r1=xe(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ControlChange=Yr.controlChangeIds=Yr.controlChangeNames=void 0;Yr.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"};Yr.controlChangeIds=Object.keys(Yr.controlChangeNames).reduce(function(n,e){return n[Yr.controlChangeNames[e]]=e,n},{});var n1=new WeakMap,fO=new WeakMap,Xz=function(){function n(e,t){n1.set(this,t),fO.set(this,e.controllerType),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(n.prototype,"number",{get:function(){return fO.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return Yr.controlChangeNames[this.number]?Yr.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"time",{get:function(){var e=n1.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var t=n1.get(this);this.ticks=t.secondsToTicks(e)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},n}();Yr.ControlChange=Xz});var pO=xe(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});Pg.createControlChanges=void 0;var Ng=r1();function Yz(){return new Proxy({},{get:function(n,e){if(n[e])return n[e];if(Ng.controlChangeIds.hasOwnProperty(e))return n[Ng.controlChangeIds[e]]},set:function(n,e,t){return Ng.controlChangeIds.hasOwnProperty(e)?n[Ng.controlChangeIds[e]]=t:n[e]=t,!0}})}Pg.createControlChanges=Yz});var mO=xe(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.PitchBend=void 0;var i1=new WeakMap,Zz=function(){function n(e,t){i1.set(this,t),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(n.prototype,"time",{get:function(){var e=i1.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var t=i1.get(this);this.ticks=t.secondsToTicks(e)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},n}();Fg.PitchBend=Zz});var gO=xe(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.DrumKitByPatchID=Po.InstrumentFamilyByID=Po.instrumentByPatchID=void 0;Po.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];Po.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];Po.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}});var yO=xe(Lg=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});Lg.Instrument=void 0;var kg=gO(),_O=new WeakMap,Qz=function(){function n(e,t){if(this.number=0,_O.set(this,t),this.number=0,e){var r=e.find(function(i){return i.type==="programChange"});r&&(this.number=r.programNumber)}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.percussion?kg.DrumKitByPatchID[this.number]:kg.instrumentByPatchID[this.number]},set:function(e){var t=kg.instrumentByPatchID.indexOf(e);t!==-1&&(this.number=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"family",{get:function(){return this.percussion?"drums":kg.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"percussion",{get:function(){var e=_O.get(this);return e.channel===9},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},n.prototype.fromJSON=function(e){this.number=e.number},n}();Lg.Instrument=Qz});var xO=xe(Bg=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});Bg.Note=void 0;function Kz(n){var e=Math.floor(n/12)-1;return vO(n)+e.toString()}function vO(n){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],t=n%12;return e[t]}function Jz(n){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.indexOf(n)}var e6=function(){var n=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(t){var r=n.exec(t),i=r[1],s=r[2],o=e[i.toLowerCase()];return o+(parseInt(s,10)+1)*12}}(),bc=new WeakMap,t6=function(){function n(e,t,r){bc.set(this,r),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=t.velocity,this.ticks=e.ticks,this.durationTicks=t.ticks-e.ticks}return Object.defineProperty(n.prototype,"name",{get:function(){return Kz(this.midi)},set:function(e){this.midi=e6(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var t=e-this.octave;this.midi+=t*12},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pitch",{get:function(){return vO(this.midi)},set:function(e){this.midi=12*(this.octave+1)+Jz(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){var e=bc.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var t=bc.get(this),r=t.secondsToTicks(this.time+e);this.durationTicks=r-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"time",{get:function(){var e=bc.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var t=bc.get(this);this.ticks=t.secondsToTicks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bars",{get:function(){var e=bc.get(this);return e.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},n}();Bg.Note=t6});var o1=xe(Ug=>{"use strict";Object.defineProperty(Ug,"__esModule",{value:!0});Ug.Track=void 0;var s1=e1(),n6=r1(),r6=pO(),i6=mO(),bO=yO(),s6=xO(),Vg=new WeakMap,o6=function(){function n(e,t){var r=this;if(this.name="",this.notes=[],this.controlChanges=(0,r6.createControlChanges)(),this.pitchBends=[],Vg.set(this,t),e){var i=e.find(function(d){return d.type==="trackName"});this.name=i?i.text:""}if(this.instrument=new bO.Instrument(e,this),this.channel=0,e){for(var s=e.filter(function(d){return d.type==="noteOn"}),o=e.filter(function(d){return d.type==="noteOff"}),a=function(){var d=s.shift();l.channel=d.channel;var f=o.findIndex(function(m){return m.noteNumber===d.noteNumber&&m.absoluteTime>=d.absoluteTime});if(f!==-1){var p=o.splice(f,1)[0];l.addNote({durationTicks:p.absoluteTime-d.absoluteTime,midi:d.noteNumber,noteOffVelocity:p.velocity/127,ticks:d.absoluteTime,velocity:d.velocity/127})}},l=this;s.length;)a();var c=e.filter(function(d){return d.type==="controller"});c.forEach(function(d){r.addCC({number:d.controllerType,ticks:d.absoluteTime,value:d.value/127})});var u=e.filter(function(d){return d.type==="pitchBend"});u.forEach(function(d){r.addPitchBend({ticks:d.absoluteTime,value:d.value/Math.pow(2,13)})});var h=e.find(function(d){return d.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return n.prototype.addNote=function(e){var t=Vg.get(this),r=new s6.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},t);return Object.assign(r,e),(0,s1.insert)(this.notes,r,"ticks"),this},n.prototype.addCC=function(e){var t=Vg.get(this),r=new n6.ControlChange({controllerType:e.number},t);return delete e.number,Object.assign(r,e),Array.isArray(this.controlChanges[r.number])||(this.controlChanges[r.number]=[]),(0,s1.insert)(this.controlChanges[r.number],r,"ticks"),this},n.prototype.addPitchBend=function(e){var t=Vg.get(this),r=new i6.PitchBend({},t);return Object.assign(r,e),(0,s1.insert)(this.pitchBends,r,"ticks"),this},Object.defineProperty(n.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,t=0;t<this.notes.length-1;t++){var r=this.notes[t].time+this.notes[t].duration;e<r&&(e=r)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,t=0;t<this.notes.length-1;t++){var r=this.notes[t].ticks+this.notes[t].durationTicks;e<r&&(e=r)}return e},enumerable:!1,configurable:!0}),n.prototype.fromJSON=function(e){var t=this;this.name=e.name,this.channel=e.channel,this.instrument=new bO.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(var r in e.controlChanges)e.controlChanges[r]&&e.controlChanges[r].forEach(function(i){t.addCC({number:i.number,ticks:i.ticks,value:i.value})});e.notes.forEach(function(i){t.addNote({durationTicks:i.durationTicks,midi:i.midi,ticks:i.ticks,velocity:i.velocity})})},n.prototype.toJSON=function(){for(var e={},t=0;t<127;t++)this.controlChanges.hasOwnProperty(t)&&(e[t]=this.controlChanges[t].map(function(i){return i.toJSON()}));var r={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(function(i){return i.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(i){return i.toJSON()})};return this.endOfTrackTicks!==void 0&&(r.endOfTrackTicks=this.endOfTrackTicks),r},n}();Ug.Track=o6});var TO={};MS(TO,{flatten:()=>a6});function a6(n){var e=[];return wO(n,e),e}function wO(n,e){for(var t=0;t<n.length;t++){var r=n[t];Array.isArray(r)?wO(r,e):e.push(r)}}var SO=SV(()=>{"use strict"});var EO=xe(wc=>{"use strict";var Fo=wc&&wc.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(wc,"__esModule",{value:!0});wc.encode=void 0;var l6=Jb(),c6=Rg(),u6=(SO(),EV(TO));function h6(n,e){return[{absoluteTime:n.ticks,channel:e,deltaTime:0,noteNumber:n.midi,type:"noteOn",velocity:Math.floor(n.velocity*127)},{absoluteTime:n.ticks+n.durationTicks,channel:e,deltaTime:0,noteNumber:n.midi,type:"noteOff",velocity:Math.floor(n.noteOffVelocity*127)}]}function d6(n){return(0,u6.flatten)(n.notes.map(function(e){return h6(e,n.channel)}))}function f6(n,e){return{absoluteTime:n.ticks,channel:e,controllerType:n.number,deltaTime:0,type:"controller",value:Math.floor(n.value*127)}}function p6(n){for(var e=[],t=0;t<127;t++)n.controlChanges.hasOwnProperty(t)&&n.controlChanges[t].forEach(function(r){e.push(f6(r,n.channel))});return e}function m6(n,e){return{absoluteTime:n.ticks,channel:e,deltaTime:0,type:"pitchBend",value:n.value}}function g6(n){var e=[];return n.pitchBends.forEach(function(t){e.push(m6(t,n.channel))}),e}function _6(n){return{absoluteTime:0,channel:n.channel,deltaTime:0,programNumber:n.instrument.number,type:"programChange"}}function y6(n){return{absoluteTime:0,deltaTime:0,meta:!0,text:n,type:"trackName"}}function v6(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/n.bpm),type:"setTempo"}}function x6(n){return{absoluteTime:n.ticks,deltaTime:0,denominator:n.timeSignature[1],meta:!0,metronome:24,numerator:n.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function b6(n){var e=c6.keySignatureKeys.indexOf(n.key);return{absoluteTime:n.ticks,deltaTime:0,key:e+7,meta:!0,scale:n.scale==="major"?0:1,type:"keySignature"}}function w6(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,text:n.text,type:n.type}}function T6(n){var e={header:{format:1,numTracks:n.tracks.length+1,ticksPerBeat:n.header.ppq},tracks:Fo([Fo(Fo(Fo(Fo([{absoluteTime:0,deltaTime:0,meta:!0,text:n.header.name,type:"trackName"}],n.header.keySignatures.map(function(t){return b6(t)}),!0),n.header.meta.map(function(t){return w6(t)}),!0),n.header.tempos.map(function(t){return v6(t)}),!0),n.header.timeSignatures.map(function(t){return x6(t)}),!0)],n.tracks.map(function(t){return Fo(Fo(Fo([y6(t.name),_6(t)],d6(t),!0),p6(t),!0),g6(t),!0)}),!0)};return e.tracks=e.tracks.map(function(t){t=t.sort(function(i,s){return i.absoluteTime-s.absoluteTime});var r=0;return t.forEach(function(i){i.deltaTime=i.absoluteTime-r,r=i.absoluteTime,delete i.absoluteTime}),t.push({deltaTime:0,meta:!0,type:"endOfTrack"}),t}),new Uint8Array((0,l6.writeMidi)(e))}wc.encode=T6});var l1=xe(Zr=>{"use strict";var S6=Zr&&Zr.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},E6=Zr&&Zr.__generator||function(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.Header=Zr.Track=Zr.Midi=void 0;var C6=Jb(),CO=Rg(),a1=o1(),D6=EO(),A6=function(){function n(e){var t=this,r=null;if(e){var i=e instanceof ArrayBuffer?new Uint8Array(e):e;r=(0,C6.parseMidi)(i),r.tracks.forEach(function(s){var o=0;s.forEach(function(a){o+=a.deltaTime,a.absoluteTime=o})}),r.tracks=O6(r.tracks)}this.header=new CO.Header(r),this.tracks=[],e&&(this.tracks=r.tracks.map(function(s){return new a1.Track(s,t.header)}),r.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return n.fromUrl=function(e){return S6(this,void 0,void 0,function(){var t,r;return E6(this,function(i){switch(i.label){case 0:return[4,fetch(e)];case 1:return t=i.sent(),t.ok?[4,t.arrayBuffer()]:[3,3];case 2:return r=i.sent(),[2,new n(r)];case 3:throw new Error("Could not load '".concat(e,"'"))}})})},Object.defineProperty(n.prototype,"name",{get:function(){return this.header.name},set:function(e){this.header.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){var e=this.tracks.map(function(t){return t.duration});return Math.max.apply(Math,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"durationTicks",{get:function(){var e=this.tracks.map(function(t){return t.durationTicks});return Math.max.apply(Math,e)},enumerable:!1,configurable:!0}),n.prototype.addTrack=function(){var e=new a1.Track(void 0,this.header);return this.tracks.push(e),e},n.prototype.toArray=function(){return(0,D6.encode)(this)},n.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(e){return e.toJSON()})}},n.prototype.fromJSON=function(e){var t=this;this.header=new CO.Header,this.header.fromJSON(e.header),this.tracks=e.tracks.map(function(r){var i=new a1.Track(void 0,t.header);return i.fromJSON(r),i})},n.prototype.clone=function(){var e=new n;return e.fromJSON(this.toJSON()),e},n}();Zr.Midi=A6;var I6=o1();Object.defineProperty(Zr,"Track",{enumerable:!0,get:function(){return I6.Track}});var M6=Rg();Object.defineProperty(Zr,"Header",{enumerable:!0,get:function(){return M6.Header}});function O6(n){for(var e=[],t=0;t<n.length;t++)for(var r=e.length,i=new Map,s=Array(16).fill(0),o=0,a=n[t];o<a.length;o++){var l=a[o],c=r,u=l.channel;if(u!==void 0){l.type==="programChange"&&(s[u]=l.programNumber);var h=s[u],d="".concat(h," ").concat(u);i.has(d)?c=i.get(d):(c=r+i.size,i.set(d,c))}e[c]||e.push([]),e[c].push(l)}return e}});var DO=xe((qae,_d)=>{"use strict";function R6(n){if(Array.isArray(n))return n}_d.exports=R6,_d.exports.__esModule=!0,_d.exports.default=_d.exports});var AO=xe((Xae,yd)=>{"use strict";function N6(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}yd.exports=N6,yd.exports.__esModule=!0,yd.exports.default=yd.exports});var IO=xe((Yae,vd)=>{"use strict";function P6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}vd.exports=P6,vd.exports.__esModule=!0,vd.exports.default=vd.exports});var OO=xe((Zae,xd)=>{"use strict";var MO=IO();function F6(n,e){if(n){if(typeof n=="string")return MO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return MO(n,e)}}xd.exports=F6,xd.exports.__esModule=!0,xd.exports.default=xd.exports});var RO=xe((Qae,bd)=>{"use strict";function k6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}bd.exports=k6,bd.exports.__esModule=!0,bd.exports.default=bd.exports});var NO=xe((Kae,wd)=>{"use strict";var L6=DO(),B6=AO(),V6=OO(),U6=RO();function j6(n,e){return L6(n)||B6(n,e)||V6(n,e)||U6()}wd.exports=j6,wd.exports.__esModule=!0,wd.exports.default=wd.exports});var PO=xe((Jae,Td)=>{"use strict";function G6(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Td.exports=G6,Td.exports.__esModule=!0,Td.exports.default=Td.exports});var u1=xe((ele,js)=>{"use strict";function c1(n){"@babel/helpers - typeof";return js.exports=c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},js.exports.__esModule=!0,js.exports.default=js.exports,c1(n)}js.exports=c1,js.exports.__esModule=!0,js.exports.default=js.exports});var kO=xe((tle,Sd)=>{"use strict";var FO=u1().default;function H6(n,e){if(FO(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(FO(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}Sd.exports=H6,Sd.exports.__esModule=!0,Sd.exports.default=Sd.exports});var LO=xe((nle,Ed)=>{"use strict";var $6=u1().default,W6=kO();function z6(n){var e=W6(n,"string");return $6(e)=="symbol"?e:String(e)}Ed.exports=z6,Ed.exports.__esModule=!0,Ed.exports.default=Ed.exports});var VO=xe((rle,Cd)=>{"use strict";var q6=LO();function BO(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,q6(r.key),r)}}function X6(n,e,t){return e&&BO(n.prototype,e),t&&BO(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}Cd.exports=X6,Cd.exports.__esModule=!0,Cd.exports.default=Cd.exports});var h1=xe((jg,UO)=>{"use strict";(function(n,e){typeof jg=="object"&&typeof UO<"u"?e(jg,NO(),PO(),VO()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.automationEvents={},n._slicedToArray,n._classCallCheck,n._createClass))})(jg,function(n,e,t,r){"use strict";var i=function(O,k,A){return{endTime:k,insertTime:A,type:"exponentialRampToValue",value:O}},s=function(O,k,A){return{endTime:k,insertTime:A,type:"linearRampToValue",value:O}},o=function(O,k){return{startTime:k,type:"setValue",value:O}},a=function(O,k,A){return{duration:A,startTime:k,type:"setValueCurve",values:O}},l=function(O,k,A){var F=A.startTime,N=A.target,B=A.timeConstant;return N+(k-N)*Math.exp((F-O)/B)},c=function(O){return O.type==="exponentialRampToValue"},u=function(O){return O.type==="linearRampToValue"},h=function(O){return c(O)||u(O)},d=function(O){return O.type==="setValue"},f=function(O){return O.type==="setValueCurve"},p=function E(O,k,A,F){var N=O[k];return N===void 0?F:h(N)||d(N)?N.value:f(N)?N.values[N.values.length-1]:l(A,E(O,k-1,N.startTime,F),N)},m=function(O,k,A,F,N){return A===void 0?[F.insertTime,N]:h(A)?[A.endTime,A.value]:d(A)?[A.startTime,A.value]:f(A)?[A.startTime+A.duration,A.values[A.values.length-1]]:[A.startTime,p(O,k-1,A.startTime,N)]},g=function(O){return O.type==="cancelAndHold"},_=function(O){return O.type==="cancelScheduledValues"},v=function(O){return g(O)||_(O)?O.cancelTime:c(O)||u(O)?O.endTime:O.startTime},y=function(O,k,A,F){var N=F.endTime,B=F.value;return A===B?B:0<A&&0<B||A<0&&B<0?A*Math.pow(B/A,(O-k)/(N-k)):0},x=function(O,k,A,F){var N=F.endTime,B=F.value;return A+(O-k)/(N-k)*(B-A)},T=function(O,k){var A=Math.floor(k),F=Math.ceil(k);return A===F?O[A]:(1-(k-A))*O[A]+(1-(F-k))*O[F]},C=function(O,k){var A=k.duration,F=k.startTime,N=k.values,B=(O-F)/A*(N.length-1);return T(N,B)},b=function(O){return O.type==="setTarget"},w=function(E){function O(k){t(this,O),this._automationEvents=[],this._currenTime=0,this._defaultValue=k}return r(O,[{key:E,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(A){var F=v(A);if(g(A)||_(A)){var N=this._automationEvents.findIndex(function(de){return _(A)&&f(de)?de.startTime+de.duration>=F:v(de)>=F}),B=this._automationEvents[N];if(N!==-1&&(this._automationEvents=this._automationEvents.slice(0,N)),g(A)){var H=this._automationEvents[this._automationEvents.length-1];if(B!==void 0&&h(B)){if(H!==void 0&&b(H))throw new Error("The internal list is malformed.");var he=H===void 0?B.insertTime:f(H)?H.startTime+H.duration:v(H),Ce=H===void 0?this._defaultValue:f(H)?H.values[H.values.length-1]:H.value,Ne=c(B)?y(F,he,Ce,B):x(F,he,Ce,B),We=c(B)?i(Ne,F,this._currenTime):s(Ne,F,this._currenTime);this._automationEvents.push(We)}if(H!==void 0&&b(H)&&this._automationEvents.push(o(this.getValue(F),F)),H!==void 0&&f(H)&&H.startTime+H.duration>F){var Te=F-H.startTime,ne=(H.values.length-1)/H.duration,pt=Math.max(2,1+Math.ceil(Te*ne)),nt=Te/(pt-1)*ne,Y=H.values.slice(0,pt);if(nt<1)for(var Ze=1;Ze<pt;Ze+=1){var yt=nt*Ze%1;Y[Ze]=H.values[Ze-1]*(1-yt)+H.values[Ze]*yt}this._automationEvents[this._automationEvents.length-1]=a(Y,H.startTime,Te)}}}else{var mt=this._automationEvents.findIndex(function(de){return v(de)>F}),Cn=mt===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[mt-1];if(Cn!==void 0&&f(Cn)&&v(Cn)+Cn.duration>F)return!1;var Q=c(A)?i(A.value,A.endTime,this._currenTime):u(A)?s(A.value,F,this._currenTime):A;if(mt===-1)this._automationEvents.push(Q);else{if(f(A)&&F+A.duration>v(this._automationEvents[mt]))return!1;this._automationEvents.splice(mt,0,Q)}}return!0}},{key:"flush",value:function(A){var F=this._automationEvents.findIndex(function(H){return v(H)>A});if(F>1){var N=this._automationEvents.slice(F-1),B=N[0];b(B)&&N.unshift(o(p(this._automationEvents,F-2,B.startTime,this._defaultValue),B.startTime)),this._automationEvents=N}}},{key:"getValue",value:function(A){if(this._automationEvents.length===0)return this._defaultValue;var F=this._automationEvents.findIndex(function(Y){return v(Y)>A}),N=this._automationEvents[F],B=(F===-1?this._automationEvents.length:F)-1,H=this._automationEvents[B];if(H!==void 0&&b(H)&&(N===void 0||!h(N)||N.insertTime>A))return l(A,p(this._automationEvents,B-1,H.startTime,this._defaultValue),H);if(H!==void 0&&d(H)&&(N===void 0||!h(N)))return H.value;if(H!==void 0&&f(H)&&(N===void 0||!h(N)||H.startTime+H.duration>A))return A<H.startTime+H.duration?C(A,H):H.values[H.values.length-1];if(H!==void 0&&h(H)&&(N===void 0||!h(N)))return H.value;if(N!==void 0&&c(N)){var he=m(this._automationEvents,B,H,N,this._defaultValue),Ce=e(he,2),Ne=Ce[0],We=Ce[1];return y(A,Ne,We,N)}if(N!==void 0&&u(N)){var Te=m(this._automationEvents,B,H,N,this._defaultValue),ne=e(Te,2),pt=ne[0],nt=ne[1];return x(A,pt,nt,N)}return this._defaultValue}}]),O}(Symbol.iterator),P=function(O){return{cancelTime:O,type:"cancelAndHold"}},U=function(O){return{cancelTime:O,type:"cancelScheduledValues"}},R=function(O,k){return{endTime:k,type:"exponentialRampToValue",value:O}},I=function(O,k){return{endTime:k,type:"linearRampToValue",value:O}},M=function(O,k,A){return{startTime:k,target:O,timeConstant:A,type:"setTarget"}};n.AutomationEventList=w,n.createCancelAndHoldAutomationEvent=P,n.createCancelScheduledValuesAutomationEvent=U,n.createExponentialRampToValueAutomationEvent=R,n.createLinearRampToValueAutomationEvent=I,n.createSetTargetAutomationEvent=M,n.createSetValueAutomationEvent=o,n.createSetValueCurveAutomationEvent=a})});var hk=xe((XWe,sw)=>{"use strict";var l9=Object.prototype.hasOwnProperty,or="~";function Xd(){}Object.create&&(Xd.prototype=Object.create(null),new Xd().__proto__||(or=!1));function c9(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function uk(n,e,t,r,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new c9(t,r||n,i),o=or?or+e:e;return n._events[o]?n._events[o].fn?n._events[o]=[n._events[o],s]:n._events[o].push(s):(n._events[o]=s,n._eventsCount++),n}function F_(n,e){--n._eventsCount===0?n._events=new Xd:delete n._events[e]}function Un(){this._events=new Xd,this._eventsCount=0}Un.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)l9.call(t,r)&&e.push(or?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Un.prototype.listeners=function(e){var t=or?or+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};Un.prototype.listenerCount=function(e){var t=or?or+e:e,r=this._events[t];return r?r.fn?1:r.length:0};Un.prototype.emit=function(e,t,r,i,s,o){var a=or?or+e:e;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,u,h;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,s),!0;case 6:return l.fn.call(l.context,t,r,i,s,o),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var d=l.length,f;for(h=0;h<d;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,r);break;case 4:l[h].fn.call(l[h].context,t,r,i);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];l[h].fn.apply(l[h].context,u)}}return!0};Un.prototype.on=function(e,t,r){return uk(this,e,t,r,!1)};Un.prototype.once=function(e,t,r){return uk(this,e,t,r,!0)};Un.prototype.removeListener=function(e,t,r,i){var s=or?or+e:e;if(!this._events[s])return this;if(!t)return F_(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!i||o.once)&&(!r||o.context===r)&&F_(this,s);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==t||i&&!o[a].once||r&&o[a].context!==r)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:F_(this,s)}return this};Un.prototype.removeAllListeners=function(e){var t;return e?(t=or?or+e:e,this._events[t]&&F_(this,t)):(this._events=new Xd,this._eventsCount=0),this};Un.prototype.off=Un.prototype.removeListener;Un.prototype.addListener=Un.prototype.on;Un.prefixed=or;Un.EventEmitter=Un;typeof sw<"u"&&(sw.exports=Un)});var gk=xe((YWe,cw)=>{"use strict";cw.exports=B_;cw.exports.default=B_;function B_(n,e,t){t=t||2;var r=e&&e.length,i=r?e[0]*t:n.length,s=fk(n,0,i,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,h,d,f;if(r&&(s=p9(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(var p=t;p<i;p+=t)h=n[p],d=n[p+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return Yd(s,o,t,a,l,f,0),o}function fk(n,e,t,r,i){var s,o;if(i===lw(n,e,t,r)>0)for(s=e;s<t;s+=r)o=dk(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=dk(s,n[s],n[s+1],o);return o&&V_(o,o.next)&&(Qd(o),o=o.next),o}function Ka(n,e){if(!n)return n;e||(e=n);var t=n,r;do if(r=!1,!t.steiner&&(V_(t,t.next)||It(t.prev,t,t.next)===0)){if(Qd(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Yd(n,e,t,r,i,s,o){if(n){!o&&s&&v9(n,r,i,s);for(var a=n,l,c;n.prev!==n.next;){if(l=n.prev,c=n.next,s?h9(n,r,i,s):u9(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Qd(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=d9(Ka(n),e,t),Yd(n,e,t,r,i,s,2)):o===2&&f9(n,e,t,r,i,s):Yd(Ka(n),e,t,r,i,s,1);break}}}}function u9(n){var e=n.prev,t=n,r=n.next;if(It(e,t,r)>=0)return!1;for(var i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,d=i>s?i>o?i:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=r.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&au(i,a,s,l,o,c,p.x,p.y)&&It(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function h9(n,e,t,r){var i=n.prev,s=n,o=n.next;if(It(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,h=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=a>l?a>c?a:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,_=ow(f,p,e,t,r),v=ow(m,g,e,t,r),y=n.prevZ,x=n.nextZ;y&&y.z>=_&&x&&x.z<=v;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==i&&y!==o&&au(a,u,l,h,c,d,y.x,y.y)&&It(y.prev,y,y.next)>=0||(y=y.prevZ,x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==o&&au(a,u,l,h,c,d,x.x,x.y)&&It(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;y&&y.z>=_;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==i&&y!==o&&au(a,u,l,h,c,d,y.x,y.y)&&It(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==o&&au(a,u,l,h,c,d,x.x,x.y)&&It(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function d9(n,e,t){var r=n;do{var i=r.prev,s=r.next.next;!V_(i,s)&&pk(i,r,r.next,s)&&Zd(i,s)&&Zd(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Qd(r),Qd(r.next),r=n=s),r=r.next}while(r!==n);return Ka(r)}function f9(n,e,t,r,i,s){var o=n;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&w9(o,a)){var l=mk(o,a);o=Ka(o,o.next),l=Ka(l,l.next),Yd(o,e,t,r,i,s,0),Yd(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function p9(n,e,t,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=fk(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(b9(c));for(i.sort(m9),s=0;s<i.length;s++)t=g9(i[s],t);return t}function m9(n,e){return n.x-e.x}function g9(n,e){var t=_9(n,e);if(!t)return e;var r=mk(t,n);return Ka(r,r.next),Ka(t,t.next)}function _9(n,e){var t=e,r=n.x,i=n.y,s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=r&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===r))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,c=o.x,u=o.y,h=1/0,d;t=o;do r>=t.x&&t.x>=c&&r!==t.x&&au(i<u?r:s,i,c,u,i<u?s:r,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(r-t.x),Zd(t,n)&&(d<h||d===h&&(t.x>o.x||t.x===o.x&&y9(o,t)))&&(o=t,h=d)),t=t.next;while(t!==l);return o}function y9(n,e){return It(n.prev,n,e.prev)<0&&It(e.next,n,n.next)<0}function v9(n,e,t,r){var i=n;do i.z===0&&(i.z=ow(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,x9(i)}function x9(n){var e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function ow(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function b9(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function au(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function w9(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!T9(n,e)&&(Zd(n,e)&&Zd(e,n)&&S9(n,e)&&(It(n.prev,n,e.prev)||It(n,e.prev,e))||V_(n,e)&&It(n.prev,n,n.next)>0&&It(e.prev,e,e.next)>0)}function It(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function V_(n,e){return n.x===e.x&&n.y===e.y}function pk(n,e,t,r){var i=L_(It(n,e,t)),s=L_(It(n,e,r)),o=L_(It(t,r,n)),a=L_(It(t,r,e));return!!(i!==s&&o!==a||i===0&&k_(n,t,e)||s===0&&k_(n,r,e)||o===0&&k_(t,n,r)||a===0&&k_(t,e,r))}function k_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function L_(n){return n>0?1:n<0?-1:0}function T9(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&pk(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Zd(n,e){return It(n.prev,n,n.next)<0?It(n,e,n.next)>=0&&It(n,n.prev,e)>=0:It(n,e,n.prev)<0||It(n,n.next,e)<0}function S9(n,e){var t=n,r=!1,i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function mk(n,e){var t=new aw(n.i,n.x,n.y),r=new aw(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function dk(n,e,t,r){var i=new aw(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Qd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function aw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}B_.deviation=function(n,e,t,r){var i=e&&e.length,s=i?e[0]*t:n.length,o=Math.abs(lw(n,0,s,t));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*t,u=a<l-1?e[a+1]*t:n.length;o-=Math.abs(lw(n,c,u,t))}var h=0;for(a=0;a<r.length;a+=3){var d=r[a]*t,f=r[a+1]*t,p=r[a+2]*t;h+=Math.abs((n[d]-n[p])*(n[f+1]-n[d+1])-(n[d]-n[f])*(n[p+1]-n[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function lw(n,e,t,r){for(var i=0,s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}B_.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},r=0,i=0;i<n.length;i++){for(var s=0;s<n[i].length;s++)for(var o=0;o<e;o++)t.vertices.push(n[i][s][o]);i>0&&(r+=n[i-1].length,t.holes.push(r))}return t}});var _k=xe((lu,cu)=>{"use strict";(function(n){var e=typeof lu=="object"&&lu&&!lu.nodeType&&lu,t=typeof cu=="object"&&cu&&!cu.nodeType&&cu,r=typeof global=="object"&&global;(r.global===r||r.window===r||r.self===r)&&(n=r);var i,s=2147483647,o=36,a=1,l=26,c=38,u=700,h=72,d=128,f="-",p=/^xn--/,m=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=o-a,y=Math.floor,x=String.fromCharCode,T;function C(F){throw new RangeError(_[F])}function b(F,N){for(var B=F.length,H=[];B--;)H[B]=N(F[B]);return H}function w(F,N){var B=F.split("@"),H="";B.length>1&&(H=B[0]+"@",F=B[1]),F=F.replace(g,".");var he=F.split("."),Ce=b(he,N).join(".");return H+Ce}function P(F){for(var N=[],B=0,H=F.length,he,Ce;B<H;)he=F.charCodeAt(B++),he>=55296&&he<=56319&&B<H?(Ce=F.charCodeAt(B++),(Ce&64512)==56320?N.push(((he&1023)<<10)+(Ce&1023)+65536):(N.push(he),B--)):N.push(he);return N}function U(F){return b(F,function(N){var B="";return N>65535&&(N-=65536,B+=x(N>>>10&1023|55296),N=56320|N&1023),B+=x(N),B}).join("")}function R(F){return F-48<10?F-22:F-65<26?F-65:F-97<26?F-97:o}function I(F,N){return F+22+75*(F<26)-((N!=0)<<5)}function M(F,N,B){var H=0;for(F=B?y(F/u):F>>1,F+=y(F/N);F>v*l>>1;H+=o)F=y(F/v);return y(H+(v+1)*F/(F+c))}function E(F){var N=[],B=F.length,H,he=0,Ce=d,Ne=h,We,Te,ne,pt,nt,Y,Ze,yt,mt;for(We=F.lastIndexOf(f),We<0&&(We=0),Te=0;Te<We;++Te)F.charCodeAt(Te)>=128&&C("not-basic"),N.push(F.charCodeAt(Te));for(ne=We>0?We+1:0;ne<B;){for(pt=he,nt=1,Y=o;ne>=B&&C("invalid-input"),Ze=R(F.charCodeAt(ne++)),(Ze>=o||Ze>y((s-he)/nt))&&C("overflow"),he+=Ze*nt,yt=Y<=Ne?a:Y>=Ne+l?l:Y-Ne,!(Ze<yt);Y+=o)mt=o-yt,nt>y(s/mt)&&C("overflow"),nt*=mt;H=N.length+1,Ne=M(he-pt,H,pt==0),y(he/H)>s-Ce&&C("overflow"),Ce+=y(he/H),he%=H,N.splice(he++,0,Ce)}return U(N)}function O(F){var N,B,H,he,Ce,Ne,We,Te,ne,pt,nt,Y=[],Ze,yt,mt,Cn;for(F=P(F),Ze=F.length,N=d,B=0,Ce=h,Ne=0;Ne<Ze;++Ne)nt=F[Ne],nt<128&&Y.push(x(nt));for(H=he=Y.length,he&&Y.push(f);H<Ze;){for(We=s,Ne=0;Ne<Ze;++Ne)nt=F[Ne],nt>=N&&nt<We&&(We=nt);for(yt=H+1,We-N>y((s-B)/yt)&&C("overflow"),B+=(We-N)*yt,N=We,Ne=0;Ne<Ze;++Ne)if(nt=F[Ne],nt<N&&++B>s&&C("overflow"),nt==N){for(Te=B,ne=o;pt=ne<=Ce?a:ne>=Ce+l?l:ne-Ce,!(Te<pt);ne+=o)Cn=Te-pt,mt=o-pt,Y.push(x(I(pt+Cn%mt,0))),Te=y(Cn/mt);Y.push(x(I(Te,0))),Ce=M(B,yt,H==he),B=0,++H}++B,++N}return Y.join("")}function k(F){return w(F,function(N){return p.test(N)?E(N.slice(4).toLowerCase()):N})}function A(F){return w(F,function(N){return m.test(N)?"xn--"+O(N):N})}if(i={version:"1.4.1",ucs2:{decode:P,encode:U},decode:E,encode:O,toASCII:A,toUnicode:k},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&t)if(cu.exports==e)t.exports=i;else for(T in i)i.hasOwnProperty(T)&&(e[T]=i[T]);else n.punycode=i})(lu)});var vk=xe((ZWe,yk)=>{"use strict";yk.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var wk=xe((QWe,bk)=>{"use strict";var xk=typeof Symbol<"u"&&Symbol,E9=vk();bk.exports=function(){return typeof xk!="function"||typeof Symbol!="function"||typeof xk("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:E9()}});var Ek=xe((KWe,Sk)=>{"use strict";var Tk={foo:{}},C9=Object;Sk.exports=function(){return{__proto__:Tk}.foo===Tk.foo&&!({__proto__:null}instanceof C9)}});var Ak=xe((JWe,Dk)=>{"use strict";var D9="Function.prototype.bind called on incompatible ",A9=Object.prototype.toString,I9=Math.max,M9="[object Function]",Ck=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var s=0;s<t.length;s+=1)r[s+e.length]=t[s];return r},O9=function(e,t){for(var r=[],i=t||0,s=0;i<e.length;i+=1,s+=1)r[s]=e[i];return r},R9=function(n,e){for(var t="",r=0;r<n.length;r+=1)t+=n[r],r+1<n.length&&(t+=e);return t};Dk.exports=function(e){var t=this;if(typeof t!="function"||A9.apply(t)!==M9)throw new TypeError(D9+t);for(var r=O9(arguments,1),i,s=function(){if(this instanceof i){var u=t.apply(this,Ck(r,arguments));return Object(u)===u?u:this}return t.apply(e,Ck(r,arguments))},o=I9(0,t.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+R9(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var c=function(){};c.prototype=t.prototype,i.prototype=new c,c.prototype=null}return i}});var U_=xe((eze,Ik)=>{"use strict";var N9=Ak();Ik.exports=Function.prototype.bind||N9});var Ok=xe((tze,Mk)=>{"use strict";var P9=Function.prototype.call,F9=Object.prototype.hasOwnProperty,k9=U_();Mk.exports=k9.call(P9,F9)});var zo=xe((nze,kk)=>{"use strict";var $e,fu=SyntaxError,Fk=Function,du=TypeError,uw=function(n){try{return Fk('"use strict"; return ('+n+").constructor;")()}catch{}},Ja=Object.getOwnPropertyDescriptor;if(Ja)try{Ja({},"")}catch{Ja=null}var hw=function(){throw new du},L9=Ja?function(){try{return arguments.callee,hw}catch{try{return Ja(arguments,"callee").get}catch{return hw}}}():hw,uu=wk()(),B9=Ek()(),un=Object.getPrototypeOf||(B9?function(n){return n.__proto__}:null),hu={},V9=typeof Uint8Array>"u"||!un?$e:un(Uint8Array),el={"%AggregateError%":typeof AggregateError>"u"?$e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?$e:ArrayBuffer,"%ArrayIteratorPrototype%":uu&&un?un([][Symbol.iterator]()):$e,"%AsyncFromSyncIteratorPrototype%":$e,"%AsyncFunction%":hu,"%AsyncGenerator%":hu,"%AsyncGeneratorFunction%":hu,"%AsyncIteratorPrototype%":hu,"%Atomics%":typeof Atomics>"u"?$e:Atomics,"%BigInt%":typeof BigInt>"u"?$e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?$e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?$e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?$e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?$e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?$e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?$e:FinalizationRegistry,"%Function%":Fk,"%GeneratorFunction%":hu,"%Int8Array%":typeof Int8Array>"u"?$e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?$e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?$e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":uu&&un?un(un([][Symbol.iterator]())):$e,"%JSON%":typeof JSON=="object"?JSON:$e,"%Map%":typeof Map>"u"?$e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!uu||!un?$e:un(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?$e:Promise,"%Proxy%":typeof Proxy>"u"?$e:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?$e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?$e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!uu||!un?$e:un(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?$e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":uu&&un?un(""[Symbol.iterator]()):$e,"%Symbol%":uu?Symbol:$e,"%SyntaxError%":fu,"%ThrowTypeError%":L9,"%TypedArray%":V9,"%TypeError%":du,"%Uint8Array%":typeof Uint8Array>"u"?$e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?$e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?$e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?$e:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?$e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?$e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?$e:WeakSet};if(un)try{null.error}catch(n){Rk=un(un(n)),el["%Error.prototype%"]=Rk}var Rk,U9=function n(e){var t;if(e==="%AsyncFunction%")t=uw("async function () {}");else if(e==="%GeneratorFunction%")t=uw("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=uw("async function* () {}");else if(e==="%AsyncGenerator%"){var r=n("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=n("%AsyncGenerator%");i&&un&&(t=un(i.prototype))}return el[e]=t,t},Nk={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Kd=U_(),j_=Ok(),j9=Kd.call(Function.call,Array.prototype.concat),G9=Kd.call(Function.apply,Array.prototype.splice),Pk=Kd.call(Function.call,String.prototype.replace),G_=Kd.call(Function.call,String.prototype.slice),H9=Kd.call(Function.call,RegExp.prototype.exec),$9=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W9=/\\(\\)?/g,z9=function(e){var t=G_(e,0,1),r=G_(e,-1);if(t==="%"&&r!=="%")throw new fu("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new fu("invalid intrinsic syntax, expected opening `%`");var i=[];return Pk(e,$9,function(s,o,a,l){i[i.length]=a?Pk(l,W9,"$1"):o||s}),i},q9=function(e,t){var r=e,i;if(j_(Nk,r)&&(i=Nk[r],r="%"+i[0]+"%"),j_(el,r)){var s=el[r];if(s===hu&&(s=U9(r)),typeof s>"u"&&!t)throw new du("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new fu("intrinsic "+e+" does not exist!")};kk.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new du("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new du('"allowMissing" argument must be a boolean');if(H9(/^%?[^%]*%?$/,e)===null)throw new fu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=z9(e),i=r.length>0?r[0]:"",s=q9("%"+i+"%",t),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],G9(r,j9([0,1],c)));for(var u=1,h=!0;u<r.length;u+=1){var d=r[u],f=G_(d,0,1),p=G_(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new fu("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),i+="."+d,o="%"+i+"%",j_(el,o))a=el[o];else if(a!=null){if(!(d in a)){if(!t)throw new du("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ja&&u+1>=r.length){var m=Ja(a,d);h=!!m,h&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[d]}else h=j_(a,d),a=a[d];h&&!l&&(el[o]=a)}}return a}});var pw=xe((rze,Lk)=>{"use strict";var X9=zo(),dw=X9("%Object.defineProperty%",!0),fw=function(){if(dw)try{return dw({},"a",{value:1}),!0}catch{return!1}return!1};fw.hasArrayLengthDefineBug=function(){if(!fw())return null;try{return dw([],"length",{value:1}).length!==1}catch{return!0}};Lk.exports=fw});var mw=xe((ize,Bk)=>{"use strict";var Y9=zo(),H_=Y9("%Object.getOwnPropertyDescriptor%",!0);if(H_)try{H_([],"length")}catch{H_=null}Bk.exports=H_});var jk=xe((sze,Uk)=>{"use strict";var Z9=pw()(),gw=zo(),Jd=Z9&&gw("%Object.defineProperty%",!0);if(Jd)try{Jd({},"a",{value:1})}catch{Jd=!1}var Q9=gw("%SyntaxError%"),pu=gw("%TypeError%"),Vk=mw();Uk.exports=function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new pu("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new pu("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new pu("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new pu("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new pu("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new pu("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!Vk&&Vk(e,t);if(Jd)Jd(e,t,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:r,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[t]=r;else throw new Q9("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var qk=xe((oze,zk)=>{"use strict";var Wk=zo(),Gk=jk(),K9=pw()(),Hk=mw(),$k=Wk("%TypeError%"),J9=Wk("%Math.floor%");zk.exports=function(e,t){if(typeof e!="function")throw new $k("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||J9(t)!==t)throw new $k("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&Hk){var o=Hk(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!r)&&(K9?Gk(e,"length",t,!0,!0):Gk(e,"length",t)),e}});var Kk=xe((aze,$_)=>{"use strict";var _w=U_(),mu=zo(),eX=qk(),tX=mu("%TypeError%"),Yk=mu("%Function.prototype.apply%"),Zk=mu("%Function.prototype.call%"),Qk=mu("%Reflect.apply%",!0)||_w.call(Zk,Yk),ef=mu("%Object.defineProperty%",!0),nX=mu("%Math.max%");if(ef)try{ef({},"a",{value:1})}catch{ef=null}$_.exports=function(e){if(typeof e!="function")throw new tX("a function is required");var t=Qk(_w,Zk,arguments);return eX(t,1+nX(0,e.length-(arguments.length-1)),!0)};var Xk=function(){return Qk(_w,Yk,arguments)};ef?ef($_.exports,"apply",{value:Xk}):$_.exports.apply=Xk});var n2=xe((lze,t2)=>{"use strict";var Jk=zo(),e2=Kk(),rX=e2(Jk("String.prototype.indexOf"));t2.exports=function(e,t){var r=Jk(e,!!t);return typeof r=="function"&&rX(e,".prototype.")>-1?e2(r):r}});var r2=xe(()=>{"use strict"});var T2=xe((hze,w2)=>{"use strict";var Dw=typeof Map=="function"&&Map.prototype,yw=Object.getOwnPropertyDescriptor&&Dw?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,z_=Dw&&yw&&typeof yw.get=="function"?yw.get:null,i2=Dw&&Map.prototype.forEach,Aw=typeof Set=="function"&&Set.prototype,vw=Object.getOwnPropertyDescriptor&&Aw?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,q_=Aw&&vw&&typeof vw.get=="function"?vw.get:null,s2=Aw&&Set.prototype.forEach,iX=typeof WeakMap=="function"&&WeakMap.prototype,nf=iX?WeakMap.prototype.has:null,sX=typeof WeakSet=="function"&&WeakSet.prototype,rf=sX?WeakSet.prototype.has:null,oX=typeof WeakRef=="function"&&WeakRef.prototype,o2=oX?WeakRef.prototype.deref:null,aX=Boolean.prototype.valueOf,lX=Object.prototype.toString,cX=Function.prototype.toString,uX=String.prototype.match,Iw=String.prototype.slice,Xo=String.prototype.replace,hX=String.prototype.toUpperCase,a2=String.prototype.toLowerCase,g2=RegExp.prototype.test,l2=Array.prototype.concat,ms=Array.prototype.join,dX=Array.prototype.slice,c2=Math.floor,ww=typeof BigInt=="function"?BigInt.prototype.valueOf:null,xw=Object.getOwnPropertySymbols,Tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,gu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",jn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===gu||"symbol")?Symbol.toStringTag:null,_2=Object.prototype.propertyIsEnumerable,u2=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function h2(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||g2.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var r=n<0?-c2(-n):c2(n);if(r!==n){var i=String(r),s=Iw.call(e,i.length+1);return Xo.call(i,t,"$&_")+"."+Xo.call(Xo.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Xo.call(e,t,"$&_")}var Sw=r2(),d2=Sw.custom,f2=v2(d2)?d2:null;w2.exports=function n(e,t,r,i){var s=t||{};if(qo(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qo(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=qo(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qo(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(qo(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return b2(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?h2(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?h2(e,c):c}var u=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof e=="object")return Ew(e)?"[Array]":"[Object]";var h=MX(s,r);if(typeof i>"u")i=[];else if(x2(i,e)>=0)return"[Circular]";function d(M,E,O){if(E&&(i=dX.call(i),i.push(E)),O){var k={depth:s.depth};return qo(s,"quoteStyle")&&(k.quoteStyle=s.quoteStyle),n(M,k,r+1,i)}return n(M,s,r+1,i)}if(typeof e=="function"&&!p2(e)){var f=bX(e),p=W_(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+ms.call(p,", ")+" }":"")}if(v2(e)){var m=gu?Xo.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Tw.call(e);return typeof e=="object"&&!gu?tf(m):m}if(DX(e)){for(var g="<"+a2.call(String(e.nodeName)),_=e.attributes||[],v=0;v<_.length;v++)g+=" "+_[v].name+"="+y2(fX(_[v].value),"double",s);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+a2.call(String(e.nodeName))+">",g}if(Ew(e)){if(e.length===0)return"[]";var y=W_(e,d);return h&&!IX(y)?"["+Cw(y,h)+"]":"[ "+ms.call(y,", ")+" ]"}if(mX(e)){var x=W_(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!_2.call(e,"cause")?"{ ["+String(e)+"] "+ms.call(l2.call("[cause]: "+d(e.cause),x),", ")+" }":x.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ms.call(x,", ")+" }"}if(typeof e=="object"&&o){if(f2&&typeof e[f2]=="function"&&Sw)return Sw(e,{depth:u-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(wX(e)){var T=[];return i2&&i2.call(e,function(M,E){T.push(d(E,e,!0)+" => "+d(M,e))}),m2("Map",z_.call(e),T,h)}if(EX(e)){var C=[];return s2&&s2.call(e,function(M){C.push(d(M,e))}),m2("Set",q_.call(e),C,h)}if(TX(e))return bw("WeakMap");if(CX(e))return bw("WeakSet");if(SX(e))return bw("WeakRef");if(_X(e))return tf(d(Number(e)));if(vX(e))return tf(d(ww.call(e)));if(yX(e))return tf(aX.call(e));if(gX(e))return tf(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===global)return"{ [object globalThis] }";if(!pX(e)&&!p2(e)){var b=W_(e,d),w=u2?u2(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",U=!w&&jn&&Object(e)===e&&jn in e?Iw.call(Yo(e),8,-1):P?"Object":"",R=w||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",I=R+(U||P?"["+ms.call(l2.call([],U||[],P||[]),": ")+"] ":"");return b.length===0?I+"{}":h?I+"{"+Cw(b,h)+"}":I+"{ "+ms.call(b,", ")+" }"}return String(e)};function y2(n,e,t){var r=(t.quoteStyle||e)==="double"?'"':"'";return r+n+r}function fX(n){return Xo.call(String(n),/"/g,"&quot;")}function Ew(n){return Yo(n)==="[object Array]"&&(!jn||!(typeof n=="object"&&jn in n))}function pX(n){return Yo(n)==="[object Date]"&&(!jn||!(typeof n=="object"&&jn in n))}function p2(n){return Yo(n)==="[object RegExp]"&&(!jn||!(typeof n=="object"&&jn in n))}function mX(n){return Yo(n)==="[object Error]"&&(!jn||!(typeof n=="object"&&jn in n))}function gX(n){return Yo(n)==="[object String]"&&(!jn||!(typeof n=="object"&&jn in n))}function _X(n){return Yo(n)==="[object Number]"&&(!jn||!(typeof n=="object"&&jn in n))}function yX(n){return Yo(n)==="[object Boolean]"&&(!jn||!(typeof n=="object"&&jn in n))}function v2(n){if(gu)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!Tw)return!1;try{return Tw.call(n),!0}catch{}return!1}function vX(n){if(!n||typeof n!="object"||!ww)return!1;try{return ww.call(n),!0}catch{}return!1}var xX=Object.prototype.hasOwnProperty||function(n){return n in this};function qo(n,e){return xX.call(n,e)}function Yo(n){return lX.call(n)}function bX(n){if(n.name)return n.name;var e=uX.call(cX.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function x2(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1}function wX(n){if(!z_||!n||typeof n!="object")return!1;try{z_.call(n);try{q_.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function TX(n){if(!nf||!n||typeof n!="object")return!1;try{nf.call(n,nf);try{rf.call(n,rf)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function SX(n){if(!o2||!n||typeof n!="object")return!1;try{return o2.call(n),!0}catch{}return!1}function EX(n){if(!q_||!n||typeof n!="object")return!1;try{q_.call(n);try{z_.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function CX(n){if(!rf||!n||typeof n!="object")return!1;try{rf.call(n,rf);try{nf.call(n,nf)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function DX(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function b2(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,r="... "+t+" more character"+(t>1?"s":"");return b2(Iw.call(n,0,e.maxStringLength),e)+r}var i=Xo.call(Xo.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,AX);return y2(i,"single",e)}function AX(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+hX.call(e.toString(16))}function tf(n){return"Object("+n+")"}function bw(n){return n+" { ? }"}function m2(n,e,t,r){var i=r?Cw(t,r):ms.call(t,", ");return n+" ("+e+") {"+i+"}"}function IX(n){for(var e=0;e<n.length;e++)if(x2(n[e],`
`)>=0)return!1;return!0}function MX(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=ms.call(Array(n.indent+1)," ");else return null;return{base:t,prev:ms.call(Array(e+1),t)}}function Cw(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+ms.call(n,","+t)+`
`+e.prev}function W_(n,e){var t=Ew(n),r=[];if(t){r.length=n.length;for(var i=0;i<n.length;i++)r[i]=qo(n,i)?e(n[i],n):""}var s=typeof xw=="function"?xw(n):[],o;if(gu){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in n)qo(n,l)&&(t&&String(Number(l))===l&&l<n.length||gu&&o["$"+l]instanceof Symbol||(g2.call(/[^\w$]/,l)?r.push(e(l,n)+": "+e(n[l],n)):r.push(l+": "+e(n[l],n))));if(typeof xw=="function")for(var c=0;c<s.length;c++)_2.call(n,s[c])&&r.push("["+e(s[c])+"]: "+e(n[s[c]],n));return r}});var E2=xe((dze,S2)=>{"use strict";var Mw=zo(),_u=n2(),OX=T2(),RX=Mw("%TypeError%"),X_=Mw("%WeakMap%",!0),Y_=Mw("%Map%",!0),NX=_u("WeakMap.prototype.get",!0),PX=_u("WeakMap.prototype.set",!0),FX=_u("WeakMap.prototype.has",!0),kX=_u("Map.prototype.get",!0),LX=_u("Map.prototype.set",!0),BX=_u("Map.prototype.has",!0),Ow=function(n,e){for(var t=n,r;(r=t.next)!==null;t=r)if(r.key===e)return t.next=r.next,r.next=n.next,n.next=r,r},VX=function(n,e){var t=Ow(n,e);return t&&t.value},UX=function(n,e,t){var r=Ow(n,e);r?r.value=t:n.next={key:e,next:n.next,value:t}},jX=function(n,e){return!!Ow(n,e)};S2.exports=function(){var e,t,r,i={assert:function(s){if(!i.has(s))throw new RX("Side channel does not contain "+OX(s))},get:function(s){if(X_&&s&&(typeof s=="object"||typeof s=="function")){if(e)return NX(e,s)}else if(Y_){if(t)return kX(t,s)}else if(r)return VX(r,s)},has:function(s){if(X_&&s&&(typeof s=="object"||typeof s=="function")){if(e)return FX(e,s)}else if(Y_){if(t)return BX(t,s)}else if(r)return jX(r,s);return!1},set:function(s,o){X_&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new X_),PX(e,s,o)):Y_?(t||(t=new Y_),LX(t,s,o)):(r||(r={key:{},next:null}),UX(r,s,o))}};return i}});var Z_=xe((fze,C2)=>{"use strict";var GX=String.prototype.replace,HX=/%20/g,Rw={RFC1738:"RFC1738",RFC3986:"RFC3986"};C2.exports={default:Rw.RFC3986,formatters:{RFC1738:function(n){return GX.call(n,HX,"+")},RFC3986:function(n){return String(n)}},RFC1738:Rw.RFC1738,RFC3986:Rw.RFC3986}});var Pw=xe((pze,A2)=>{"use strict";var $X=Z_(),Nw=Object.prototype.hasOwnProperty,tl=Array.isArray,gs=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),WX=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(tl(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);t.obj[t.prop]=i}}},D2=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},zX=function n(e,t,r){if(!t)return e;if(typeof t!="object"){if(tl(e))e.push(t);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!Nw.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return tl(e)&&!tl(t)&&(i=D2(e,r)),tl(e)&&tl(t)?(t.forEach(function(s,o){if(Nw.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=n(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return Nw.call(s,o)?s[o]=n(s[o],a,r):s[o]=a,s},i)},qX=function(e,t){return Object.keys(t).reduce(function(r,i){return r[i]=t[i],r},e)},XX=function(n,e,t){var r=n.replace(/\+/g," ");if(t==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},YX=function(e,t,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var c=o.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===$X.RFC1738&&(c===40||c===41)){a+=o.charAt(l);continue}if(c<128){a=a+gs[c];continue}if(c<2048){a=a+(gs[192|c>>6]+gs[128|c&63]);continue}if(c<55296||c>=57344){a=a+(gs[224|c>>12]+gs[128|c>>6&63]+gs[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|o.charCodeAt(l)&1023),a+=gs[240|c>>18]+gs[128|c>>12&63]+gs[128|c>>6&63]+gs[128|c&63]}return a},ZX=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var s=t[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];typeof u=="object"&&u!==null&&r.indexOf(u)===-1&&(t.push({obj:o,prop:c}),r.push(u))}return WX(t),e},QX=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},KX=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},JX=function(e,t){return[].concat(e,t)},eY=function(e,t){if(tl(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)};A2.exports={arrayToObject:D2,assign:qX,combine:JX,compact:ZX,decode:XX,encode:YX,isBuffer:KX,isRegExp:QX,maybeMap:eY,merge:zX}});var P2=xe((mze,N2)=>{"use strict";var O2=E2(),Q_=Pw(),sf=Z_(),tY=Object.prototype.hasOwnProperty,I2={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Zs=Array.isArray,nY=Array.prototype.push,R2=function(n,e){nY.apply(n,Zs(e)?e:[e])},rY=Date.prototype.toISOString,M2=sf.default,Gn={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Q_.encode,encodeValuesOnly:!1,format:M2,formatter:sf.formatters[M2],indices:!1,serializeDate:function(e){return rY.call(e)},skipNulls:!1,strictNullHandling:!1},iY=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Fw={},sY=function n(e,t,r,i,s,o,a,l,c,u,h,d,f,p,m,g){for(var _=e,v=g,y=0,x=!1;(v=v.get(Fw))!==void 0&&!x;){var T=v.get(e);if(y+=1,typeof T<"u"){if(T===y)throw new RangeError("Cyclic object value");x=!0}typeof v.get(Fw)>"u"&&(y=0)}if(typeof l=="function"?_=l(t,_):_ instanceof Date?_=h(_):r==="comma"&&Zs(_)&&(_=Q_.maybeMap(_,function(k){return k instanceof Date?h(k):k})),_===null){if(s)return a&&!p?a(t,Gn.encoder,m,"key",d):t;_=""}if(iY(_)||Q_.isBuffer(_)){if(a){var C=p?t:a(t,Gn.encoder,m,"key",d);return[f(C)+"="+f(a(_,Gn.encoder,m,"value",d))]}return[f(t)+"="+f(String(_))]}var b=[];if(typeof _>"u")return b;var w;if(r==="comma"&&Zs(_))p&&a&&(_=Q_.maybeMap(_,a)),w=[{value:_.length>0?_.join(",")||null:void 0}];else if(Zs(l))w=l;else{var P=Object.keys(_);w=c?P.sort(c):P}for(var U=i&&Zs(_)&&_.length===1?t+"[]":t,R=0;R<w.length;++R){var I=w[R],M=typeof I=="object"&&typeof I.value<"u"?I.value:_[I];if(!(o&&M===null)){var E=Zs(_)?typeof r=="function"?r(U,I):U:U+(u?"."+I:"["+I+"]");g.set(e,y);var O=O2();O.set(Fw,g),R2(b,n(M,E,r,i,s,o,r==="comma"&&p&&Zs(_)?null:a,l,c,u,h,d,f,p,m,O))}}return b},oY=function(e){if(!e)return Gn;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Gn.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=sf.default;if(typeof e.format<"u"){if(!tY.call(sf.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=sf.formatters[r],s=Gn.filter;return(typeof e.filter=="function"||Zs(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Gn.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Gn.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Gn.charsetSentinel,delimiter:typeof e.delimiter>"u"?Gn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Gn.encode,encoder:typeof e.encoder=="function"?e.encoder:Gn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Gn.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Gn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Gn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Gn.strictNullHandling}};N2.exports=function(n,e){var t=n,r=oY(e),i,s;typeof r.filter=="function"?(s=r.filter,t=s("",t)):Zs(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof t!="object"||t===null)return"";var a;e&&e.arrayFormat in I2?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=I2[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);for(var u=O2(),h=0;h<i.length;++h){var d=i[h];r.skipNulls&&t[d]===null||R2(o,sY(t[d],d,l,c,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var f=o.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""}});var L2=xe((gze,k2)=>{"use strict";var yu=Pw(),kw=Object.prototype.hasOwnProperty,aY=Array.isArray,hn={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:yu.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},lY=function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},F2=function(n,e){return n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1?n.split(","):n},cY="utf8=%26%2310003%3B",uY="utf8=%E2%9C%93",hY=function(e,t){var r={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,s),a=-1,l,c=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===uY?c="utf-8":o[l]===cY&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var u=o[l],h=u.indexOf("]="),d=h===-1?u.indexOf("="):h+1,f,p;d===-1?(f=t.decoder(u,hn.decoder,c,"key"),p=t.strictNullHandling?null:""):(f=t.decoder(u.slice(0,d),hn.decoder,c,"key"),p=yu.maybeMap(F2(u.slice(d+1),t),function(m){return t.decoder(m,hn.decoder,c,"value")})),p&&t.interpretNumericEntities&&c==="iso-8859-1"&&(p=lY(p)),u.indexOf("[]=")>-1&&(p=aY(p)?[p]:p),kw.call(r,f)?r[f]=yu.combine(r[f],p):r[f]=p}return r},dY=function(n,e,t,r){for(var i=r?e:F2(e,t),s=n.length-1;s>=0;--s){var o,a=n[s];if(a==="[]"&&t.parseArrays)o=[].concat(i);else{o=t.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(l,10);!t.parseArrays&&l===""?o={0:i}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(o=[],o[c]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},fY=function(e,t,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!r.plainObjects&&kw.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var h=0;r.depth>0&&(l=a.exec(s))!==null&&h<r.depth;){if(h+=1,!r.plainObjects&&kw.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+s.slice(l.index)+"]"),dY(u,t,r,i)}},pY=function(e){if(!e)return hn;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?hn.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?hn.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:hn.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:hn.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:hn.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:hn.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:hn.comma,decoder:typeof e.decoder=="function"?e.decoder:hn.decoder,delimiter:typeof e.delimiter=="string"||yu.isRegExp(e.delimiter)?e.delimiter:hn.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:hn.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:hn.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:hn.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:hn.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:hn.strictNullHandling}};k2.exports=function(n,e){var t=pY(e);if(n===""||n===null||typeof n>"u")return t.plainObjects?Object.create(null):{};for(var r=typeof n=="string"?hY(n,t):n,i=t.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],l=fY(a,r[a],t,typeof n=="string");i=yu.merge(i,l,t)}return t.allowSparse===!0?i:yu.compact(i)}});var V2=xe((_ze,B2)=>{"use strict";var mY=P2(),gY=L2(),_Y=Z_();B2.exports={formats:_Y,parse:gY,stringify:mY}});var H2=xe(xu=>{"use strict";var yY=_k();function li(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var vY=/^([a-z0-9.+-]+:)/i,xY=/:[0-9]*$/,bY=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,wY=["<",">",'"',"`"," ","\r",`
`,"	"],TY=["{","}","|","\\","^","`"].concat(wY),Lw=["'"].concat(TY),U2=["%","/","?",";","#"].concat(Lw),j2=["/","?","#"],SY=255,G2=/^[+a-z0-9A-Z_-]{0,63}$/,EY=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,CY={javascript:!0,"javascript:":!0},Bw={javascript:!0,"javascript:":!0},vu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Vw=V2();function of(n,e,t){if(n&&typeof n=="object"&&n instanceof li)return n;var r=new li;return r.parse(n,e,t),r}li.prototype.parse=function(n,e,t){if(typeof n!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=r!==-1&&r<n.indexOf("#")?"?":"#",s=n.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),n=s.join(i);var a=n;if(a=a.trim(),!t&&n.split("#").length===1){var l=bY.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=Vw.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=vY.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(t||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(c&&Bw[c])&&(a=a.substr(2),this.slashes=!0)}if(!Bw[c]&&(h||c&&!vu[c])){for(var d=-1,f=0;f<j2.length;f++){var p=a.indexOf(j2[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,g;d===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",d),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<U2.length;f++){var p=a.indexOf(U2[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var v=this.hostname.split(/\./),f=0,y=v.length;f<y;f++){var x=v[f];if(x&&!x.match(G2)){for(var T="",C=0,b=x.length;C<b;C++)x.charCodeAt(C)>127?T+="x":T+=x[C];if(!T.match(G2)){var w=v.slice(0,f),P=v.slice(f+1),U=x.match(EY);U&&(w.push(U[1]),P.unshift(U[2])),P.length&&(a="/"+P.join(".")+a),this.hostname=w.join(".");break}}}this.hostname.length>SY?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=yY.toASCII(this.hostname));var R=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+R,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!CY[u])for(var f=0,y=Lw.length;f<y;f++){var M=Lw[f];if(a.indexOf(M)!==-1){var E=encodeURIComponent(M);E===M&&(E=escape(M)),a=a.split(M).join(E)}}var O=a.indexOf("#");O!==-1&&(this.hash=a.substr(O),a=a.slice(0,O));var k=a.indexOf("?");if(k!==-1?(this.search=a.substr(k),this.query=a.substr(k+1),e&&(this.query=Vw.parse(this.query)),a=a.slice(0,k)):e&&(this.search="",this.query={}),a&&(this.pathname=a),vu[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var R=this.pathname||"",A=this.search||"";this.path=R+A}return this.href=this.format(),this};function DY(n){return typeof n=="string"&&(n=of(n)),n instanceof li?n.format():li.prototype.format.call(n)}li.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=n+this.host:this.hostname&&(i=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Vw.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||vu[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+t+o+r};function AY(n,e){return of(n,!1,!0).resolve(e)}li.prototype.resolve=function(n){return this.resolveObject(of(n,!1,!0)).format()};function IY(n,e){return n?of(n,!1,!0).resolveObject(e):e}li.prototype.resolveObject=function(n){if(typeof n=="string"){var e=new li;e.parse(n,!1,!0),n=e}for(var t=new li,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];t[s]=this[s]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var o=Object.keys(n),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=n[l])}return vu[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!vu[n.protocol]){for(var c=Object.keys(n),u=0;u<c.length;u++){var h=c[u];t[h]=n[h]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!Bw[n.protocol]){for(var y=(n.pathname||"").split("/");y.length&&!(n.host=y.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),t.pathname=y.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var d=t.pathname||"",f=t.search||"";t.path=d+f}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=n.host||n.pathname&&n.pathname.charAt(0)==="/",g=m||p||t.host&&n.pathname,_=g,v=t.pathname&&t.pathname.split("/")||[],y=n.pathname&&n.pathname.split("/")||[],x=t.protocol&&!vu[t.protocol];if(x&&(t.hostname="",t.port=null,t.host&&(v[0]===""?v[0]=t.host:v.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(y[0]===""?y[0]=n.host:y.unshift(n.host)),n.host=null),g=g&&(y[0]===""||v[0]==="")),m)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,v=y;else if(y.length)v||(v=[]),v.pop(),v=v.concat(y),t.search=n.search,t.query=n.query;else if(n.search!=null){if(x){t.host=v.shift(),t.hostname=t.host;var T=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;T&&(t.auth=T.shift(),t.hostname=T.shift(),t.host=t.hostname)}return t.search=n.search,t.query=n.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!v.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var C=v.slice(-1)[0],b=(t.host||n.host||v.length>1)&&(C==="."||C==="..")||C==="",w=0,P=v.length;P>=0;P--)C=v[P],C==="."?v.splice(P,1):C===".."?(v.splice(P,1),w++):w&&(v.splice(P,1),w--);if(!g&&!_)for(;w--;w)v.unshift("..");g&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),b&&v.join("/").substr(-1)!=="/"&&v.push("");var U=v[0]===""||v[0]&&v[0].charAt(0)==="/";if(x){t.hostname=U?"":v.length?v.shift():"",t.host=t.hostname;var T=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;T&&(t.auth=T.shift(),t.hostname=T.shift(),t.host=t.hostname)}return g=g||t.host&&v.length,g&&!U&&v.unshift(""),v.length>0?t.pathname=v.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};li.prototype.parseHost=function(){var n=this.host,e=xY.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};xu.parse=of;xu.resolve=AY;xu.resolveObject=IY;xu.format=DY;xu.Url=li});var RS=null;var Qy=1;function gn(n){let e=RS;return RS=n,e}var NS={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function CV(n){if(!(e0(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Qy)){if(!n.producerMustRecompute(n)&&!Ky(n)){n.dirty=!1,n.lastCleanEpoch=Qy;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Qy}}function PS(n){return n&&(n.nextProducerIndex=0),gn(n)}function FS(n,e){if(gn(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(e0(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Jy(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ky(n){pp(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(CV(t),r!==t.version))return!0}return!1}function kS(n){if(pp(n),e0(n))for(let e=0;e<n.producerNode.length;e++)Jy(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Jy(n,e){if(DV(n),pp(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)Jy(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];pp(i),i.producerIndexOfThis[r]=e}}function e0(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pp(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function DV(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function AV(){throw new Error}var IV=AV;function LS(n){IV=n}function be(n){return typeof n=="function"}function wl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var mp=wl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ma(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var jt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(be(r))try{r()}catch(s){e=s instanceof mp?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{BS(s)}catch(o){e=e??[],o instanceof mp?e=[...e,...o.errors]:e.push(o)}}if(e)throw new mp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)BS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ma(t,e)}remove(e){let{_finalizers:t}=this;t&&ma(t,e),e instanceof n&&e._removeParent(this)}};jt.EMPTY=(()=>{let n=new jt;return n.closed=!0,n})();var t0=jt.EMPTY;function gp(n){return n instanceof jt||n&&"closed"in n&&be(n.remove)&&be(n.add)&&be(n.unsubscribe)}function BS(n){be(n)?n():n.unsubscribe()}var gi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Tl={setTimeout(n,e,...t){let{delegate:r}=Tl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Tl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _p(n){Tl.setTimeout(()=>{let{onUnhandledError:e}=gi;if(e)e(n);else throw n})}function ga(){}var VS=(()=>n0("C",void 0,void 0))();function US(n){return n0("E",void 0,n)}function jS(n){return n0("N",n,void 0)}function n0(n,e,t){return{kind:n,value:e,error:t}}var _a=null;function Sl(n){if(gi.useDeprecatedSynchronousErrorHandling){let e=!_a;if(e&&(_a={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=_a;if(_a=null,t)throw r}}else n()}function GS(n){gi.useDeprecatedSynchronousErrorHandling&&_a&&(_a.errorThrown=!0,_a.error=n)}var ya=class extends jt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gp(e)&&e.add(this)):this.destination=RV}static create(e,t,r){return new El(e,t,r)}next(e){this.isStopped?i0(jS(e),this):this._next(e)}error(e){this.isStopped?i0(US(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?i0(VS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},MV=Function.prototype.bind;function r0(n,e){return MV.call(n,e)}var s0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yp(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yp(r)}else yp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yp(t)}}},El=class extends ya{constructor(e,t,r){super();let i;if(be(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&gi.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&r0(e.next,s),error:e.error&&r0(e.error,s),complete:e.complete&&r0(e.complete,s)}):i=e}this.destination=new s0(i)}};function yp(n){gi.useDeprecatedSynchronousErrorHandling?GS(n):_p(n)}function OV(n){throw n}function i0(n,e){let{onStoppedNotification:t}=gi;t&&Tl.setTimeout(()=>t(n,e))}var RV={closed:!0,next:ga,error:OV,complete:ga};var Cl=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function zn(n){return n}function o0(...n){return a0(n)}function a0(n){return n.length===0?zn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=PV(t)?t:new El(t,r,i);return Sl(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=HS(r),new r((i,s)=>{let o=new El({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Cl](){return this}pipe(...t){return a0(t)(this)}toPromise(t){return t=HS(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function HS(n){var e;return(e=n??gi.Promise)!==null&&e!==void 0?e:Promise}function NV(n){return n&&be(n.next)&&be(n.error)&&be(n.complete)}function PV(n){return n&&n instanceof ya||NV(n)&&gp(n)}function l0(n){return be(n?.lift)}function Ge(n){return e=>{if(l0(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Oe(n,e,t,r,i){return new c0(n,e,t,r,i)}var c0=class extends ya{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Dl(){return Ge((n,e)=>{let t=null;n._refCount++;let r=Oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Al=class extends Me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,l0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jt;let t=this.getSubject();e.add(this.source.subscribe(Oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jt.EMPTY)}return e}refCount(){return Dl()(this)}};var $S=wl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var St=(()=>{class n extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vp(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $S}next(t){Sl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Sl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Sl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?t0:(this.currentObservers=null,s.push(t),new jt(()=>{this.currentObservers=null,ma(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Me;return t.source=this,t}}return n.create=(e,t)=>new vp(e,t),n})(),vp=class extends St{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:t0}};var rn=class extends St{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var u0={now(){return(u0.delegate||Date).now()},delegate:void 0};var xp=class extends jt{constructor(e,t){super()}schedule(e,t=0){return this}};var ah={setInterval(n,e,...t){let{delegate:r}=ah;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ah;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var bp=class extends xp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ah.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ah.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ma(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Il=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Il.now=u0.now;var wp=class extends Il{constructor(e,t=Il.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var FV=new wp(bp),WS=FV;var Dn=new Me(n=>n.complete());function Tp(n){return n&&be(n.schedule)}function zS(n){return n[n.length-1]}function ho(n){return be(zS(n))?n.pop():void 0}function fo(n){return Tp(zS(n))?n.pop():void 0}function An(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function He(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function qS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function va(n){return this instanceof va?(this.v=n,this):new va(n)}function XS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(f){return new Promise(function(p,m){s.push([d,f,p,m])>1||a(d,f)})})}function a(d,f){try{l(r[d](f))}catch(p){h(s[0][3],p)}}function l(d){d.value instanceof va?Promise.resolve(d.value.v).then(c,u):h(s[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function h(d,f){d(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function YS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof qS=="function"?qS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var Ml=n=>n&&typeof n.length=="number"&&typeof n!="function";function Sp(n){return be(n?.then)}function Ep(n){return be(n[Cl])}function Cp(n){return Symbol.asyncIterator&&be(n?.[Symbol.asyncIterator])}function Dp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ap=kV();function Ip(n){return be(n?.[Ap])}function Mp(n){return XS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield va(t.read());if(i)return yield va(void 0);yield yield va(r)}}finally{t.releaseLock()}})}function Op(n){return be(n?.getReader)}function st(n){if(n instanceof Me)return n;if(n!=null){if(Ep(n))return LV(n);if(Ml(n))return BV(n);if(Sp(n))return VV(n);if(Cp(n))return ZS(n);if(Ip(n))return UV(n);if(Op(n))return jV(n)}throw Dp(n)}function LV(n){return new Me(e=>{let t=n[Cl]();if(be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BV(n){return new Me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function VV(n){return new Me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_p)})}function UV(n){return new Me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ZS(n){return new Me(e=>{GV(n,e).catch(t=>e.error(t))})}function jV(n){return ZS(Mp(n))}function GV(n,e){var t,r,i,s;return He(this,void 0,void 0,function*(){try{for(t=YS(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function ur(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Rp(n,e=0){return Ge((t,r)=>{t.subscribe(Oe(r,i=>ur(r,n,()=>r.next(i),e),()=>ur(r,n,()=>r.complete(),e),i=>ur(r,n,()=>r.error(i),e)))})}function Np(n,e=0){return Ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function QS(n,e){return st(n).pipe(Np(e),Rp(e))}function KS(n,e){return st(n).pipe(Np(e),Rp(e))}function JS(n,e){return new Me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function eE(n,e){return new Me(t=>{let r;return ur(t,e,()=>{r=n[Ap](),ur(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>be(r?.return)&&r.return()})}function Pp(n,e){if(!n)throw new Error("Iterable cannot be null");return new Me(t=>{ur(t,e,()=>{let r=n[Symbol.asyncIterator]();ur(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function tE(n,e){return Pp(Mp(n),e)}function nE(n,e){if(n!=null){if(Ep(n))return QS(n,e);if(Ml(n))return JS(n,e);if(Sp(n))return KS(n,e);if(Cp(n))return Pp(n,e);if(Ip(n))return eE(n,e);if(Op(n))return tE(n,e)}throw Dp(n)}function bt(n,e){return e?nE(n,e):st(n)}function me(...n){let e=fo(n);return bt(n,e)}function Ol(n,e){let t=be(n)?n:()=>n,r=i=>i.error(t());return new Me(e?i=>e.schedule(r,0,i):r)}function h0(n){return!!n&&(n instanceof Me||be(n.lift)&&be(n.subscribe))}var Ds=wl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function rE(n){return n instanceof Date&&!isNaN(n)}function Ie(n,e){return Ge((t,r)=>{let i=0;t.subscribe(Oe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:HV}=Array;function $V(n,e){return HV(e)?n(...e):n(e)}function Rl(n){return Ie(e=>$V(n,e))}var{isArray:WV}=Array,{getPrototypeOf:zV,prototype:qV,keys:XV}=Object;function Fp(n){if(n.length===1){let e=n[0];if(WV(e))return{args:e,keys:null};if(YV(e)){let t=XV(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function YV(n){return n&&typeof n=="object"&&zV(n)===qV}function kp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Nl(...n){let e=fo(n),t=ho(n),{args:r,keys:i}=Fp(n);if(r.length===0)return bt([],e);let s=new Me(ZV(r,e,i?o=>kp(i,o):zn));return t?s.pipe(Rl(t)):s}function ZV(n,e,t=zn){return r=>{iE(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)iE(e,()=>{let c=bt(n[l],e),u=!1;c.subscribe(Oe(r,h=>{s[l]=h,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function iE(n,e,t){n?ur(t,n,e):e()}function sE(n,e,t,r,i,s,o,a){let l=[],c=0,u=0,h=!1,d=()=>{h&&!l.length&&!c&&e.complete()},f=m=>c<r?p(m):l.push(m),p=m=>{s&&e.next(m),c++;let g=!1;st(t(m,u++)).subscribe(Oe(e,_=>{i?.(_),s?f(_):e.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){let _=l.shift();o?ur(e,o,()=>p(_)):p(_)}d()}catch(_){e.error(_)}}))};return n.subscribe(Oe(e,f,()=>{h=!0,d()})),()=>{a?.()}}function Dt(n,e,t=1/0){return be(e)?Dt((r,i)=>Ie((s,o)=>e(r,s,i,o))(st(n(r,i))),t):(typeof e=="number"&&(t=e),Ge((r,i)=>sE(r,i,n,t)))}function Pl(n=1/0){return Dt(zn,n)}function oE(){return Pl(1)}function po(...n){return oE()(bt(n,fo(n)))}function Lp(n){return new Me(e=>{st(n()).subscribe(e)})}function d0(...n){let e=ho(n),{args:t,keys:r}=Fp(n),i=new Me(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let h=!1;st(t[u]).subscribe(Oe(s,d=>{h||(h=!0,c--),a[u]=d},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(r?kp(r,a):a),s.complete())}))}});return e?i.pipe(Rl(e)):i}var QV=["addListener","removeListener"],KV=["addEventListener","removeEventListener"],JV=["on","off"];function jr(n,e,t,r){if(be(t)&&(r=t,t=void 0),r)return jr(n,e,t).pipe(Rl(r));let[i,s]=nU(n)?KV.map(o=>a=>n[o](e,a,t)):eU(n)?QV.map(aE(n,e)):tU(n)?JV.map(aE(n,e)):[];if(!i&&Ml(n))return Dt(o=>jr(o,e,t))(st(n));if(!i)throw new TypeError("Invalid event target");return new Me(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function aE(n,e){return t=>r=>n[t](e,r)}function eU(n){return be(n.addListener)&&be(n.removeListener)}function tU(n){return be(n.on)&&be(n.off)}function nU(n){return be(n.addEventListener)&&be(n.removeEventListener)}function f0(n=0,e,t=WS){let r=-1;return e!=null&&(Tp(e)?t=e:r=e),new Me(i=>{let s=rE(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}var{isArray:rU}=Array;function Bp(n){return n.length===1&&rU(n[0])?n[0]:n}function en(n,e){return Ge((t,r)=>{let i=0;t.subscribe(Oe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function p0(...n){return n=Bp(n),n.length===1?st(n[0]):new Me(iU(n))}function iU(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push(st(n[r]).subscribe(Oe(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}function lh(...n){let e=ho(n),t=Bp(n);return t.length?new Me(r=>{let i=t.map(()=>[]),s=t.map(()=>!1);r.add(()=>{i=s=null});for(let o=0;!r.closed&&o<t.length;o++)st(t[o]).subscribe(Oe(r,a=>{if(i[o].push(a),i.every(l=>l.length)){let l=i.map(c=>c.shift());r.next(e?e(...l):l),i.some((c,u)=>!c.length&&s[u])&&r.complete()}},()=>{s[o]=!0,!i[o].length&&r.complete()}));return()=>{i=s=null}}):Dn}function mo(n){return Ge((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Oe(t,void 0,void 0,o=>{s=st(n(o,mo(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function lE(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Oe(o,u=>{let h=c++;l=a?n(l,u,h):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function As(n,e){return be(e)?Dt(n,e,1):Dt(n,1)}function go(n){return Ge((e,t)=>{let r=!1;e.subscribe(Oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function hr(n){return n<=0?()=>Dn:Ge((e,t)=>{let r=0;e.subscribe(Oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function m0(n){return Ie(()=>n)}function Vp(n=sU){return Ge((e,t)=>{let r=!1;e.subscribe(Oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sU(){return new Ds}function g0(...n){return e=>po(e,me(...n))}function Is(n){return Ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function $i(n,e){let t=arguments.length>=2;return r=>r.pipe(n?en((i,s)=>n(i,s,r)):zn,hr(1),t?go(e):Vp(()=>new Ds))}function Fl(n){return n<=0?()=>Dn:Ge((e,t)=>{let r=[];e.subscribe(Oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function _0(n,e){let t=arguments.length>=2;return r=>r.pipe(n?en((i,s)=>n(i,s,r)):zn,Fl(1),t?go(e):Vp(()=>new Ds))}function y0(n,e){return Ge(lE(n,e,arguments.length>=2,!0))}function Up(...n){let e=fo(n);return Ge((t,r)=>{(e?po(n,t,e):po(n,t)).subscribe(r)})}function In(n,e){return Ge((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Oe(r,l=>{i?.unsubscribe();let c=0,u=s++;st(n(l,u)).subscribe(i=Oe(r,h=>r.next(e?e(l,h,u,c++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Mn(n){return Ge((e,t)=>{st(n).subscribe(Oe(t,()=>t.complete(),ga)),!t.closed&&e.subscribe(t)})}function Gt(n,e,t){let r=be(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ge((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Oe(s,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):zn}function jp(...n){let e=ho(n);return Ge((t,r)=>{let i=n.length,s=new Array(i),o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)st(n[l]).subscribe(Oe(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(zn))&&(o=null))},ga));t.subscribe(Oe(r,l=>{if(a){let c=[l,...s];r.next(e?e(...c):c)}}))})}function gt(n){for(let e in n)if(n[e]===gt)return e;throw Error("Could not find renamed property on target object.")}function Gp(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function On(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(On).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function k0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var oU=gt({__forward_ref__:gt});function Kl(n){return n.__forward_ref__=Kl,n.toString=function(){return On(this())},n}function qn(n){return zE(n)?n():n}function zE(n){return typeof n=="function"&&n.hasOwnProperty(oU)&&n.__forward_ref__===Kl}function qE(n){return n&&!!n.\u0275providers}var XE="https://g.co/ng/security#xss",_e=class extends Error{constructor(e,t){super(xm(e,t)),this.code=e}};function xm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var aU=gt({\u0275cmp:gt}),lU=gt({\u0275dir:gt}),cU=gt({\u0275pipe:gt}),uU=gt({\u0275mod:gt}),tm=gt({\u0275fac:gt}),ch=gt({__NG_ELEMENT_ID__:gt}),cE=gt({__NG_ENV_ID__:gt});function bm(n){return typeof n=="string"?n:n==null?"":String(n)}function hU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bm(n)}function dU(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new _e(-200,`Circular dependency in DI detected for ${n}${t}`)}function Gv(n,e){let t=e?` in ${e}`:"";throw new _e(-201,!1)}function fU(n,e,t){n!=e&&YE(t,n,e,"==")}function pU(n,e){n==null&&YE(e,n,null,"!=")}function YE(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qe(n){return{providers:n.providers||[],imports:n.imports||[]}}function wm(n){return uE(n,QE)||uE(n,KE)}function ZE(n){return wm(n)!==null}function uE(n,e){return n.hasOwnProperty(e)?n[e]:null}function mU(n){let e=n&&(n[QE]||n[KE]);return e||null}function hE(n){return n&&(n.hasOwnProperty(dE)||n.hasOwnProperty(gU))?n[dE]:null}var QE=gt({\u0275prov:gt}),dE=gt({\u0275inj:gt}),KE=gt({ngInjectableDef:gt}),gU=gt({ngInjectorDef:gt}),Be=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Be||{}),L0;function JE(){return L0}function Gr(n){let e=L0;return L0=n,e}function eC(n,e,t){let r=wm(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Be.Optional)return null;if(e!==void 0)return e;Gv(On(n),"Injector")}var Rn=globalThis;var ce=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var _U={},hh=_U,B0="__NG_DI_FLAG__",nm="ngTempTokenPath",yU="ngTokenPath",vU=/\n/gm,xU="\u0275",fE="__source",Ul;function bU(){return Ul}function _o(n){let e=Ul;return Ul=n,e}function wU(n,e=Be.Default){if(Ul===void 0)throw new _e(-203,!1);return Ul===null?eC(n,void 0,e):Ul.get(n,e&Be.Optional?null:void 0,e)}function re(n,e=Be.Default){return(JE()||wU)(qn(n),e)}function $(n,e=Be.Default){return re(n,Tm(e))}function Tm(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function V0(n){let e=[];for(let t=0;t<n.length;t++){let r=qn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new _e(900,!1);let i,s=Be.Default;for(let o=0;o<r.length;o++){let a=r[o],l=TU(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(re(i,s))}else e.push(re(r))}return e}function tC(n,e){return n[B0]=e,n.prototype[B0]=e,n}function TU(n){return n[B0]}function SU(n,e,t,r){let i=n[nm];throw e[fE]&&i.unshift(e[fE]),n.message=EU(`
`+n.message,i,t,r),n[yU]=i,n[nm]=null,n}function EU(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==xU?n.slice(2):n;let i=On(e);if(Array.isArray(e))i=e.map(On).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):On(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(vU,`
  `)}`}function Eh(n){return{toString:n}.toString()}var nC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(nC||{}),Xi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xi||{}),Gl={},Xn=[];function rC(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function U0(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];CU(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function iC(n){return n===3||n===4||n===6}function CU(n){return n.charCodeAt(0)===64}function dh(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?pE(n,t,i,null,e[++r]):pE(n,t,i,null,null))}}return n}function pE(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var sC="ng-template";function DU(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if(typeof s=="string"&&i){let o=n[r++];if(t&&s==="class"&&rC(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<n.length&&typeof(s=n[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function oC(n){return n.type===4&&n.value!==sC}function AU(n,e,t){let r=n.type===4&&!t?sC:n.value;return e===r}function IU(n,e,t){let r=4,i=n.attrs||[],s=RU(i),o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!_i(r)&&!_i(l))return!1;if(o&&_i(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!AU(n,l,t)||l===""&&e.length===1){if(_i(r))return!1;o=!0}}else{let c=r&8?l:e[++a];if(r&8&&n.attrs!==null){if(!DU(n.attrs,c,t)){if(_i(r))return!1;o=!0}continue}let u=r&8?"class":l,h=MU(u,i,oC(n),t);if(h===-1){if(_i(r))return!1;o=!0;continue}if(c!==""){let d;h>s?d="":d=i[h+1].toLowerCase();let f=r&8?d:null;if(f&&rC(f,c,0)!==-1||r&2&&c!==d){if(_i(r))return!1;o=!0}}}}return _i(r)||o}function _i(n){return(n&1)===0}function MU(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return NU(e,n)}function aC(n,e,t=!1){for(let r=0;r<e.length;r++)if(IU(n,e[r],t))return!0;return!1}function OU(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function RU(n){for(let e=0;e<n.length;e++){let t=n[e];if(iC(t))return e}return n.length}function NU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function PU(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function mE(n,e){return n?":not("+e.trim()+")":e}function FU(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!_i(o)&&(e+=mE(s,i),i=""),r=o,s=s||!_i(r);t++}return i!==""&&(e+=mE(s,i)),e}function kU(n){return n.map(FU).join(",")}function LU(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!_i(i))break;i=s}r++}return{attrs:e,classes:t}}function kn(n){return Eh(()=>{let e=dC(n),t=W(S({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xi.Emulated,styles:n.styles||Xn,_:null,schemas:n.schemas||null,tView:null,id:""});fC(t);let r=n.dependencies;return t.directiveDefs=_E(r,!1),t.pipeDefs=_E(r,!0),t.id=UU(t),t})}function BU(n){return Os(n)||lC(n)}function VU(n){return n!==null}function Xe(n){return Eh(()=>({type:n.type,bootstrap:n.bootstrap||Xn,declarations:n.declarations||Xn,imports:n.imports||Xn,exports:n.exports||Xn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function gE(n,e){if(n==null)return Gl;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function $t(n){return Eh(()=>{let e=dC(n);return fC(e),e})}function Os(n){return n[aU]||null}function lC(n){return n[lU]||null}function cC(n){return n[cU]||null}function uC(n){let e=Os(n)||lC(n)||cC(n);return e!==null?e.standalone:!1}function hC(n,e){let t=n[uU]||null;if(!t&&e===!0)throw new Error(`Type ${On(n)} does not have '\u0275mod' property.`);return t}function dC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Gl,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Xn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:gE(n.inputs,e),outputs:gE(n.outputs),debugInfo:null}}function fC(n){n.features?.forEach(e=>e(n))}function _E(n,e){if(!n)return null;let t=e?cC:BU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(VU)}function UU(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Ps=0,Re=1,Se=2,Zt=3,vi=4,dr=5,Hl=6,fh=7,Nn=8,$l=9,Rs=10,Ht=11,ph=12,yE=13,Jl=14,Sr=15,Ch=16,kl=17,qi=18,Sm=19,pC=20,yo=21,v0=22,ba=23,Yn=25,mC=1;var wa=7,rm=8,Wl=9,Pn=10,zl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n[n.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",n}(zl||{});function vo(n){return Array.isArray(n)&&typeof n[mC]=="object"}function xi(n){return Array.isArray(n)&&n[mC]===!0}function gC(n){return(n.flags&4)!==0}function Em(n){return n.componentOffset>-1}function Hv(n){return(n.flags&1)===1}function xo(n){return!!n.template}function jU(n){return(n[Se]&512)!==0}function ql(n,e){let t=n.hasOwnProperty(tm);return t?n[tm]:null}var j0=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Zi(){return _C}function _C(n){return n.type.prototype.ngOnChanges&&(n.setInput=HU),GU}Zi.ngInherit=!0;function GU(){let n=vC(this),e=n?.current;if(e){let t=n.previous;if(t===Gl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function HU(n,e,t,r){let i=this.declaredInputs[t],s=vC(n)||$U(n,{previous:Gl,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new j0(l&&l.currentValue,e,a===Gl),n[r]=e}var yC="__ngSimpleChanges__";function vC(n){return n[yC]||null}function $U(n,e){return n[yC]=e}var vE=null;var Wi=function(n,e,t){vE?.(n,e,t)},WU="svg",zU="math",qU=!1;function XU(){return qU}function bi(n){for(;Array.isArray(n);)n=n[Ps];return n}function xC(n,e){return bi(e[n])}function Hr(n,e){return bi(e[n.index])}function $v(n,e){return n.data[e]}function YU(n,e){return n[e]}function To(n,e){let t=e[n];return vo(t)?t:t[Ps]}function ZU(n){return(n[Se]&4)===4}function Wv(n){return(n[Se]&128)===128}function QU(n){return xi(n[Zt])}function mh(n,e){return e==null?null:n[e]}function bC(n){n[kl]=0}function KU(n){n[Se]&1024||(n[Se]|=1024,Wv(n)&&gh(n))}function JU(n,e){for(;n>0;)e=e[Jl],n--;return e}function wC(n){return n[Se]&9216||n[ba]?.dirty}function G0(n){wC(n)?gh(n):n[Se]&64&&(XU()?(n[Se]|=1024,gh(n)):n[Rs].changeDetectionScheduler?.notify())}function gh(n){n[Rs].changeDetectionScheduler?.notify();let e=n[Zt];for(;e!==null&&!(xi(e)&&e[Se]&zl.HasChildViewsToRefresh||vo(e)&&e[Se]&8192);){if(xi(e))e[Se]|=zl.HasChildViewsToRefresh;else if(e[Se]|=8192,!Wv(e))break;e=e[Zt]}}function TC(n,e){if((n[Se]&256)===256)throw new _e(911,!1);n[yo]===null&&(n[yo]=[]),n[yo].push(e)}function e3(n,e){if(n[yo]===null)return;let t=n[yo].indexOf(e);t!==-1&&n[yo].splice(t,1)}var Le={lFrame:PC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function t3(){return Le.lFrame.elementDepthCount}function n3(){Le.lFrame.elementDepthCount++}function r3(){Le.lFrame.elementDepthCount--}function SC(){return Le.bindingsEnabled}function EC(){return Le.skipHydrationRootTNode!==null}function i3(n){return Le.skipHydrationRootTNode===n}function s3(){Le.skipHydrationRootTNode=null}function Ve(){return Le.lFrame.lView}function _n(){return Le.lFrame.tView}function Ti(n){return Le.lFrame.contextLView=n,n[Nn]}function Si(n){return Le.lFrame.contextLView=null,n}function fr(){let n=CC();for(;n!==null&&n.type===64;)n=n.parent;return n}function CC(){return Le.lFrame.currentTNode}function _h(){let n=Le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function bo(n,e){let t=Le.lFrame;t.currentTNode=n,t.isParent=e}function DC(){return Le.lFrame.isParent}function AC(){Le.lFrame.isParent=!1}function o3(){return Le.lFrame.contextLView}function Cm(){let n=Le.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function a3(n){return Le.lFrame.bindingIndex=n}function Dh(){return Le.lFrame.bindingIndex++}function IC(n){let e=Le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function l3(){return Le.lFrame.inI18n}function MC(n){Le.lFrame.inI18n=n}function c3(n,e){let t=Le.lFrame;t.bindingIndex=t.bindingRootIndex=n,H0(e)}function u3(){return Le.lFrame.currentDirectiveIndex}function H0(n){Le.lFrame.currentDirectiveIndex=n}function h3(n){let e=Le.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function OC(){return Le.lFrame.currentQueryIndex}function zv(n){Le.lFrame.currentQueryIndex=n}function d3(n){let e=n[Re];return e.type===2?e.declTNode:e.type===1?n[dr]:null}function RC(n,e,t){if(t&Be.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Be.Host);)if(i=d3(s),i===null||(s=s[Jl],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Le.lFrame=NC();return r.currentTNode=e,r.lView=n,!0}function qv(n){let e=NC(),t=n[Re];Le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function NC(){let n=Le.lFrame,e=n===null?null:n.child;return e===null?PC(n):e}function PC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function FC(){let n=Le.lFrame;return Le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var kC=FC;function Xv(){let n=FC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function f3(n){return(Le.lFrame.contextLView=JU(n,Le.lFrame.contextLView))[Nn]}function So(){return Le.lFrame.selectedIndex}function Ta(n){Le.lFrame.selectedIndex=n}function LC(){let n=Le.lFrame;return $v(n.tView,n.selectedIndex)}function p3(){return Le.lFrame.currentNamespace}var BC=!0;function Yv(){return BC}function Zv(n){BC=n}function m3(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=_C(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Qv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Xp(n,e,t){VC(n,e,3,t)}function Yp(n,e,t,r){(n[Se]&3)===t&&VC(n,e,t,r)}function x0(n,e){let t=n[Se];(t&3)===e&&(t&=16383,t+=1,n[Se]=t)}function VC(n,e,t,r){let i=r!==void 0?n[kl]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[kl]+=65536),(a<s||s==-1)&&(g3(n,t,e,l),n[kl]=(n[kl]&4294901760)+l+2),l++}function xE(n,e){Wi(4,n,e);let t=gn(null);try{e.call(n)}finally{gn(t),Wi(5,n,e)}}function g3(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Se]>>14<n[kl]>>16&&(n[Se]&3)===e&&(n[Se]+=16384,xE(a,s)):xE(a,s)}var jl=-1,Sa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function _3(n){return n instanceof Sa}function y3(n){return(n.flags&8)!==0}function v3(n){return(n.flags&16)!==0}function UC(n){return n!==jl}function im(n){let e=n&32767;return n&32767}function x3(n){return n>>16}function sm(n,e){let t=x3(n),r=e;for(;t>0;)r=r[Jl],t--;return r}var $0=!0;function bE(n){let e=$0;return $0=n,e}var b3=256,jC=b3-1,GC=5,w3=0,zi={};function T3(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ch)&&(r=t[ch]),r==null&&(r=t[ch]=w3++);let i=r&jC,s=1<<i;e.data[n+(i>>GC)]|=s}function om(n,e){let t=HC(n,e);if(t!==-1)return t;let r=e[Re];r.firstCreatePass&&(n.injectorIndex=e.length,b0(r.data,n),b0(e,null),b0(r.blueprint,null));let i=Kv(n,e),s=n.injectorIndex;if(UC(i)){let o=im(i),a=sm(i,e),l=a[Re].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function b0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function HC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Kv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=XC(i),r===null)return jl;if(t++,i=i[Jl],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return jl}function W0(n,e,t){T3(n,e,t)}function S3(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(iC(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function $C(n,e,t){if(t&Be.Optional||n!==void 0)return n;Gv(e,"NodeInjector")}function WC(n,e,t,r){if(t&Be.Optional&&r===void 0&&(r=null),!(t&(Be.Self|Be.Host))){let i=n[$l],s=Gr(void 0);try{return i?i.get(e,r,t&Be.Optional):eC(e,r,t&Be.Optional)}finally{Gr(s)}}return $C(r,e,t)}function zC(n,e,t,r=Be.Default,i){if(n!==null){if(e[Se]&2048&&!(r&Be.Self)){let o=A3(n,e,t,r,zi);if(o!==zi)return o}let s=qC(n,e,t,r,zi);if(s!==zi)return s}return WC(e,t,r,i)}function qC(n,e,t,r,i){let s=C3(t);if(typeof s=="function"){if(!RC(e,n,r))return r&Be.Host?$C(i,t,r):WC(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Be.Optional))Gv(t);else return o}finally{kC()}}else if(typeof s=="number"){let o=null,a=HC(n,e),l=jl,c=r&Be.Host?e[Sr][dr]:null;for((a===-1||r&Be.SkipSelf)&&(l=a===-1?Kv(n,e):e[a+8],l===jl||!TE(r,!1)?a=-1:(o=e[Re],a=im(l),e=sm(l,e)));a!==-1;){let u=e[Re];if(wE(s,a,u.data)){let h=E3(a,e,t,o,r,c);if(h!==zi)return h}l=e[a+8],l!==jl&&TE(r,e[Re].data[a+8]===c)&&wE(s,a,e)?(o=u,a=im(l),e=sm(l,e)):a=-1}}return i}function E3(n,e,t,r,i,s){let o=e[Re],a=o.data[n+8],l=r==null?Em(a)&&$0:r!=o&&(a.type&3)!==0,c=i&Be.Host&&s===a,u=Zp(a,o,t,l,c);return u!==null?Ea(e,o,u,a):zi}function Zp(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,h=r?a:a+u,d=i?a+u:c;for(let f=h;f<d;f++){let p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){let f=o[l];if(f&&xo(f)&&f.type===t)return l}return null}function Ea(n,e,t,r){let i=n[t],s=e.data;if(_3(i)){let o=i;o.resolving&&dU(hU(s[t]));let a=bE(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Gr(o.injectImpl):null,u=RC(n,r,Be.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&m3(t,s[t],e)}finally{c!==null&&Gr(c),bE(a),o.resolving=!1,kC()}}return i}function C3(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ch)?n[ch]:void 0;return typeof e=="number"?e>=0?e&jC:D3:e}function wE(n,e,t){let r=1<<n;return!!(t[e+(n>>GC)]&r)}function TE(n,e){return!(n&Be.Self)&&!(n&Be.Host&&e)}var xa=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return zC(this._tNode,this._lView,e,Tm(r),t)}};function D3(){return new xa(fr(),Ve())}function ec(n){return Eh(()=>{let e=n.prototype.constructor,t=e[tm]||z0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[tm]||z0(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function z0(n){return zE(n)?()=>{let e=z0(qn(n));return e&&e()}:ql(n)}function A3(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Se]&2048&&!(o[Se]&512);){let a=qC(s,o,t,r|Be.Self,zi);if(a!==zi)return a;let l=s.parent;if(!l){let c=o[pC];if(c){let u=c.get(t,zi,r);if(u!==zi)return u}l=XC(o),o=o[Jl]}s=l}return i}function XC(n){let e=n[Re],t=e.type;return t===2?e.declTNode:t===1?n[dr]:null}function Dm(n){return S3(fr(),n)}var Hp="__parameters__";function I3(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function YC(n,e,t){return Eh(()=>{let r=I3(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,c,u){let h=l.hasOwnProperty(Hp)?l[Hp]:Object.defineProperty(l,Hp,{value:[]})[Hp];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function M3(n){return typeof n=="function"}function O3(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function R3(n){return n.flat(Number.POSITIVE_INFINITY)}function Jv(n,e){n.forEach(t=>Array.isArray(t)?Jv(t,e):e(t))}function ZC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function am(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function QC(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function N3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function ex(n,e,t){let r=Ah(n,e);return r>=0?n[r|1]=t:(r=~r,N3(n,r,e,t)),r}function w0(n,e){let t=Ah(n,e);if(t>=0)return n[t|1]}function Ah(n,e){return P3(n,e,1)}function P3(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Am=tC(YC("Optional"),8);var tx=tC(YC("SkipSelf"),4);var Xl=new ce("ENVIRONMENT_INITIALIZER"),KC=new ce("INJECTOR",-1),JC=new ce("INJECTOR_DEF_TYPES"),lm=class{get(e,t=hh){if(t===hh){let r=new Error(`NullInjectorError: No provider for ${On(e)}!`);throw r.name="NullInjectorError",r}return t}};function tc(n){return{\u0275providers:n}}function nx(...n){return{\u0275providers:eD(!0,n),\u0275fromNgModule:!0}}function eD(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Jv(e,o=>{let a=o;q0(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tD(i,s),t}function tD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rx(i,s=>{e(s,r)})}}function q0(n,e,t,r){if(n=qn(n),!n)return!1;let i=null,s=hE(n),o=!s&&Os(n);if(!s&&!o){let l=n.ngModule;if(s=hE(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)q0(c,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{Jv(s.imports,u=>{q0(u,e,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&tD(c,e)}if(!a){let c=ql(i)||(()=>new i);e({provide:i,useFactory:c,deps:Xn},i),e({provide:JC,useValue:i,multi:!0},i),e({provide:Xl,useValue:()=>re(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=n;rx(l,u=>{e(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function rx(n,e){for(let t of n)qE(t)&&(t=t.\u0275providers),Array.isArray(t)?rx(t,e):e(t)}var F3=gt({provide:String,useValue:gt});function nD(n){return n!==null&&typeof n=="object"&&F3 in n}function k3(n){return!!(n&&n.useExisting)}function L3(n){return!!(n&&n.useFactory)}function Yl(n){return typeof n=="function"}function B3(n){return!!n.useClass}var Im=new ce("Set Injector scope."),Qp={},V3={},T0;function Mm(){return T0===void 0&&(T0=new lm),T0}var sn=class{},yh=class extends sn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Y0(e,o=>this.processProvider(o)),this.records.set(KC,Ll(void 0,this)),i.has("environment")&&this.records.set(sn,Ll(void 0,this));let s=this.records.get(Im);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(JC,Xn,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=_o(this),r=Gr(void 0),i;try{return e()}finally{_o(t),Gr(r)}}get(e,t=hh,r=Be.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(cE))return e[cE](this);r=Tm(r);let i,s=_o(this),o=Gr(void 0);try{if(!(r&Be.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=$3(e)&&wm(e);c&&this.injectableDefInScope(c)?l=Ll(X0(e),Qp):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&Be.Self?Mm():this.parent;return t=r&Be.Optional&&t===hh?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[nm]=a[nm]||[]).unshift(On(e)),s)throw a;return SU(a,e,"R3InjectorError",this.source)}else throw a}finally{Gr(o),_o(s)}}resolveInjectorInitializers(){let e=_o(this),t=Gr(void 0),r;try{let i=this.get(Xl,Xn,Be.Self);for(let s of i)s()}finally{_o(e),Gr(t)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(On(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(e){e=qn(e);let t=Yl(e)?e:qn(e&&e.provide),r=j3(e);if(!Yl(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ll(void 0,Qp,!0),i.factory=()=>V0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}else{let i=this.records.get(t)}this.records.set(t,r)}hydrate(e,t){return t.value===Qp&&(t.value=V3,t.value=t.factory()),typeof t.value=="object"&&t.value&&H3(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;let t=qn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function X0(n){let e=wm(n),t=e!==null?e.factory:ql(n);if(t!==null)return t;if(n instanceof ce)throw new _e(204,!1);if(n instanceof Function)return U3(n);throw new _e(204,!1)}function U3(n){let e=n.length;if(e>0){let r=QC(e,"?");throw new _e(204,!1)}let t=mU(n);return t!==null?()=>t.factory(n):()=>new n}function j3(n){if(nD(n))return Ll(void 0,n.useValue);{let e=rD(n);return Ll(e,Qp)}}function rD(n,e,t){let r;if(Yl(n)){let i=qn(n);return ql(i)||X0(i)}else if(nD(n))r=()=>qn(n.useValue);else if(L3(n))r=()=>n.useFactory(...V0(n.deps||[]));else if(k3(n))r=()=>re(qn(n.useExisting));else{let i=qn(n&&(n.useClass||n.provide));if(G3(n))r=()=>new i(...V0(n.deps));else return ql(i)||X0(i)}return r}function Ll(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function G3(n){return!!n.deps}function H3(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function $3(n){return typeof n=="function"||typeof n=="object"&&n instanceof ce}function Y0(n,e){for(let t of n)Array.isArray(t)?Y0(t,e):t&&qE(t)?Y0(t.\u0275providers,e):e(t)}function Qi(n,e){n instanceof yh&&n.assertNotDestroyed();let t,r=_o(n),i=Gr(void 0);try{return e()}finally{_o(r),Gr(i)}}function W3(n){if(!JE()&&!bU())throw new _e(-203,!1)}function SE(n,e=null,t=null,r){let i=iD(n,e,t,r);return i.resolveInjectorInitializers(),i}function iD(n,e=null,t=null,r,i=new Set){let s=[t||Xn,nx(n)];return r=r||(typeof n=="object"?void 0:On(n)),new yh(s,e||Mm(),r||null,i)}var pr=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return SE({name:""},i,r,"");{let s=r.name??"";return SE({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=hh,e.NULL=new lm,e.\u0275prov=ee({token:e,providedIn:"any",factory:()=>re(KC)}),e.__NG_ELEMENT_ID__=-1;let n=e;return n})();var Z0;function sD(n){Z0=n}function oD(){if(Z0!==void 0)return Z0;if(typeof document<"u")return document;throw new _e(210,!1)}var Om=new ce("AppId",{providedIn:"root",factory:()=>z3}),z3="ng",ix=new ce("Platform Initializer"),Ki=new ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var sx=new ce("CSP nonce",{providedIn:"root",factory:()=>oD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function aD(n){return n.ownerDocument.defaultView}function lD(n){return n instanceof Function?n():n}function q3(n){return(n??$(pr)).get(Ki)==="browser"}function cD(n){return(n.flags&128)===128}var Ns=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ns||{});var uD=new Map,X3=0;function Y3(){return X3++}function Z3(n){uD.set(n[Sm],n)}function Q3(n){uD.delete(n[Sm])}var EE="__ngContext__";function Ca(n,e){vo(e)?(n[EE]=e[Sm],Z3(e)):n[EE]=e}var Q0;function ox(n,e){return Q0(n,e)}function K3(n){Q0===void 0&&(Q0=n())}function ax(n){let e=n[Zt];return xi(e)?e[Zt]:e}function hD(n){return fD(n[ph])}function dD(n){return fD(n[vi])}function fD(n){for(;n!==null&&!xi(n);)n=n[vi];return n}function Bl(n,e,t,r,i){if(r!=null){let s,o=!1;xi(r)?s=r:vo(r)&&(o=!0,r=r[Ps]);let a=bi(r);n===0&&t!==null?i==null?vD(e,t,a):Zl(e,t,a,i||null,!0):n===1&&t!==null?Zl(e,t,a,i||null,!0):n===2?uj(e,a,o):n===3&&e.destroyNode(a),s!=null&&dj(e,n,s,t,i)}}function pD(n,e){return n.createText(e)}function J3(n,e,t){n.setValue(e,t)}function mD(n,e,t){return n.createElement(e,t)}function ej(n,e){let t=e[Ht];Ih(n,e,t,2,null,null),e[Ps]=null,e[dr]=null}function tj(n,e,t,r,i,s){r[Ps]=i,r[dr]=e,Ih(n,r,t,1,i,s)}function nj(n,e){Ih(n,e,e[Ht],2,null,null)}function rj(n){let e=n[ph];if(!e)return S0(n[Re],n);for(;e;){let t=null;if(vo(e))t=e[ph];else{let r=e[Pn];r&&(t=r)}if(!t){for(;e&&!e[vi]&&e!==n;)vo(e)&&S0(e[Re],e),e=e[Zt];e===null&&(e=n),vo(e)&&S0(e[Re],e),t=e&&e[vi]}e=t}}function ij(n,e,t,r){let i=Pn+r,s=t.length;r>0&&(t[i-1][vi]=e),r<s-Pn?(e[vi]=t[i],ZC(t,Pn+r,e)):(t.push(e),e[vi]=null),e[Zt]=t;let o=e[Ch];o!==null&&t!==o&&sj(o,e);let a=e[qi];a!==null&&a.insertView(n),G0(e),e[Se]|=128}function sj(n,e){let t=n[Wl],i=e[Zt][Zt][Sr];e[Sr]!==i&&(n[Se]|=zl.HasTransplantedViews),t===null?n[Wl]=[e]:t.push(e)}function gD(n,e){let t=n[Wl],r=t.indexOf(e),i=e[Zt];t.splice(r,1)}function vh(n,e){if(n.length<=Pn)return;let t=Pn+e,r=n[t];if(r){let i=r[Ch];i!==null&&i!==n&&gD(i,r),e>0&&(n[t-1][vi]=r[vi]);let s=am(n,Pn+e);ej(r[Re],r);let o=s[qi];o!==null&&o.detachView(s[Re]),r[Zt]=null,r[vi]=null,r[Se]&=-129}return r}function Rm(n,e){if(!(e[Se]&256)){let t=e[Ht];t.destroyNode&&Ih(n,e,t,3,null,null),rj(e)}}function S0(n,e){if(!(e[Se]&256)){e[Se]&=-129,e[Se]|=256,e[ba]&&kS(e[ba]),aj(n,e),oj(n,e),e[Re].type===1&&e[Ht].destroy();let t=e[Ch];if(t!==null&&xi(e[Zt])){t!==e[Zt]&&gD(t,e);let r=e[qi];r!==null&&r.detachView(n)}Q3(e)}}function oj(n,e){let t=n.cleanup,r=e[fh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[fh]=null);let i=e[yo];if(i!==null){e[yo]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function aj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Sa)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Wi(4,a,l);try{l.call(a)}finally{Wi(5,a,l)}}else{Wi(4,i,s);try{s.call(i)}finally{Wi(5,i,s)}}}}}function _D(n,e,t){return yD(n,e.parent,t)}function yD(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Ps];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Xi.None||s===Xi.Emulated)return null}return Hr(r,t)}}function Zl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function vD(n,e,t){n.appendChild(e,t)}function CE(n,e,t,r,i){r!==null?Zl(n,e,t,r,i):vD(n,e,t)}function lj(n,e,t,r){n.removeChild(e,t,r)}function lx(n,e){return n.parentNode(e)}function cj(n,e){return n.nextSibling(e)}function xD(n,e,t){return wD(n,e,t)}function bD(n,e,t){return n.type&40?Hr(n,t):null}var wD=bD,K0;function TD(n,e){wD=n,K0=e}function cx(n,e,t,r){let i=_D(n,r,e),s=e[Ht],o=r.parent||e[dr],a=xD(o,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)CE(s,i,t[l],a,!1);else CE(s,i,t,a,!1);K0!==void 0&&K0(s,r,e,t,i)}function Kp(n,e){if(e!==null){let t=e.type;if(t&3)return Hr(e,n);if(t&4)return J0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Kp(n,r);{let i=n[e.index];return xi(i)?J0(-1,i):bi(i)}}else{if(t&32)return ox(e,n)()||bi(n[e.index]);{let r=SD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ax(n[Sr]);return Kp(i,r)}else return Kp(n,e.next)}}}return null}function SD(n,e){if(e!==null){let r=n[Sr][dr],i=e.projection;return r.projection[i]}return null}function J0(n,e){let t=Pn+n+1;if(t<e.length){let r=e[t],i=r[Re].firstChild;if(i!==null)return Kp(r,i)}return e[wa]}function uj(n,e,t){let r=lx(n,e);r&&lj(n,r,e,t)}function ux(n,e,t,r,i,s,o){for(;t!=null;){let a=r[t.index],l=t.type;if(o&&e===0&&(a&&Ca(bi(a),r),t.flags|=2),(t.flags&32)!==32)if(l&8)ux(n,e,t.child,r,i,s,!1),Bl(e,n,i,a,s);else if(l&32){let c=ox(t,r),u;for(;u=c();)Bl(e,n,i,u,s);Bl(e,n,i,a,s)}else l&16?ED(n,e,r,t,i,s):Bl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Ih(n,e,t,r,i,s){ux(t,r,n.firstChild,e,i,s,!1)}function hj(n,e,t){let r=e[Ht],i=_D(n,t,e),s=t.parent||e[dr],o=xD(s,t,e);ED(r,0,e,t,i,o)}function ED(n,e,t,r,i,s){let o=t[Sr],l=o[dr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Bl(e,n,i,u,s)}else{let c=l,u=o[Zt];cD(r)&&(c.flags|=128),ux(n,e,c,u,i,s,!0)}}function dj(n,e,t,r,i){let s=t[wa],o=bi(t);s!==o&&Bl(e,n,r,s,i);for(let a=Pn;a<t.length;a++){let l=t[a];Ih(l[Re],l,n,e,r,s)}}function fj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Ns.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ns.Important),n.setStyle(t,r,i,s))}}function pj(n,e,t){n.setAttribute(e,"style",t)}function CD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function DD(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&U0(n,e,r),i!==null&&CD(n,e,i),s!==null&&pj(n,e,s)}var $p;function mj(){if($p===void 0&&($p=null,Rn.trustedTypes))try{$p=Rn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return $p}function hx(n){return mj()?.createHTML(n)||n}var Wp;function gj(){if(Wp===void 0&&(Wp=null,Rn.trustedTypes))try{Wp=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wp}function DE(n){return gj()?.createScriptURL(n)||n}var cm=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${XE})`}};function nc(n){return n instanceof cm?n.changingThisBreaksApplicationSecurity:n}function dx(n,e){let t=_j(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${XE})`)}return t===e}function _j(n){return n instanceof cm&&n.getTypeName()||null}function yj(n){let e=new tv(n);return vj()?new ev(e):e}var ev=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(hx(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}},tv=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=hx(e),t}};function vj(){try{return!!new window.DOMParser().parseFromString(hx(""),"text/html")}catch{return!1}}var xj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fx(n){return n=String(n),n.match(xj)?n:"unsafe:"+n}function Eo(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Mh(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var bj=Eo("area,br,col,hr,img,wbr"),AD=Eo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ID=Eo("rp,rt"),wj=Mh(ID,AD),Tj=Mh(AD,Eo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Sj=Mh(ID,Eo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ej=Mh(bj,Tj,Sj,wj),MD=Eo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cj=Eo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Dj=Eo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Aj=Mh(MD,Cj,Dj);function Ij(n){return"content"in n&&Mj(n)?n.content:null}function Mj(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Nm=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Nm||{});function Oj(n){let e=RD();return e?e.sanitize(Nm.URL,n)||"":dx(n,"URL")?nc(n):fx(bm(n))}function Rj(n){let e=RD();if(e)return DE(e.sanitize(Nm.RESOURCE_URL,n)||"");if(dx(n,"ResourceURL"))return DE(nc(n));throw new _e(904,!1)}function Nj(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Rj:Oj}function OD(n,e,t){return Nj(e,t)(n)}function RD(){let n=Ve();return n&&n[Rs].sanitizer}var nv=class{};var Pj="h",Fj="b";var kj=(n,e,t)=>null;function px(n,e,t=!1){return kj(n,e,t)}var rv=class{},um=class{};function Lj(n){let e=Error(`No component factory found for ${On(n)}.`);return e[Bj]=n,e}var Bj="ngComponent";var iv=class{resolveComponentFactory(e){throw Lj(e)}},Pm=(()=>{let e=class e{};e.NULL=new iv;let n=e;return n})();function Vj(){return rc(fr(),Ve())}function rc(n,e){return new Ln(Hr(n,e))}var Ln=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Vj;let n=e;return n})();function Uj(n){return n instanceof Ln?n.nativeElement:n}var xh=class{},Ma=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>jj();let n=e;return n})();function jj(){let n=Ve(),e=fr(),t=To(e.index,n);return(vo(t)?t:n)[Ht]}var Gj=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>null});let n=e;return n})(),E0={};function ND(n){return $j(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Hj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function $j(n){return n!==null&&(typeof n=="function"||typeof n=="object")}var sv=class{constructor(){}supports(e){return ND(e)}create(e){return new ov(e)}},Wj=(n,e)=>e,ov=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Wj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<AE(r,i,s)?t:r,a=AE(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,u=l-i;if(c!=u){for(let d=0;d<c;d++){let f=d<s.length?s[d]:s[d]=0,p=f+d;u<=p&&p<c&&(s[d]=f+1)}let h=o.previousIndex;s[h]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ND(e))throw new _e(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Hj(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new av(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new hm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},av=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},lv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},hm=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new lv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function AE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function IE(){return new mx([new sv])}var mx=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||IE()),deps:[[e,new tx,new Am]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new _e(901,!1)}};e.\u0275prov=ee({token:e,providedIn:"root",factory:IE});let n=e;return n})();function dm(n,e,t,r,i=!1){for(;t!==null;){let s=e[t.index];s!==null&&r.push(bi(s)),xi(s)&&zj(s,r);let o=t.type;if(o&8)dm(n,e,t.child,r);else if(o&32){let a=ox(t,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=SD(e,t);if(Array.isArray(a))r.push(...a);else{let l=ax(e[Sr]);dm(l[Re],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function zj(n,e){for(let t=Pn;t<n.length;t++){let r=n[t],i=r[Re].firstChild;i!==null&&dm(r[Re],r,i,e)}n[wa]!==n[Ps]&&e.push(n[wa])}var PD=[];function qj(n){return n[ba]??Xj(n)}function Xj(n){let e=PD.pop()??Object.create(Zj);return e.lView=n,e}function Yj(n){n.lView[ba]!==n&&(n.lView=null,PD.push(n))}var Zj=W(S({},NS),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{gh(n.lView)},consumerOnSignalRead(){this.lView[ba]=this}}),Qj="ngOriginalError";function C0(n){return n[Qj]}var Yi=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&C0(e);for(;t&&C0(t);)t=C0(t);return t||null}},FD=new ce("",{providedIn:"root",factory:()=>$(Yi).handleError.bind(void 0)});var kD=!1,Kj=new ce("",{providedIn:"root",factory:()=>kD});var Ji={};function Ae(n){LD(_n(),Ve(),So()+n,!1)}function LD(n,e,t,r){if(!r)if((e[Se]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Xp(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Yp(e,s,0,t)}Ta(t)}function Pe(n,e=Be.Default){let t=Ve();if(t===null)return re(n,e);let r=fr();return zC(r,t,qn(n),e)}function BD(){let n="invalid";throw new Error(n)}function Jj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ta(~i);else{let s=i,o=t[++r],a=t[++r];c3(o,s);let l=e[s];a(2,l)}}}finally{Ta(-1)}}function Fm(n,e,t,r,i,s,o,a,l,c,u){let h=e.blueprint.slice();return h[Ps]=i,h[Se]=r|4|128|8|64,(c!==null||n&&n[Se]&2048)&&(h[Se]|=2048),bC(h),h[Zt]=h[Jl]=n,h[Nn]=t,h[Rs]=o||n&&n[Rs],h[Ht]=a||n&&n[Ht],h[$l]=l||n&&n[$l]||null,h[dr]=s,h[Sm]=Y3(),h[Hl]=u,h[pC]=c,h[Sr]=e.type==2?n[Sr]:h,h}function Oh(n,e,t,r,i){let s=n.data[e];if(s===null)s=gx(n,e,t,r,i),l3()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=_h();s.injectorIndex=o===null?-1:o.injectorIndex}return bo(s,!0),s}function gx(n,e,t,r,i){let s=CC(),o=DC(),a=o?s:s&&s.parent,l=n.data[e]=sG(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function Rh(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function VD(n,e,t,r,i){let s=So(),o=r&2;try{Ta(-1),o&&e.length>Yn&&LD(n,e,Yn,!1),Wi(o?2:0,i),t(r,i)}finally{Ta(s),Wi(o?3:1,i)}}function UD(n,e,t){if(gC(e)){let r=gn(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{gn(r)}}}function jD(n,e,t){SC()&&(dG(n,e,t,Hr(t,e)),(t.flags&64)===64&&zD(n,e,t))}function GD(n,e,t=Hr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function HD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=_x(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function _x(n,e,t,r,i,s,o,a,l,c,u){let h=Yn+r,d=h+i,f=eG(h,d),p=typeof c=="function"?c():c;return f[Re]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function eG(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ji);return t}function tG(n,e,t,r){let s=r.get(Kj,kD)||t===Xi.ShadowDom,o=n.selectRootElement(e,s);return nG(o),o}function nG(n){rG(n)}var rG=n=>null;function iG(n,e,t,r){let i=ZD(e);i.push(t),n.firstCreatePass&&QD(n).push(r,i.length-1)}function sG(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return EC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ME(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=t===null?{}:t;let s=n[i];r===null?OE(t,e,i,s):r.hasOwnProperty(i)&&OE(t,e,r[i],s)}return t}function OE(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function oG(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let h=s[u],d=t?t.get(h):null,f=d?d.inputs:null,p=d?d.outputs:null;l=ME(h.inputs,u,l,f),c=ME(h.outputs,u,c,p);let m=l!==null&&o!==null&&!oC(e)?TG(l,u,o):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function aG(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function lG(n,e,t,r,i,s,o,a){let l=Hr(e,t),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(yx(n,t,u,r,i),Em(e)&&cG(t,e.index)):e.type&3?(r=aG(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function cG(n,e){let t=To(e,n);t[Se]&16||(t[Se]|=64)}function $D(n,e,t,r){if(SC()){let i=r===null?null:{"":-1},s=pG(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&WD(n,e,t,o,i,a),i&&mG(t,r,i)}t.mergedAttrs=dh(t.mergedAttrs,t.attrs)}function WD(n,e,t,r,i,s){for(let c=0;c<r.length;c++)W0(om(t,e),n,r[c].type);_G(t,n.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Rh(n,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];t.mergedAttrs=dh(t.mergedAttrs,u.hostAttrs),yG(n,t,e,l,u),gG(l,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}oG(n,t,s)}function uG(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;hG(o)!=a&&o.push(a),o.push(t,r,s)}}function hG(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function dG(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Em(t)&&vG(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||om(t,e),Ca(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let l=n.data[a],c=Ea(e,n,a,t);if(Ca(c,e),o!==null&&wG(e,a-i,c,l,t,o),xo(l)){let u=To(t.index,e);u[Nn]=Ea(e,n,a,t)}}}function zD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=u3();try{Ta(s);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];H0(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&fG(l,c)}}finally{Ta(-1),H0(o)}}function fG(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function pG(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(aC(e,o.selectors,!1))if(r||(r=[]),xo(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;cv(n,e,l)}else r.unshift(o),cv(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function cv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function mG(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new _e(-301,!1);r.push(e[i],s)}}}function gG(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xo(e)&&(t[""]=n)}}function _G(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function yG(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ql(i.type,!0)),o=new Sa(s,xo(i),Pe);n.blueprint[r]=o,t[r]=o,uG(n,e,r,Rh(n,t,i.hostVars,Ji),i)}function vG(n,e,t){let r=Hr(e,n),i=HD(t),s=n[Rs].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=km(n,Fm(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function xG(n,e,t,r,i,s){let o=Hr(n,e);bG(e[Ht],o,s,n.value,t,r,i)}function bG(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?bm(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function wG(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++];qD(r,t,l,c,u)}}function qD(n,e,t,r,i){let s=gn(null);try{let o=n.inputTransforms;o!==null&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),n.setInput!==null?n.setInput(e,i,t,r):e[r]=i}finally{gn(s)}}function TG(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}return r}function XD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function YD(n,e){let t=n.contentQueries;if(t!==null){let r=gn(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];zv(s),a.contentQueries(2,e[o],o)}}}finally{gn(r)}}}function km(n,e){return n[ph]?n[yE][vi]=e:n[ph]=e,n[yE]=e,e}function uv(n,e,t){zv(0);let r=gn(null);try{e(n,t)}finally{gn(r)}}function ZD(n){return n[fh]||(n[fh]=[])}function QD(n){return n.cleanup||(n.cleanup=[])}function KD(n,e){let t=n[$l],r=t?t.get(Yi,null):null;r&&r.handleError(e)}function yx(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],l=e[o],c=n.data[o];qD(c,l,r,a,i)}}function SG(n,e,t){let r=xC(e,n);J3(n[Ht],r,t)}var EG=100;function CG(n,e=!0){let t=n[Rs],r=t.rendererFactory,i=t.afterRenderEventManager,s=!1;s||(r.begin?.(),i?.begin());try{DG(n)}catch(o){throw e&&KD(n,o),o}finally{s||(r.end?.(),t.inlineEffectRunner?.flush(),i?.end())}}function DG(n){hv(n,0);let e=0;for(;wC(n);){if(e===EG)throw new _e(103,!1);e++,hv(n,1)}}function AG(n,e,t,r){let i=e[Se];if((i&256)===256)return;let s=!1;!s&&e[Rs].inlineEffectRunner?.flush(),qv(e);let o=null,a=null;!s&&IG(n)&&(a=qj(e),o=PS(a));try{bC(e),a3(n.bindingStartIndex),t!==null&&VD(n,e,t,2,r);let l=(i&3)===3;if(!s)if(l){let h=n.preOrderCheckHooks;h!==null&&Xp(e,h,null)}else{let h=n.preOrderHooks;h!==null&&Yp(e,h,0,null),x0(e,0)}if(MG(e),JD(e,0),n.contentQueries!==null&&YD(n,e),!s)if(l){let h=n.contentCheckHooks;h!==null&&Xp(e,h)}else{let h=n.contentHooks;h!==null&&Yp(e,h,1),x0(e,1)}Jj(n,e);let c=n.components;c!==null&&tA(e,c,0);let u=n.viewQuery;if(u!==null&&uv(2,u,r),!s)if(l){let h=n.viewCheckHooks;h!==null&&Xp(e,h)}else{let h=n.viewHooks;h!==null&&Yp(e,h,2),x0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[v0]){for(let h of e[v0])h();e[v0]=null}s||(e[Se]&=-73)}catch(l){throw gh(e),l}finally{a!==null&&(FS(a,o),Yj(a)),Xv()}}function IG(n){return n.type!==2}function JD(n,e){for(let t=hD(n);t!==null;t=dD(t)){t[Se]&=~zl.HasChildViewsToRefresh;for(let r=Pn;r<t.length;r++){let i=t[r];eA(i,e)}}}function MG(n){for(let e=hD(n);e!==null;e=dD(e)){if(!(e[Se]&zl.HasTransplantedViews))continue;let t=e[Wl];for(let r=0;r<t.length;r++){let i=t[r],s=i[Zt];KU(i)}}}function OG(n,e,t){let r=To(e,n);eA(r,t)}function eA(n,e){Wv(n)&&hv(n,e)}function hv(n,e){let r=n[Re],i=n[Se],s=n[ba],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ky(s)),s&&(s.dirty=!1),n[Se]&=-9217,o)AG(r,n,r.template,n[Nn]);else if(i&8192){JD(n,1);let a=r.components;a!==null&&tA(n,a,1)}}function tA(n,e,t){for(let r=0;r<e.length;r++)OG(n,e[r],t)}function vx(n){for(n[Rs].changeDetectionScheduler?.notify();n;){n[Se]|=64;let e=ax(n);if(jU(n)&&!e)return n;n=e}return null}var Da=class{get rootNodes(){let e=this._lView,t=e[Re];return dm(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return(this._lView[Se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Zt];if(xi(e)){let t=e[rm],r=t?t.indexOf(this):-1;r>-1&&(vh(e,r),am(t,r))}this._attachedToViewContainer=!1}Rm(this._lView[Re],this._lView)}onDestroy(e){TC(this._lView,e)}markForCheck(){vx(this._cdRefInjectingView||this._lView)}detach(){this._lView[Se]&=-129}reattach(){G0(this._lView),this._lView[Se]|=128}detectChanges(){this._lView[Se]|=1024,CG(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,nj(this._lView[Re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=e,G0(this._lView)}},Co=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=RG;let n=e;return n})();function RG(n){return NG(fr(),Ve(),(n&16)===16)}function NG(n,e,t){if(Em(n)&&!t){let r=To(n.index,e);return new Da(r,r)}else if(n.type&47){let r=e[Sr];return new Da(r,e)}return null}var xx=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=PG,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),dv=class extends xx{constructor(e){super(),this._lView=e}onDestroy(e){return TC(this._lView,e),()=>e3(this._lView,e)}};function PG(){return new dv(Ve())}var RE=new Set;function ic(n){RE.has(n)||(RE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var fv=class extends St{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=D0(s),i&&(i=D0(i)),o&&(o=D0(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof jt&&e.add(a),a}};function D0(n){return e=>{setTimeout(n,void 0,e)}}var Nt=fv;function NE(...n){}function FG(){let n=typeof Rn.requestAnimationFrame=="function",e=Rn[n?"requestAnimationFrame":"setTimeout"],t=Rn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var ze=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nt(!1),this.onMicrotaskEmpty=new Nt(!1),this.onStable=new Nt(!1),this.onError=new Nt(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=FG().nativeRequestAnimationFrame,BG(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new _e(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,kG,NE,NE);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},kG={};function bx(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function LG(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Rn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,pv(n),n.isCheckStableRunning=!0,bx(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),pv(n))}function BG(n){let e=()=>{LG(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(VG(a))return t.invokeTask(i,s,o,a);try{return PE(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),FE(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return PE(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),FE(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,pv(n),bx(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function pv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function PE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function FE(n){n._nesting--,bx(n)}function VG(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var Vl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Vl||{}),UG={destroy(){}};function wx(n,e){!e&&W3(wx);let t=e?.injector??$(pr);if(!q3(t))return UG;ic("NgAfterNextRender");let r=t.get(nA),i=r.handler??=new gv,s=e?.phase??Vl.MixedReadWrite,o=()=>{i.unregister(l),a()},a=t.get(xx).onDestroy(o),l=new mv(t,s,()=>{o(),n()});return i.register(l),{destroy:o}}var mv=class{constructor(e,t,r){this.phase=t,this.callbackFn=r,this.zone=e.get(ze),this.errorHandler=e.get(Yi,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},gv=class{constructor(){this.executingCallbacks=!1,this.buckets={[Vl.EarlyRead]:new Set,[Vl.Write]:new Set,[Vl.MixedReadWrite]:new Set,[Vl.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new _e(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},nA=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function jG(n,e){let t=To(e,n),r=t[Re];GG(r,t);let i=t[Ps];i!==null&&t[Hl]===null&&(t[Hl]=px(i,t[$l])),Tx(r,t,t[Nn])}function GG(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Tx(n,e,t){qv(e);try{let r=n.viewQuery;r!==null&&uv(1,r,t);let i=n.template;i!==null&&VD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&YD(n,e),n.staticViewQueries&&uv(2,n.viewQuery,t);let s=n.components;s!==null&&HG(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Se]&=-5,Xv()}}function HG(n,e){for(let t=0;t<e.length;t++)jG(n,e[t])}function _v(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=k0(i,a);else if(s==2){let l=a,c=e[++o];r=k0(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var fm=class extends Pm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Os(e);return new Aa(t,this.ngModule)}};function kE(n){let e=[];for(let t in n)if(n.hasOwnProperty(t)){let r=n[t];e.push({propName:r,templateName:t})}return e}function $G(n){let e=n.toLowerCase();return e==="svg"?WU:e==="math"?zU:null}var yv=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Tm(r);let i=this.injector.get(e,E0,r);return i!==E0||t===E0?i:this.parentInjector.get(e,t,r)}},Aa=class extends um{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=kE(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return kE(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=kU(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){i=i||this.ngModule;let s=i instanceof sn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new yv(e,s):e,a=o.get(xh,null);if(a===null)throw new _e(407,!1);let l=o.get(Gj,null),c=o.get(nA,null),u=o.get(nv,null),h={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:u},d=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?tG(d,r,this.componentDef.encapsulation,o):mD(d,f,$G(f)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;p!==null&&(g=px(p,o,!0));let _=_x(0,null,null,1,0,null,null,null,null,null,null),v=Fm(null,_,null,m,null,null,h,d,o,null,g);qv(v);let y,x;try{let T=this.componentDef,C,b=null;T.findHostDirectiveDefs?(C=[],b=new Map,T.findHostDirectiveDefs(T,C,b),C.push(T)):C=[T];let w=WG(v,p),P=zG(w,p,T,C,v,h,d);x=$v(_,Yn),p&&YG(d,T,p,r),t!==void 0&&ZG(x,this.ngContentSelectors,t),y=XG(P,T,C,b,v,[QG]),Tx(_,v,null)}finally{Xv()}return new vv(this.componentType,y,rc(x,v),v,x)}},vv=class extends rv{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Da(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;yx(s[Re],s,i,e,t),this.previousInputValues.set(e,t);let o=To(this._tNode.index,s);vx(o)}}get injector(){return new xa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function WG(n,e){let t=n[Re],r=Yn;return n[r]=e,Oh(t,r,2,"#host",null)}function zG(n,e,t,r,i,s,o){let a=i[Re];qG(r,n,e,o);let l=null;e!==null&&(l=px(e,i[$l]));let c=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let h=Fm(i,HD(t),null,u,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&cv(a,n,r.length-1),km(i,h),i[n.index]=h}function qG(n,e,t,r){for(let i of n)e.mergedAttrs=dh(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(_v(e,e.mergedAttrs,!0),t!==null&&DD(r,t,e))}function XG(n,e,t,r,i,s){let o=fr(),a=i[Re],l=Hr(o,i);WD(a,i,o,t,null,r);for(let u=0;u<t.length;u++){let h=o.directiveStart+u,d=Ea(i,a,h,o);Ca(d,i)}zD(a,i,o),l&&Ca(l,i);let c=Ea(i,a,o.directiveStart+o.componentOffset,o);if(n[Nn]=i[Nn]=c,s!==null)for(let u of s)u(c,e);return UD(a,o,n),c}function YG(n,e,t,r){if(r)U0(n,t,["ng-version","17.0.8"]);else{let{attrs:i,classes:s}=LU(e.selectors[0]);i&&U0(n,t,i),s&&s.length>0&&CD(n,t,s.join(" "))}}function ZG(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function QG(){let n=fr();Qv(Ve()[Re],n)}function KG(n){return Object.getPrototypeOf(n.prototype).constructor}function Oa(n){let e=KG(n.type),t=!0,r=[n];for(;e;){let i;if(xo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new _e(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=zp(n.inputs),o.inputTransforms=zp(n.inputTransforms),o.declaredInputs=zp(n.declaredInputs),o.outputs=zp(n.outputs);let a=i.hostBindings;a&&nH(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&eH(n,l),c&&tH(n,c),Gp(n.inputs,i.inputs),Gp(n.declaredInputs,i.declaredInputs),Gp(n.outputs,i.outputs),i.inputTransforms!==null&&(o.inputTransforms===null&&(o.inputTransforms={}),Gp(o.inputTransforms,i.inputTransforms)),xo(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Oa&&(t=!1)}}e=Object.getPrototypeOf(e)}JG(r)}function JG(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=dh(i.hostAttrs,t=dh(t,i.hostAttrs))}}function zp(n){return n===Gl?{}:n===Xn?[]:n}function eH(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function tH(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function nH(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Sx(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Lm(n,e,t){return n[e]=t}function rH(n,e){return n[e]}function wi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function rA(n,e,t,r){let i=wi(n,e,t);return wi(n,e+1,r)||i}function iH(n,e,t,r,i){let s=rA(n,e,t,r);return wi(n,e+2,i)||s}function $r(n,e,t,r){let i=Ve(),s=Dh();if(wi(i,s,e)){let o=_n(),a=LC();xG(a,i,n,e,t,r)}return $r}function sH(n,e,t,r){return wi(n,Dh(),t)?e+bm(t)+r:Ji}function qp(n,e){return n<<17|e<<2}function Ia(n){return n>>17&32767}function oH(n){return(n&2)==2}function aH(n,e){return n&131071|e<<17}function xv(n){return n|2}function Ql(n){return(n&131068)>>2}function A0(n,e){return n&-131069|e<<2}function lH(n){return(n&1)===1}function bv(n){return n|1}function cH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ia(o),l=Ql(o);n[r]=t;let c=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||Ah(h,u)>0)&&(c=!0)}else u=t;if(i)if(l!==0){let d=Ia(n[a+1]);n[r+1]=qp(d,a),d!==0&&(n[d+1]=A0(n[d+1],r)),n[a+1]=aH(n[a+1],r)}else n[r+1]=qp(a,0),a!==0&&(n[a+1]=A0(n[a+1],r)),a=r;else n[r+1]=qp(l,0),a===0?a=r:n[l+1]=A0(n[l+1],r),l=r;c&&(n[r+1]=xv(n[r+1])),LE(n,u,r,!0,s),LE(n,u,r,!1,s),uH(e,u,n,r,s),o=qp(a,l),s?e.classBindings=o:e.styleBindings=o}function uH(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ah(s,e)>=0&&(t[r+1]=bv(t[r+1]))}function LE(n,e,t,r,i){let s=n[t+1],o=e===null,a=r?Ia(s):Ql(s),l=!1;for(;a!==0&&(l===!1||o);){let c=n[a],u=n[a+1];hH(c,e)&&(l=!0,n[a+1]=r?bv(u):xv(u)),a=r?Ia(u):Ql(u)}l&&(n[t+1]=r?xv(s):bv(s))}function hH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ah(n,e)>=0:!1}var yi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dH(n){return n.substring(yi.key,yi.keyEnd)}function fH(n){return pH(n),iA(n,sA(n,0,yi.textEnd))}function iA(n,e){let t=yi.textEnd;return t===e?-1:(e=yi.keyEnd=mH(n,yi.key=e,t),sA(n,e,t))}function pH(n){yi.key=0,yi.keyEnd=0,yi.value=0,yi.valueEnd=0,yi.textEnd=n.length}function sA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function mH(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ct(n,e,t){let r=Ve(),i=Dh();if(wi(r,i,e)){let s=_n(),o=LC();lG(s,o,r,n,e,r[Ht],t,!1)}return ct}function wv(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";yx(n,t,s[o],o,r)}function Ei(n,e){return _H(n,e,null,!0),Ei}function Nh(n){yH(SH,gH,n,!0)}function gH(n,e){for(let t=fH(e);t>=0;t=iA(e,t))ex(n,dH(e),!0)}function _H(n,e,t,r){let i=Ve(),s=_n(),o=IC(2);if(s.firstUpdatePass&&aA(s,n,o,r),e!==Ji&&wi(i,o,e)){let a=s.data[So()];lA(s,a,i,i[Ht],n,i[o+1]=CH(e,t),r,o)}}function yH(n,e,t,r){let i=_n(),s=IC(2);i.firstUpdatePass&&aA(i,null,s,r);let o=Ve();if(t!==Ji&&wi(o,s,t)){let a=i.data[So()];if(cA(a,r)&&!oA(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=k0(l,t||"")),wv(i,a,o,t,r)}else EH(i,a,o,o[Ht],o[s+1],o[s+1]=TH(n,e,t),r,s)}}function oA(n,e){return e>=n.expandoStartIndex}function aA(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[So()],o=oA(n,t);cA(s,r)&&e===null&&!o&&(e=!1),e=vH(i,s,e,r),cH(i,s,e,t,o,r)}}function vH(n,e,t,r){let i=h3(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=I0(null,n,e,t,r),t=bh(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=I0(i,n,e,t,r),s===null){let l=xH(n,e,r);l!==void 0&&Array.isArray(l)&&(l=I0(null,n,e,l[1],r),l=bh(l,e.attrs,r),bH(n,e,r,l))}else s=wH(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function xH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ql(r)!==0)return n[Ia(r)]}function bH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ia(i)]=r}function wH(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=bh(r,o,t)}return bh(r,e.attrs,t)}function I0(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=bh(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function bh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ex(n,o,t?!0:e[++s]))}return n===void 0?null:n}function TH(n,e,t){if(t==null||t==="")return Xn;let r=[],i=nc(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function SH(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&ex(n,r,t)}function EH(n,e,t,r,i,s,o,a){i===Ji&&(i=Xn);let l=0,c=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;u!==null||h!==null;){let d=l<i.length?i[l+1]:void 0,f=c<s.length?s[c+1]:void 0,p=null,m;u===h?(l+=2,c+=2,d!==f&&(p=h,m=f)):h===null||u!==null&&u<h?(l+=2,p=u):(c+=2,p=h,m=f),p!==null&&lA(n,e,t,r,p,m,o,a),u=l<i.length?i[l]:null,h=c<s.length?s[c]:null}}function lA(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=lH(c)?BE(l,e,t,i,Ql(c),o):void 0;if(!pm(u)){pm(s)||oH(c)&&(s=BE(l,null,t,i,a,o));let h=xC(So(),t);fj(r,o,h,i,s)}}function BE(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,h=u===null,d=t[i+1];d===Ji&&(d=h?Xn:void 0);let f=h?w0(d,r):u===r?d:void 0;if(c&&!pm(f)&&(f=w0(l,r)),pm(f)&&(a=f,o))return a;let p=n[i+1];i=o?Ia(p):Ql(p)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=w0(l,r))}return a}function pm(n){return n!==void 0}function CH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=On(nc(n)))),n}function cA(n,e){return(n.flags&(e?8:16))!==0}var jie=new RegExp(`^(\\d+)*(${Fj}|${Pj})*(.*)`);var DH=(n,e)=>null;function wh(n,e){return DH(n,e)}var Tv=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function M0(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function AH(n,e,t){let r,i,s=0,o=n.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let l=n.at(s),c=e[s],u=M0(s,l,s,c,t);if(u!==0){u<0&&n.updateValue(s,c),s++;continue}let h=n.at(o),d=e[a],f=M0(o,h,a,d,t);if(f!==0){f<0&&n.updateValue(o,d),o--,a--;continue}let p=t(s,l),m=t(o,h),g=t(s,c);if(Object.is(g,m)){let _=t(a,d);Object.is(_,p)?(n.swap(s,o),n.updateValue(o,d),a--,o--):n.move(o,s),n.updateValue(s,c),s++;continue}if(r??=new mm,i??=UE(n,s,o,t),Sv(n,r,s,g))n.updateValue(s,c),s++,o++;else if(i.has(g))r.set(p,n.detach(s)),o--;else{let _=n.create(s,e[s]);n.attach(s,_),s++,o++}}for(;s<=a;)VE(n,r,t,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),l=a.next();for(;!l.done&&s<=o;){let c=n.at(s),u=l.value,h=M0(s,c,s,u,t);if(h!==0)h<0&&n.updateValue(s,u),s++,l=a.next();else{r??=new mm,i??=UE(n,s,o,t);let d=t(s,u);if(Sv(n,r,s,d))n.updateValue(s,u),s++,o++,l=a.next();else if(!i.has(d))n.attach(s,n.create(s,u)),s++,o++,l=a.next();else{let f=t(s,c);r.set(f,n.detach(s)),o--}}}for(;!l.done;)VE(n,r,t,n.length,l.value),l=a.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(a=>{n.destroy(a)})}function Sv(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function VE(n,e,t,r,i){if(Sv(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function UE(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var mm=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Bm(n,e,t,r){let i=e.tView,o=n[Se]&4096?4096:16,a=Fm(n,i,t,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),l=n[e.index];a[Ch]=l;let c=n[qi];return c!==null&&(a[qi]=c.createEmbeddedView(i)),Tx(i,a,t),a}function uA(n,e){let t=Pn+e;if(t<n.length)return n[t]}function Th(n,e){return!e||e.firstChild===null||cD(n)}function Vm(n,e,t,r=!0){let i=e[Re];if(ij(i,e,n,t),r){let o=J0(t,n),a=e[Ht],l=lx(a,n[wa]);l!==null&&tj(i,n[dr],a,e,l,o)}let s=e[Hl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function hA(n,e){let t=vh(n,e);return t!==void 0&&Rm(t[Re],t),t}var es=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=IH;let n=e;return n})();function IH(){let n=fr();return fA(n,Ve())}var MH=es,dA=class extends MH{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return rc(this._hostTNode,this._hostLView)}get injector(){return new xa(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kv(this._hostTNode,this._hostLView);if(UC(e)){let t=sm(e,this._hostLView),r=im(e),i=t[Re].data[r+8];return new xa(i,t)}else return new xa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=jE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Pn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=wh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Th(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!M3(e),a;if(o)a=t;else{let p=t||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?e:new Aa(Os(e)),c=r||this.parentInjector;if(!s&&l.ngModule==null){let m=(o?c:this.parentInjector).get(sn,null);m&&(s=m)}let u=Os(l.componentType??{}),h=wh(this._lContainer,u?.id??null),d=h?.firstChild??null,f=l.create(c,i,d,s);return this.insertImpl(f.hostView,a,Th(this._hostTNode,h)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(QU(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Zt],c=new dA(l,l[dr],l[Zt]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Vm(o,i,s,r),e.attachToViewContainerRef(),ZC(O0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=jE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=vh(this._lContainer,t);r&&(am(O0(this._lContainer),t),Rm(r[Re],r))}detach(e){let t=this._adjustIndex(e,-1),r=vh(this._lContainer,t);return r&&am(O0(this._lContainer),t)!=null?new Da(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function jE(n){return n[rm]}function O0(n){return n[rm]||(n[rm]=[])}function fA(n,e){let t,r=e[n.index];return xi(r)?t=r:(t=XD(r,e,null,n),e[n.index]=t,km(e,t)),RH(t,e,n,r),new dA(t,n,e)}function OH(n,e){let t=n[Ht],r=t.createComment(""),i=Hr(e,n),s=lx(t,i);return Zl(t,s,r,cj(t,i),!1),r}var RH=FH,NH=(n,e,t)=>!1;function PH(n,e,t){return NH(n,e,t)}function FH(n,e,t,r){if(n[wa])return;let i;t.type&8?i=bi(r):i=OH(e,t),n[wa]=i}function kH(n,e,t,r,i,s,o,a,l){let c=e.consts,u=Oh(e,n,4,o||null,mh(c,a));$D(e,t,u,mh(c,l)),Qv(e,u);let h=u.tView=_x(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}function Pt(n,e,t,r,i,s,o,a){let l=Ve(),c=_n(),u=n+Yn,h=c.firstCreatePass?kH(u,c,l,e,t,r,i,s,o):c.data[u];bo(h,!1);let d=LH(c,l,h,n);Yv()&&cx(c,l,d,h),Ca(d,l);let f=XD(d,l,d,h);return l[u]=f,km(l,f),PH(f,h,l),Hv(h)&&jD(c,l,h),o!=null&&GD(l,h,a),Pt}var LH=BH;function BH(n,e,t,r){return Zv(!0),e[Ht].createComment("")}function sc(n,e,t){ic("NgControlFlow");let r=Ve(),i=Dh(),s=Av(r,Yn+n),o=0;if(wi(r,i,e)){let a=gn(null);try{if(hA(s,o),e!==-1){let l=Iv(r[Re],Yn+e),c=wh(s,l.tView.ssrId),u=Bm(r,l,t,{dehydratedView:c});Vm(s,u,o,Th(l,c))}}finally{gn(a)}}else{let a=uA(s,o);a!==void 0&&(a[Nn]=t)}}var Ev=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Pn}};function pA(n,e){return e}var Cv=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function mA(n,e,t,r,i,s,o,a,l,c,u){ic("NgControlFlow");let h=l!==void 0,d=Ve(),f=a?o.bind(d[Sr][Nn]):o,p=new Cv(h,f);d[Yn+n]=p,Pt(n+1,e,t,r,i,s),h&&Pt(n+2,l,c,u)}var Dv=class extends Tv{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Pn}at(e){return this.getLView(e)[Nn].$implicit}attach(e,t){let r=t[Hl];this.needsIndexUpdate||=e!==this.length,Vm(this.lContainer,t,e,Th(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,VH(this.lContainer,e)}create(e,t){let r=wh(this.lContainer,this.templateTNode.tView.ssrId);return Bm(this.hostLView,this.templateTNode,new Ev(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Rm(e[Re],e)}updateValue(e,t){this.getLView(e)[Nn].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Nn].$index=e}getLView(e){return UH(this.lContainer,e)}};function gA(n){let e=gn(null),t=So();try{let r=Ve(),i=r[Re],s=r[t];if(s.liveCollection===void 0){let a=t+1,l=Av(r,a),c=Iv(i,a);s.liveCollection=new Dv(l,r,c)}else s.liveCollection.reset();let o=s.liveCollection;if(AH(o,n,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=Dh(),l=o.length===0;if(wi(r,a,l)){let c=t+2,u=Av(r,c);if(l){let h=Iv(i,c),d=wh(u,h.tView.ssrId),f=Bm(r,h,void 0,{dehydratedView:d});Vm(u,f,0,Th(h,d))}else hA(u,0)}}}finally{gn(e)}}function Av(n,e){return n[e]}function VH(n,e){return vh(n,e)}function UH(n,e){return uA(n,e)}function Iv(n,e){return $v(n,e)}function jH(n,e,t,r,i,s){let o=e.consts,a=mh(o,i),l=Oh(e,n,2,r,a);return $D(e,t,l,mh(o,s)),l.attrs!==null&&_v(l,l.attrs,!1),l.mergedAttrs!==null&&_v(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function ue(n,e,t,r){let i=Ve(),s=_n(),o=Yn+n,a=i[Ht],l=s.firstCreatePass?jH(o,s,i,e,t,r):s.data[o],c=GH(s,i,l,a,e,n);i[o]=c;let u=Hv(l);return bo(l,!0),DD(a,c,l),(l.flags&32)!==32&&Yv()&&cx(s,i,c,l),t3()===0&&Ca(c,i),n3(),u&&(jD(s,i,l),UD(s,l,i)),r!==null&&GD(i,l),ue}function oe(){let n=fr();DC()?AC():(n=n.parent,bo(n,!1));let e=n;i3(e)&&s3(),r3();let t=_n();return t.firstCreatePass&&(Qv(t,n),gC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&y3(e)&&wv(t,e,Ve(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&v3(e)&&wv(t,e,Ve(),e.stylesWithoutHost,!1),oe}function Wr(n,e,t,r){return ue(n,e,t,r),oe(),Wr}var GH=(n,e,t,r,i,s)=>(Zv(!0),mD(r,i,p3()));function Do(){return Ve()}var gm="en-US";var HH={marker:"element"},$H={marker:"ICU"},Ms=function(n){return n[n.SHIFT=2]="SHIFT",n[n.APPEND_EAGERLY=1]="APPEND_EAGERLY",n[n.COMMENT=2]="COMMENT",n}(Ms||{}),WH=gm;function zH(n){pU(n,"Expected localeId to be defined"),typeof n=="string"&&(WH=n.toLowerCase().replace(/_/g,"-"))}function _A(n,e,t){let r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return i===null?bD(n,e,t):bi(t[i])}function yA(n,e,t,r,i){let s=e.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(e.type&3||(a=o,o=i),o!==null&&e.componentOffset===-1)for(let l=1;l<s.length;l++){let c=t[s[l]];Zl(n,o,c,a,!1)}}}function vA(n,e){if(n.push(e),n.length>1)for(let t=n.length-2;t>=0;t--){let r=n[t];xA(r)||qH(r,e)&&XH(r)===null&&YH(r,e.index)}}function xA(n){return!(n.type&64)}function qH(n,e){return xA(e)||n.index>e.index}function XH(n){let e=n.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function YH(n,e){let t=n.insertBeforeIndex;Array.isArray(t)?t[0]=e:(TD(_A,yA),n.insertBeforeIndex=e)}function ZH(n,e,t){let r=n.data[e];r===null?n.data[e]=t:r.value=t}function QH(n,e){let t=n.insertBeforeIndex;t===null?(TD(_A,yA),t=n.insertBeforeIndex=[null,e]):(fU(Array.isArray(t),!0,"Expecting array here"),t.push(e))}function KH(n,e,t){let r=gx(n,t,64,null,null);return vA(e,r),r}function JH(n,e){let t=e[n.currentCaseLViewIndex];return t===null?t:t<0?~t:t}function e4(n,e,t){return n|e<<17|t<<1}function t4(n,e,t,r){let i=n[Ht];for(let s=0;s<e.length;s++){let o=e[s++],a=e[s],l=(o&Ms.COMMENT)===Ms.COMMENT,c=(o&Ms.APPEND_EAGERLY)===Ms.APPEND_EAGERLY,u=o>>>Ms.SHIFT,h=n[u];h===null&&(h=n[u]=l?i.createComment(a):pD(i,a)),c&&t!==null&&Zl(i,t,h,r,!1)}}function n4(){let n=[],e=-1,t,r;function i(a,l){for(t=l;n.length;)n.pop();return s(a.value,l),o}function s(a,l){e=0;let c=JH(a,l);c!==null?r=a.remove[c]:r=Xn}function o(){if(e<r.length){let a=r[e++];if(a>0)return t[a];{n.push(e,r);let l=~a,c=t[Re].data[l];return s(c,t),o()}}else return n.length===0?null:(r=n.pop(),e=n.pop(),o())}return i}var _m=/�(\d+):?\d*�/gi;var r4=/�(\d+)�/,bA=/^\s*(�\d+:?\d*�)\s*,\s*(select|plural)\s*,/,uh="\uFFFD",i4=/�\/?\*(\d+:\d+)�/gi,s4=/�(\/?[#*]\d+):?\d*�/gi,o4=/\uE500/g;function a4(n){return n.replace(o4," ")}function l4(n,e,t,r,i,s){let o=_h(),a=[],l=[],c=[[]];i=h4(i,s);let u=a4(i).split(s4);for(let h=0;h<u.length;h++){let d=u[h];if(h&1){let f=d.charCodeAt(0)===47,p=d.charCodeAt(f?1:0),m=Yn+Number.parseInt(d.substring(f?2:1));if(f)c.shift(),bo(_h(),!1);else{let g=KH(n,c[0],m);c.unshift([]),bo(g,!0)}}else{let f=Mv(d);for(let p=0;p<f.length;p++){let m=f[p];if(p&1){let g=m;if(typeof g!="object")throw new Error(`Unable to parse ICU expression in "${i}" message.`);let v=wA(n,o,c[0],t,a,"",!0).index;SA(n,t,l,e,g,v)}else{let g=m;g!==""&&c4(n,o,c[0],a,l,t,g)}}}}n.data[r]={create:a,update:l}}function wA(n,e,t,r,i,s,o){let a=Rh(n,r,1,null),l=a<<Ms.SHIFT,c=_h();e===c&&(c=null),c===null&&(l|=Ms.APPEND_EAGERLY),o&&(l|=Ms.COMMENT,K3(n4)),i.push(l,s===null?"":s);let u=gx(n,a,o?32:1,s===null?"":s,null);vA(t,u);let h=u.index;return bo(u,!1),c!==null&&e!==c&&QH(c,h),u}function c4(n,e,t,r,i,s,o){let a=o.match(_m),l=wA(n,e,t,s,r,a?null:o,!1);a&&Jp(i,o,l.index,null,0,null)}function Jp(n,e,t,r,i,s){let o=n.length,a=o+1;n.push(null,null);let l=o+2,c=e.split(_m),u=0;for(let h=0;h<c.length;h++){let d=c[h];if(h&1){let f=i+parseInt(d,10);n.push(-1-f),u=u|TA(f)}else d!==""&&n.push(d)}return n.push(t<<2|(r?1:0)),r&&n.push(r,s),n[o]=u,n[a]=n.length-l,u}function TA(n){return 1<<Math.min(n,31)}function u4(n){return n===-1}function GE(n){let e,t="",r=0,i=!1,s;for(;(e=i4.exec(n))!==null;)i?e[0]===`${uh}/*${s}${uh}`&&(r=e.index,i=!1):(t+=n.substring(r,e.index+e[0].length),s=e[1],i=!0);return t+=n.slice(r),t}function h4(n,e){if(u4(e))return GE(n);{let t=n.indexOf(`:${e}${uh}`)+2+e.toString().length,r=n.search(new RegExp(`${uh}\\/\\*\\d+:${e}${uh}`));return GE(n.substring(t,r))}}function SA(n,e,t,r,i,s){let o=0,a={type:i.type,currentCaseLViewIndex:Rh(n,e,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};m4(t,i,s),ZH(n,s,a);let l=i.values;for(let c=0;c<l.length;c++){let u=l[c],h=[];for(let d=0;d<u.length;d++){let f=u[d];if(typeof f!="string"){let p=h.push(f)-1;u[d]=`<!--\uFFFD${p}\uFFFD-->`}}o=f4(n,a,e,t,r,i.cases[c],u.join(""),h)|o}o&&g4(t,o,s)}function d4(n){let e=[],t=[],r=1,i=0;n=n.replace(bA,function(o,a,l){return l==="select"?r=0:r=1,i=parseInt(a.slice(1),10),""});let s=Mv(n);for(let o=0;o<s.length;){let a=s[o++].trim();r===1&&(a=a.replace(/\s*(?:=)?(\w+)\s*/,"$1")),a.length&&e.push(a);let l=Mv(s[o++]);e.length>t.length&&t.push(l)}return{type:r,mainBinding:i,cases:e,values:t}}function Mv(n){if(!n)return[];let e=0,t=[],r=[],i=/[{}]/g;i.lastIndex=0;let s;for(;s=i.exec(n);){let a=s.index;if(s[0]=="}"){if(t.pop(),t.length==0){let l=n.substring(e,a);bA.test(l)?r.push(d4(l)):r.push(l),e=a+1}}else{if(t.length==0){let l=n.substring(e,a);r.push(l),e=a+1}t.push("{")}}let o=n.substring(e);return r.push(o),r}function f4(n,e,t,r,i,s,o,a){let l=[],c=[],u=[];e.cases.push(s),e.create.push(l),e.remove.push(c),e.update.push(u);let d=yj(oD()).getInertBodyElement(o),f=Ij(d)||d;return f?EA(n,e,t,r,l,c,u,f,i,a,0):0}function EA(n,e,t,r,i,s,o,a,l,c,u){let h=0,d=a.firstChild;for(;d;){let f=Rh(n,t,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:let p=d,m=p.tagName.toLowerCase();if(Ej.hasOwnProperty(m)){R0(i,HH,m,l,f),n.data[f]=m;let y=p.attributes;for(let x=0;x<y.length;x++){let T=y.item(x),C=T.name.toLowerCase();!!T.value.match(_m)?Aj.hasOwnProperty(C)&&(MD[C]?Jp(o,T.value,f,T.name,0,fx):Jp(o,T.value,f,T.name,0,null)):_4(i,f,T)}h=EA(n,e,t,r,i,s,o,d,f,c,u+1)|h,HE(s,f,u)}break;case Node.TEXT_NODE:let g=d.textContent||"",_=g.match(_m);R0(i,null,_?"":g,l,f),HE(s,f,u),_&&(h=Jp(o,g,f,null,0,null)|h);break;case Node.COMMENT_NODE:let v=r4.exec(d.textContent||"");if(v){let y=parseInt(v[1],10),x=c[y];R0(i,$H,"",l,f),SA(n,t,r,l,x,f),p4(s,f,u)}break}d=d.nextSibling}return h}function HE(n,e,t){t===0&&n.push(e)}function p4(n,e,t){t===0&&(n.push(~e),n.push(e))}function m4(n,e,t){n.push(TA(e.mainBinding),2,-1-e.mainBinding,t<<2|2)}function g4(n,e,t){n.push(e,1,t<<2|3)}function R0(n,e,t,r,i){e!==null&&n.push(e),n.push(t,i,e4(0,r,i))}function _4(n,e,t){n.push(e<<1|1,t.name,t.value)}function y4(n,e,t=-1){let r=_n(),i=Ve(),s=Yn+n,o=mh(r.consts,e),a=_h();if(r.firstCreatePass&&l4(r,a===null?0:a.index,i,s,o,t),r.type===2){let d=i[Sr];d[Se]|=32}else i[Se]|=32;let l=r.data[s],c=a===i[dr]?null:a,u=yD(r,c,i),h=a&&a.type&8?i[a.index]:null;t4(i,l.create,u,h),MC(!0)}function v4(){MC(!1)}function Ph(n,e,t){y4(n,e,t),v4()}function Ra(n){return!!n&&typeof n.then=="function"}function CA(n){return!!n&&typeof n.subscribe=="function"}function wt(n,e,t,r){let i=Ve(),s=_n(),o=fr();return b4(s,i,i[Ht],o,n,e,r),wt}function x4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[fh],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function b4(n,e,t,r,i,s,o){let a=Hv(r),c=n.firstCreatePass&&QD(n),u=e[Nn],h=ZD(e),d=!0;if(r.type&3||o){let m=Hr(r,e),g=o?o(m):m,_=h.length,v=o?x=>o(bi(x[r.index])):r.index,y=null;if(!o&&a&&(y=x4(n,e,i,r.index)),y!==null){let x=y.__ngLastListenerFn__||y;x.__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,d=!1}else{s=WE(r,e,u,s,!1);let x=t.listen(g,i,s);h.push(s,x),c&&c.push(i,v,_,_+1)}}else s=WE(r,e,u,s,!1);let f=r.outputs,p;if(d&&f!==null&&(p=f[i])){let m=p.length;if(m)for(let g=0;g<m;g+=2){let _=p[g],v=p[g+1],T=e[_][v].subscribe(s),C=h.length;h.push(s,T),c&&c.push(i,r.index,C,-(C+1))}}}function $E(n,e,t,r){try{return Wi(6,e,t),t(r)!==!1}catch(i){return KD(n,i),!1}finally{Wi(7,e,t)}}function WE(n,e,t,r,i){return function s(o){if(o===Function)return r;let a=n.componentOffset>-1?To(n.index,e):e;vx(a);let l=$E(e,t,r,o),c=s.__ngNextListenerFn__;for(;c;)l=$E(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return i&&l===!1&&o.preventDefault(),l}}function ut(n=1){return f3(n)}function w4(n,e){let t=null,r=OU(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?aC(n,s,!0):PU(r,s))return i}return t}function DA(n){let e=Ve()[Sr][dr];if(!e.projection){let t=n?n.length:1,r=e.projection=QC(t,null),i=r.slice(),s=e.child;for(;s!==null;){let o=n?w4(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function AA(n,e=0,t){let r=Ve(),i=_n(),s=Oh(i,Yn+n,16,null,t||null);s.projection===null&&(s.projection=e),AC(),(!r[Hl]||EC())&&(s.flags&32)!==32&&hj(i,r,s)}function Er(n){let e=o3();return YU(e,Yn+n)}function Ye(n,e=""){let t=Ve(),r=_n(),i=n+Yn,s=r.firstCreatePass?Oh(r,i,1,e,null):r.data[i],o=T4(r,t,s,e,n);t[i]=o,Yv()&&cx(r,t,o,s),bo(s,!1)}var T4=(n,e,t,r,i)=>(Zv(!0),pD(e[Ht],r));function Na(n){return Ci("",n,""),Na}function Ci(n,e,t){let r=Ve(),i=sH(r,n,e,t);return i!==Ji&&SG(r,So(),i),Ci}function S4(n,e,t){let r=_n();if(r.firstCreatePass){let i=xo(n);Ov(t,r.data,r.blueprint,i,!0),Ov(e,r.data,r.blueprint,i,!1)}}function Ov(n,e,t,r,i){if(n=qn(n),Array.isArray(n))for(let s=0;s<n.length;s++)Ov(n[s],e,t,r,i);else{let s=_n(),o=Ve(),a=fr(),l=Yl(n)?n:qn(n.provide),c=rD(n),u=a.providerIndexes&1048575,h=a.directiveStart,d=a.providerIndexes>>20;if(Yl(n)||!n.multi){let f=new Sa(c,i,Pe),p=P0(l,e,i?u:u+d,h);p===-1?(W0(om(a,o),s,l),N0(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{let f=P0(l,e,u+d,h),p=P0(l,e,u,u+d),m=f>=0&&t[f],g=p>=0&&t[p];if(i&&!g||!i&&!m){W0(om(a,o),s,l);let _=D4(i?C4:E4,t.length,i,r,c);!i&&g&&(t[p].providerFactory=_),N0(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),o.push(_)}else{let _=IA(t[i?p:f],c,!i&&r);N0(s,n,f>-1?f:p,_)}!i&&r&&g&&t[p].componentProviders++}}}function N0(n,e,t,r){let i=Yl(e),s=B3(e);if(i||s){let l=(s?qn(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function IA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function P0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function E4(n,e,t,r){return Rv(this.multi,[])}function C4(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ea(t,t[Re],this.providerFactory.index,r);s=a.slice(0,o),Rv(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Rv(i,s);return s}function Rv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function D4(n,e,t,r,i){let s=new Sa(n,t,Pe);return s.multi=[],s.index=e,s.componentProviders=0,IA(s,i,r&&!t),s}function Um(n,e=[]){return t=>{t.providersResolver=(r,i)=>S4(r,i?i(n):n,e)}}var wo=class{},Sh=class{};var Nv=class extends wo{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fm(this);let i=hC(e);this._bootstrapComponents=lD(i.bootstrap),this._r3Injector=iD(e,t,[{provide:wo,useValue:this},{provide:Pm,useValue:this.componentFactoryResolver},...r],On(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pv=class extends Sh{constructor(e){super(),this.moduleType=e}create(e){return new Nv(this.moduleType,e,[])}};var ym=class extends wo{constructor(e){super(),this.componentFactoryResolver=new fm(this),this.instance=null;let t=new yh([...e.providers,{provide:wo,useValue:this},{provide:Pm,useValue:this.componentFactoryResolver}],e.parent||Mm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jm(n,e,t=null){return new ym({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var A4=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=eD(!1,r.type),s=i.length>0?jm([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ee({token:e,providedIn:"environment",factory:()=>new e(re(sn))});let n=e;return n})();function Bn(n){ic("NgStandalone"),n.getStandaloneInjector=e=>e.get(A4).getOrCreateStandaloneInjector(n)}function MA(n,e,t){let r=Cm()+n,i=Ve();return i[r]===Ji?Lm(i,r,t?e.call(t):e()):rH(i,r)}function Fh(n,e,t,r){return I4(Ve(),Cm(),n,e,t,r)}function Gm(n,e,t,r,i){return M4(Ve(),Cm(),n,e,t,r,i)}function Ex(n,e,t,r,i,s){return O4(Ve(),Cm(),n,e,t,r,i,s)}function Cx(n,e){let t=n[e];return t===Ji?void 0:t}function I4(n,e,t,r,i,s){let o=e+t;return wi(n,o,i)?Lm(n,o+1,s?r.call(s,i):r(i)):Cx(n,o+1)}function M4(n,e,t,r,i,s,o){let a=e+t;return rA(n,a,i,s)?Lm(n,a+2,o?r.call(o,i,s):r(i,s)):Cx(n,a+2)}function O4(n,e,t,r,i,s,o,a){let l=e+t;return iH(n,l,i,s,o)?Lm(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):Cx(n,l+3)}function R4(){return this._results[Symbol.iterator]()}var Fv=class n{get changes(){return this._changes??=new Nt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=R4)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=R3(e);(this._changesDetected=!O3(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Fn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=F4;let n=e;return n})(),N4=Fn,P4=class extends N4{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Bm(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:r});return new Da(i)}};function F4(){return Hm(fr(),Ve())}function Hm(n,e){return n.type&4?new P4(e,n,rc(n,e)):null}var kv=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Lv=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)PA(e,t).matches!==null&&this.queries[t].setDirty()}},vm=class{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}},Bv=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Vv=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,k4(t,s)),this.matchTNodeWithReadOption(e,t,Zp(t,e,s,!1,!1))}else r===Fn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zp(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ln||i===es||i===Fn&&t.type&4)this.addMatch(t.index,-2);else{let s=Zp(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function k4(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function L4(n,e){return n.type&11?rc(n,e):n.type&4?Hm(n,e):null}function B4(n,e,t,r){return t===-1?L4(e,n):t===-2?V4(n,e,r):Ea(n,n[Re],t,e)}function V4(n,e,t){if(t===Ln)return rc(e,n);if(t===Fn)return Hm(e,n);if(t===es)return fA(e,n)}function OA(n,e,t,r){let i=e[qi].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(B4(e,u,o[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Uv(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=OA(n,e,i,t);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)r.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let h=Pn;h<u.length;h++){let d=u[h];d[Ch]===d[Zt]&&Uv(d[Re],d,c,r)}if(u[Wl]!==null){let h=u[Wl];for(let d=0;d<h.length;d++){let f=h[d];Uv(f[Re],f,c,r)}}}}}return r}function zr(n){let e=Ve(),t=_n(),r=OC();zv(r+1);let i=PA(t,r);if(n.dirty&&ZU(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=i.crossesNgTemplate?Uv(t,e,r,[]):OA(t,e,i,r);n.reset(s,Uj),n.notifyOnChanges()}return!0}return!1}function $m(n,e,t){let r=_n();r.firstCreatePass&&(NA(r,new vm(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),RA(r,Ve(),e)}function Fs(n,e,t,r){let i=_n();if(i.firstCreatePass){let s=fr();NA(i,new vm(e,t,r),s.index),j4(i,n),(t&2)===2&&(i.staticContentQueries=!0)}RA(i,Ve(),t)}function qr(){return U4(Ve(),OC())}function U4(n,e){return n[qi].queries[e].queryList}function RA(n,e,t){let r=new Fv((t&4)===4);iG(n,e,r,r.destroy),e[qi]===null&&(e[qi]=new Lv),e[qi].queries.push(new kv(r))}function NA(n,e,t){n.queries===null&&(n.queries=new Bv),n.queries.track(new Vv(e,t))}function j4(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function PA(n,e){return n.queries.getByIndex(e)}function Ao(n,e){return Hm(n,e)}var Wm=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),jv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},zm=(()=>{let e=class e{compileModuleSync(r){return new Pv(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=hC(r),o=lD(s.declarations).reduce((a,l)=>{let c=Os(l);return c&&a.push(new Aa(c)),a},[]);return new jv(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Pa=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new rn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Dx=new ce(""),kh=new ce(""),qm=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ax||(G4(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(re(ze),re(Xm),re(kh))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})(),Xm=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Ax?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function G4(n){Ax=n}var Ax,Ym=new ce("Application Initializer"),FA=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=$(Ym,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ra(o))r.push(o);else if(CA(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Lh=new ce("appBootstrapListener");function H4(){LS(()=>{throw new _e(600,!1)})}function $4(n){return n.isBoundToModule}function W4(n,e,t){try{let r=t();return Ra(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ks=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(FD),this.componentTypes=[],this.components=[],this.isStable=$(Pa).hasPendingTasks.pipe(Ie(r=>!r)),this._injector=$(sn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof um;if(!this._injector.get(FA).done){let p="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&uC(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new _e(405,!1)}let a;s?a=r:a=this._injector.get(Pm).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=$4(a)?void 0:this._injector.get(wo),c=i||a.selector,u=a.create(pr.NULL,[],c,l),h=u.location.nativeElement,d=u.injector.get(Dx,null);return d?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),F0(this.components,u),d?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;F0(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Lh,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>F0(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new _e(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function F0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var z4=(()=>{let e=class e{constructor(){this.zone=$(ze),this.applicationRef=$(ks)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function q4(n){return[{provide:ze,useFactory:n},{provide:Xl,multi:!0,useFactory:()=>{let e=$(z4,{optional:!0});return()=>e.initialize()}},{provide:Xl,multi:!0,useFactory:()=>{let e=$(Q4);return()=>{e.initialize()}}},{provide:FD,useFactory:X4}]}function X4(){let n=$(ze),e=$(Yi);return t=>n.runOutsideAngular(()=>e.handleError(t))}function Y4(n){let e=q4(()=>new ze(Z4(n)));return tc([[],e])}function Z4(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Q4=(()=>{let e=class e{constructor(){this.subscription=new jt,this.initialized=!1,this.zone=$(ze),this.pendingTasks=$(Pa)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ze.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function K4(){return typeof $localize<"u"&&$localize.locale||gm}var Zm=new ce("LocaleId",{providedIn:"root",factory:()=>$(Zm,Be.Optional|Be.SkipSelf)||K4()});var kA=new ce("PlatformDestroyListeners");var em=null;function J4(n=[],e){return pr.create({name:e,providers:[{provide:Im,useValue:"platform"},{provide:kA,useValue:new Set([()=>em=null])},...n]})}function e8(n=[]){if(em)return em;let e=J4(n);return em=e,H4(),t8(e),e}function t8(n){n.get(ix,null)?.forEach(t=>t())}var LA=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(re(ks))},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();function BA(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=e8(r),s=[Y4(),...t||[]],a=new ym({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(ze);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(Yi,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:f=>{c.handleError(f)}})});let h=()=>a.destroy(),d=i.get(kA);return d.add(h),a.onDestroy(()=>{u.unsubscribe(),d.delete(h)}),W4(c,l,()=>{let f=a.get(FA);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(Zm,gm);zH(p||gm);let m=a.get(ks);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}function Fa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Qm(n,e){let t=Os(n),r=e.elementInjector||Mm();return new Aa(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}function VA(n){let e=Os(n);if(!e)return null;let t=new Aa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ix=null;function ts(){return Ix}function $A(n){Ix||(Ix=n)}var Km=class{},Wt=new ce("DocumentToken"),Px=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(r8))(),providedIn:"platform"});let n=e;return n})(),WA=new ce("Location Initialized"),r8=(()=>{let e=class e extends Px{constructor(){super(),this._doc=$(Wt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ts().getBaseHref(this._doc)}onPopState(r){let i=ts().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ts().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let n=e;return n})();function Fx(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function UA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ls(n){return n&&n[0]!=="?"?"?"+n:n}var Bs=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(kx))(),providedIn:"root"});let n=e;return n})(),zA=new ce("appBaseHref"),kx=(()=>{let e=class e extends Bs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??$(Wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Fx(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ls(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ls(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ls(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(re(Px),re(zA,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),qA=(()=>{let e=class e extends Bs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Fx(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ls(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ls(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(re(Px),re(zA,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})(),ac=(()=>{let e=class e{constructor(r){this._subject=new Nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=o8(UA(jA(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ls(i))}normalize(r){return e.stripTrailingSlash(s8(this._basePath,jA(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ls(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ls(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Ls,e.joinWithSlash=Fx,e.stripTrailingSlash=UA,e.\u0275fac=function(i){return new(i||e)(re(Bs))},e.\u0275prov=ee({token:e,factory:()=>i8(),providedIn:"root"});let n=e;return n})();function i8(){return new ac(re(Bs))}function s8(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function jA(n){return n.replace(/\/index.html$/,"")}function o8(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Jm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Mx=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},XA=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Mx(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),GA(l,s)}});for(let s=0,o=i.length;s<o;s++){let l=i.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);GA(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Pe(es),Pe(Fn),Pe(mx))},e.\u0275dir=$t({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function GA(n,e){n.context.$implicit=e.item}var lc=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ox,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){HA("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){HA("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Pe(es),Pe(Fn))},e.\u0275dir=$t({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),Ox=class{constructor(){this.$implicit=null,this.ngIf=null}};function HA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${On(e)}'.`)}var YA=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,s):!1,get:(r,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}};e.\u0275fac=function(i){return new(i||e)(Pe(es))},e.\u0275dir=$t({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Zi]});let n=e;return n})();var ZA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})(),QA="browser",a8="server";function Lx(n){return n===a8}var KA=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>new Rx(re(Wt),window)});let n=e;return n})(),Rx=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let t=l8(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function l8(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var oc=class{};var aI=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Pe(Ma),Pe(Ln))},e.\u0275dir=$t({type:e});let n=e;return n})(),c8=(()=>{let e=class e extends aI{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ec(e)))(s||e)}})(),e.\u0275dir=$t({type:e,features:[Oa]});let n=e;return n})(),lI=new ce("NgValueAccessor");var u8={provide:lI,useExisting:Kl(()=>rg),multi:!0};function h8(){let n=ts()?ts().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var d8=new ce("CompositionEventMode"),rg=(()=>{let e=class e extends aI{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!h8())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Pe(Ma),Pe(Ln),Pe(d8,8))},e.\u0275dir=$t({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&wt("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Um([u8]),Oa]});let n=e;return n})();var f8=new ce("NgValidators"),p8=new ce("NgAsyncValidators");function cI(n){return n!=null}function uI(n){return Ra(n)?bt(n):n}function hI(n){let e={};return n.forEach(t=>{e=t!=null?S(S({},e),t):e}),Object.keys(e).length===0?null:e}function dI(n,e){return e.map(t=>t(n))}function m8(n){return!n.validate}function fI(n){return n.map(e=>m8(e)?e:t=>e.validate(t))}function g8(n){if(!n)return null;let e=n.filter(cI);return e.length==0?null:function(t){return hI(dI(t,e))}}function pI(n){return n!=null?g8(fI(n)):null}function _8(n){if(!n)return null;let e=n.filter(cI);return e.length==0?null:function(t){let r=dI(t,e).map(uI);return d0(r).pipe(Ie(hI))}}function mI(n){return n!=null?_8(fI(n)):null}function eI(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function y8(n){return n._rawValidators}function v8(n){return n._rawAsyncValidators}function Bx(n){return n?Array.isArray(n)?n:[n]:[]}function tg(n,e){return Array.isArray(n)?n.includes(e):n===e}function tI(n,e){let t=Bx(e);return Bx(n).forEach(i=>{tg(t,i)||t.push(i)}),t}function nI(n,e){return Bx(e).filter(t=>!tg(n,t))}var ng=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Vx=class extends ng{get formDirective(){return null}get path(){return null}},Uh=class extends ng{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ux=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},x8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Mse=W(S({},x8),{"[class.ng-submitted]":"isSubmitted"}),gI=(()=>{let e=class e extends Ux{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Pe(Uh,2))},e.\u0275dir=$t({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Ei("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Oa]});let n=e;return n})();var Bh="VALID",eg="INVALID",cc="PENDING",Vh="DISABLED";function b8(n){return(ig(n)?n.validators:n)||null}function w8(n){return Array.isArray(n)?pI(n):n||null}function T8(n,e){return(ig(e)?e.asyncValidators:n)||null}function S8(n){return Array.isArray(n)?mI(n):n||null}function ig(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var jx=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bh}get invalid(){return this.status===eg}get pending(){return this.status==cc}get disabled(){return this.status===Vh}get enabled(){return this.status!==Vh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nI(e,this._rawAsyncValidators))}hasValidator(e){return tg(this._rawValidators,e)}hasAsyncValidator(e){return tg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=cc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vh,this.errors=null,this._forEachChild(r=>{r.disable(W(S({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(S({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bh,this._forEachChild(r=>{r.enable(W(S({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(W(S({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bh||this.status===cc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vh:Bh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=cc,this._hasOwnPendingAsyncValidator=!0;let t=uI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Nt,this.statusChanges=new Nt}_calculateStatus(){return this._allControlsDisabled()?Vh:this.errors?eg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cc)?cc:this._anyControlsHaveStatus(eg)?eg:Bh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ig(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=w8(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=S8(this._rawAsyncValidators)}};var _I=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>Gx}),Gx="always";function E8(n,e){return[...e.path,n]}function C8(n,e,t=Gx){A8(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),I8(n,e),O8(n,e),M8(n,e),D8(n,e)}function rI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function D8(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function A8(n,e){let t=y8(n);e.validator!==null?n.setValidators(eI(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=v8(n);e.asyncValidator!==null?n.setAsyncValidators(eI(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();rI(e._rawValidators,i),rI(e._rawAsyncValidators,i)}function I8(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&yI(n,e)})}function M8(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&yI(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function yI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function O8(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function R8(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function N8(n){return Object.getPrototypeOf(n.constructor)===c8}function P8(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===rg?t=s:N8(s)?r=s:i=s}),i||r||t||null}function iI(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sI(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var F8=class extends jx{constructor(e=null,t,r){super(b8(t),T8(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ig(t)&&(t.nonNullable||t.initialValueIsDefault)&&(sI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var k8={provide:Uh,useExisting:Kl(()=>Hx)},oI=(()=>Promise.resolve())(),Hx=(()=>{let e=class e extends Uh{constructor(r,i,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new F8,this._registered=!1,this.name="",this.update=new Nt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=P8(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),R8(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){C8(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){oI.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Fa(i);oI.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?E8(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(Pe(Vx,9),Pe(f8,10),Pe(p8,10),Pe(lI,10),Pe(Co,8),Pe(_I,8))},e.\u0275dir=$t({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Um([k8]),Oa,Zi]});let n=e;return n})();var L8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var B8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({imports:[L8]});let n=e;return n})();var vI=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:_I,useValue:r.callSetDisabledState??Gx}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({imports:[B8]});let n=e;return n})();var U8=["*"];var j8=["dialog"];function G8(n,e){n&1&&(ue(0,"span",9),Ph(1,10),oe())}function H8(n,e){n&1&&(ue(0,"span",9),Ph(1,11),oe())}function $8(n,e){n&1&&(ue(0,"span",9),Ph(1,12),oe())}function W8(n,e){n&1&&(ue(0,"span",9),Ph(1,13),oe())}function z8(n,e){n&1&&Ye(0,"...")}function q8(n,e){if(n&1&&Ye(0),n&2){let t=e.$implicit;Na(t)}}function X8(n,e){}var Y8=n=>({disabled:!0,currentPage:n});function Z8(n,e){if(n&1&&(ue(0,"a",16),Pt(1,X8,0,0,"ng-template",8),oe()),n&2){let t=ut(2).$implicit,r=ut(),i=Er(9);Ae(1),ct("ngTemplateOutlet",(r.tplEllipsis==null?null:r.tplEllipsis.templateRef)||i)("ngTemplateOutletContext",Fh(2,Y8,t))}}function Q8(n,e){}var K8=(n,e,t)=>({disabled:n,$implicit:e,currentPage:t});function J8(n,e){if(n&1){let t=Do();ue(0,"a",17),wt("click",function(i){Ti(t);let s=ut().$implicit;return ut(2).selectPage(s),Si(i.preventDefault())}),Pt(1,Q8,0,0,"ng-template",8),oe()}if(n&2){let t=ut().$implicit,r=ut(),i=r.disabled,s=r.$implicit,o=ut(),a=Er(11);$r("tabindex",i?"-1":null)("aria-disabled",i?"true":null),Ae(1),ct("ngTemplateOutlet",(o.tplNumber==null?null:o.tplNumber.templateRef)||a)("ngTemplateOutletContext",Ex(4,K8,i,t,s))}}function e$(n,e){if(n&1&&(ue(0,"li",14),Pt(1,Z8,2,4,"a",15)(2,J8,2,8),oe()),n&2){let t=e.$implicit,r=ut(),i=r.$implicit,s=r.disabled,o=ut();Ei("active",t===i)("disabled",o.isEllipsis(t)||s),$r("aria-current",t===i?"page":null),Ae(1),sc(1,o.isEllipsis(t)?1:2)}}function t$(n,e){if(n&1&&mA(0,e$,3,6,"li",18,pA),n&2){let t=e.pages;gA(t)}}function n$(n,e){}var qx=(n,e)=>({disabled:n,currentPage:e});function r$(n,e){if(n&1){let t=Do();ue(0,"li",14)(1,"a",19),wt("click",function(i){return Ti(t),ut().selectPage(1),Si(i.preventDefault())}),Pt(2,n$,0,0,"ng-template",8),oe()()}if(n&2){let t=ut(),r=Er(1);Ei("disabled",t.previousDisabled()),Ae(1),$r("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),Ae(1),ct("ngTemplateOutlet",(t.tplFirst==null?null:t.tplFirst.templateRef)||r)("ngTemplateOutletContext",Gm(6,qx,t.previousDisabled(),t.page))}}function i$(n,e){}var s$=n=>({disabled:n});function o$(n,e){if(n&1){let t=Do();ue(0,"li",14)(1,"a",20),wt("click",function(i){Ti(t);let s=ut();return s.selectPage(s.page-1),Si(i.preventDefault())}),Pt(2,i$,0,0,"ng-template",8),oe()()}if(n&2){let t=ut(),r=Er(3);Ei("disabled",t.previousDisabled()),Ae(1),$r("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),Ae(1),ct("ngTemplateOutlet",(t.tplPrevious==null?null:t.tplPrevious.templateRef)||r)("ngTemplateOutletContext",Fh(6,s$,t.previousDisabled()))}}function a$(n,e){}function l$(n,e){}function c$(n,e){if(n&1){let t=Do();ue(0,"li",14)(1,"a",21),wt("click",function(i){Ti(t);let s=ut();return s.selectPage(s.page+1),Si(i.preventDefault())}),Pt(2,l$,0,0,"ng-template",8),oe()()}if(n&2){let t=ut(),r=Er(5);Ei("disabled",t.nextDisabled()),Ae(1),$r("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),Ae(1),ct("ngTemplateOutlet",(t.tplNext==null?null:t.tplNext.templateRef)||r)("ngTemplateOutletContext",Gm(6,qx,t.nextDisabled(),t.page))}}function u$(n,e){}function h$(n,e){if(n&1){let t=Do();ue(0,"li",14)(1,"a",22),wt("click",function(i){Ti(t);let s=ut();return s.selectPage(s.pageCount),Si(i.preventDefault())}),Pt(2,u$,0,0,"ng-template",8),oe()()}if(n&2){let t=ut(),r=Er(7);Ei("disabled",t.nextDisabled()),Ae(1),$r("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),Ae(1),ct("ngTemplateOutlet",(t.tplLast==null?null:t.tplLast.templateRef)||r)("ngTemplateOutletContext",Gm(6,qx,t.nextDisabled(),t.page))}}var d$=(n,e,t)=>({$implicit:n,pages:e,disabled:t});var bI={animation:!0,transitionTimerDelayMs:5},f$=(()=>{let e=class e{constructor(){this.animation=bI.animation}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function p$(n){let{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n),r=parseFloat(e),i=parseFloat(t);return(r+i)*1e3}function m$(n){return parseInt(`${n}`,10)}function g$(n,e,t=0){return Math.max(Math.min(n,e),t)}function wI(n){return typeof n=="string"}function xI(n){return!isNaN(m$(n))}function $x(n){return n!=null}function _$(n){return n&&n.then}function TI(n){return(n||document.body).getBoundingClientRect()}function y$(n){return e=>new Me(t=>{let r=o=>n.run(()=>t.next(o)),i=o=>n.run(()=>t.error(o)),s=()=>n.run(()=>t.complete());return e.subscribe({next:r,error:i,complete:s})})}var v$=()=>{},{transitionTimerDelayMs:x$}=bI,sg=new Map,ka=(n,e,t,r)=>{let i=r.context||{},s=sg.get(e);if(s)switch(r.runningTransition){case"continue":return Dn;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),sg.delete(e)}let o=t(e,r.animation,i)||v$;if(!r.animation||window.getComputedStyle(e).transitionProperty==="none")return n.run(()=>o()),me(void 0).pipe(y$(n));let a=new St,l=new St,c=a.pipe(g0(!0));sg.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:i});let u=p$(e);return n.runOutsideAngular(()=>{let h=jr(e,"transitionend").pipe(Mn(c),en(({target:f})=>f===e)),d=f0(u+x$).pipe(Mn(c));p0(d,h,l).pipe(Mn(c)).subscribe(()=>{sg.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var SI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var EI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var CI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})(),DI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var Xx=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(Xx||{});var voe=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||e()):!1})();var b$=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function AI(n){let e=Array.from(n.querySelectorAll(b$)).filter(t=>t.tabIndex!==-1);return[e[0],e[e.length-1]]}var w$=(n,e,t,r=!1)=>{n.runOutsideAngular(()=>{let i=jr(e,"focusin").pipe(Mn(t),Ie(s=>s.target));jr(e,"keydown").pipe(Mn(t),en(s=>s.which===Xx.Tab),jp(i)).subscribe(([s,o])=>{let[a,l]=AI(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),r&&jr(e,"click").pipe(Mn(t),jp(i),Ie(s=>s[1])).subscribe(s=>s.focus())})};var xoe=new Date(1882,10,12),boe=new Date(2174,10,25);var woe=1e3*60*60*24;var Yx=1080,T$=24*Yx,S$=12*Yx+793,Toe=29*T$+S$,Soe=11*Yx+204;var II=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var MI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})(),E$=(()=>{let e=class e{constructor(){this._ngbConfig=$(f$),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(r){this._animation=r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),uc=class{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}};var C$=(()=>{let e=class e{constructor(){this._document=$(Wt)}hide(){let r=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,s=i.style,{overflow:o,paddingRight:a}=s;if(r>0){let l=parseFloat(window.getComputedStyle(i).paddingRight);s.paddingRight=`${l+r}px`}return s.overflow="hidden",()=>{r>0&&(s.paddingRight=a),s.overflow=o}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),D$=(()=>{let e=class e{constructor(){this._nativeElement=$(Ln).nativeElement,this._zone=$(ze)}ngOnInit(){this._zone.onStable.asObservable().pipe(hr(1)).subscribe(()=>{ka(this._zone,this._nativeElement,(r,i)=>{i&&TI(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ka(this._zone,this._nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,s){i&2&&(Nh("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),Ei("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Bn],decls:0,vars:0,template:function(i,s){},encapsulation:2});let n=e;return n})(),og=class{update(e){}close(e){}dismiss(e){}},A$=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],I$=["animation","backdropClass"],Wx=class{_applyWindowOptions(e,t){A$.forEach(r=>{$x(t[r])&&(e[r]=t[r])})}_applyBackdropOptions(e,t){I$.forEach(r=>{$x(t[r])&&(e[r]=t[r])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Mn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Mn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new St,this._dismissed=new St,this._hidden=new St,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let t=this._beforeDismiss();_$(t)?t.then(r=>{r!==!1&&this._dismiss(e)},()=>{}):t!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():me(void 0);e.subscribe(()=>{let{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),lh(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},zx=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(zx||{}),M$=(()=>{let e=class e{constructor(){this._document=$(Wt),this._elRef=$(Ln),this._zone=$(ze),this._closed$=new St,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Nt,this.shown=new St,this.hidden=new St}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":wI(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(hr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:r}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=ka(this._zone,r,()=>r.classList.remove("show"),i),o=ka(this._zone,this._dialogEl.nativeElement,()=>{},i),a=lh(s,o);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let r={animation:this.animation,runningTransition:"continue"},i=ka(this._zone,this._elRef.nativeElement,(o,a)=>{a&&TI(o),o.classList.add("show")},r),s=ka(this._zone,this._dialogEl.nativeElement,()=>{},r);lh(i,s).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{jr(r,"keydown").pipe(Mn(this._closed$),en(s=>s.which===Xx.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(zx.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;jr(this._dialogEl.nativeElement,"mousedown").pipe(Mn(this._closed$),Gt(()=>i=!1),In(()=>jr(r,"mouseup").pipe(Mn(this._closed$),hr(1))),en(({target:s})=>r===s)).subscribe(()=>{i=!0}),jr(r,"click").pipe(Mn(this._closed$)).subscribe(({target:s})=>{r===s&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(zx.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){let i=r.querySelector("[ngbAutofocus]"),s=AI(r)[0];(i||s||r).focus()}}_restoreFocus(){let r=this._document.body,i=this._elWithFocus,s;i&&i.focus&&r.contains(i)?s=i:s=r,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&ka(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(i,s){if(i&1&&$m(j8,7),i&2){let o;zr(o=qr())&&(s._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,s){i&2&&($r("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy),Nh("modal d-block"+(s.windowClass?" "+s.windowClass:"")),Ei("fade",s.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Bn],ngContentSelectors:U8,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,s){i&1&&(DA(),ue(0,"div",0,1)(2,"div",2),AA(3),oe()()),i&2&&Nh("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+s.fullscreenClass+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let n=e;return n})(),O$=(()=>{let e=class e{constructor(){this._applicationRef=$(ks),this._injector=$(pr),this._environmentInjector=$(sn),this._document=$(Wt),this._scrollBar=$(C$),this._activeWindowCmptHasChanged=new St,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Nt;let r=$(ze);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];w$(r,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let r=this._scrollBarRestoreFn;r&&(this._scrollBarRestoreFn=null,r())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(r,i,s){let o=s.container instanceof HTMLElement?s.container:$x(s.container)?this._document.querySelector(s.container):this._document.body;if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new og;r=s.injector||r;let l=r.get(sn,null)||this._environmentInjector,c=this._getContentRef(r,l,i,a,s),u=s.backdrop!==!1?this._attachBackdrop(o):void 0,h=this._attachWindowComponent(o,c.nodes),d=new Wx(h,c,u,s.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.hidden.pipe(hr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=f=>{d.close(f)},a.dismiss=f=>{d.dismiss(f)},a.update=f=>{d.update(f)},d.update(s),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),h.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(i=>i.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r){let i=Qm(D$,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),r.appendChild(i.location.nativeElement),i}_attachWindowComponent(r,i){let s=Qm(M$,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(s.hostView),r.appendChild(s.location.nativeElement),s}_getContentRef(r,i,s,o,a){return s?s instanceof Fn?this._createFromTemplateRef(s,o):wI(s)?this._createFromString(s):this._createFromComponent(r,i,s,o,a):new uc([])}_createFromTemplateRef(r,i){let s={$implicit:i,close(a){i.close(a)},dismiss(a){i.dismiss(a)}},o=r.createEmbeddedView(s);return this._applicationRef.attachView(o),new uc([o.rootNodes],o)}_createFromString(r){let i=this._document.createTextNode(`${r}`);return new uc([[i]])}_createFromComponent(r,i,s,o,a){let l=pr.create({providers:[{provide:og,useValue:o}],parent:r}),c=Qm(s,{environmentInjector:i,elementInjector:l}),u=c.location.nativeElement;return a.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new uc([[u]],c.hostView,c)}_setAriaHidden(r){let i=r.parentElement;i&&r!==this._document.body&&(Array.from(i.children).forEach(s=>{s!==r&&s.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,i)=>{r?i.setAttribute("aria-hidden",r):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){let i=()=>{let s=this._modalRefs.indexOf(r);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(i,i)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{let i=this._windowCmpts.indexOf(r);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),R$=(()=>{let e=class e{constructor(){this._injector=$(pr),this._modalStack=$(O$),this._config=$(E$)}open(r,i={}){let s=S(W(S({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,r,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),OI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({providers:[R$]});let n=e;return n})();var RI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})(),N$=(()=>{let e=class e{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),P$=(()=>{let e=class e{constructor(){this.templateRef=$(Fn)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$t({type:e,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0});let n=e;return n})(),F$=(()=>{let e=class e{constructor(){this.templateRef=$(Fn)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$t({type:e,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0});let n=e;return n})(),k$=(()=>{let e=class e{constructor(){this.templateRef=$(Fn)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$t({type:e,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0});let n=e;return n})(),L$=(()=>{let e=class e{constructor(){this.templateRef=$(Fn)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$t({type:e,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0});let n=e;return n})(),B$=(()=>{let e=class e{constructor(){this.templateRef=$(Fn)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$t({type:e,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0});let n=e;return n})(),V$=(()=>{let e=class e{constructor(){this.templateRef=$(Fn)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$t({type:e,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0});let n=e;return n})(),U$=(()=>{let e=class e{constructor(){this.templateRef=$(Fn)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$t({type:e,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0});let n=e;return n})(),NI=(()=>{let e=class e{constructor(){this._config=$(N$),this.pageCount=0,this.pages=[],this.disabled=this._config.disabled,this.boundaryLinks=this._config.boundaryLinks,this.directionLinks=this._config.directionLinks,this.ellipses=this._config.ellipses,this.rotate=this._config.rotate,this.maxSize=this._config.maxSize,this.page=1,this.pageSize=this._config.pageSize,this.pageChange=new Nt(!0),this.size=this._config.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(r){this._updatePages(r)}ngOnChanges(r){this._updatePages(this.page)}isEllipsis(r){return r===-1}_applyEllipses(r,i){this.ellipses&&(r>0&&(r>2?this.pages.unshift(-1):r===2&&this.pages.unshift(2),this.pages.unshift(1)),i<this.pageCount&&(i<this.pageCount-2?this.pages.push(-1):i===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let r=0,i=this.pageCount,s=Math.floor(this.maxSize/2),o=this.maxSize%2===0?s-1:s;return this.page<=s?i=this.maxSize:this.pageCount-this.page<s?r=this.pageCount-this.maxSize:(r=this.page-s-1,i=this.page+o),[r,i]}_applyPagination(){let i=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize,s=i+this.maxSize;return[i,s]}_setPageInRange(r){let i=this.page;this.page=g$(r,this.pageCount,1),this.page!==i&&xI(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(r){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),xI(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let i=1;i<=this.pageCount;i++)this.pages.push(i);if(this._setPageInRange(r),this.maxSize>0&&this.pageCount>this.maxSize){let i=0,s=this.pageCount;this.rotate?[i,s]=this._applyRotation():[i,s]=this._applyPagination(),this.pages=this.pages.slice(i,s),this._applyEllipses(i,s)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["ngb-pagination"]],contentQueries:function(i,s,o){if(i&1&&(Fs(o,P$,5),Fs(o,F$,5),Fs(o,k$,5),Fs(o,L$,5),Fs(o,B$,5),Fs(o,V$,5),Fs(o,U$,5)),i&2){let a;zr(a=qr())&&(s.tplEllipsis=a.first),zr(a=qr())&&(s.tplFirst=a.first),zr(a=qr())&&(s.tplLast=a.first),zr(a=qr())&&(s.tplNext=a.first),zr(a=qr())&&(s.tplNumber=a.first),zr(a=qr())&&(s.tplPrevious=a.first),zr(a=qr())&&(s.tplPages=a.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[Zi,Bn],decls:20,vars:12,consts:()=>{let r;r=$localize`:@@ngb.pagination.first:««`;let i;i=$localize`:@@ngb.pagination.previous:«`;let s;s=$localize`:@@ngb.pagination.next:»`;let o;o=$localize`:@@ngb.pagination.last:»»`;let a;a=$localize`:@@ngb.pagination.first-aria:First`;let l;l=$localize`:@@ngb.pagination.previous-aria:Previous`;let c;c=$localize`:@@ngb.pagination.next-aria:Next`;let u;return u=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],r,i,s,o,[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["class","page-item",3,"active","disabled"],["aria-label",a,"href","",1,"page-link",3,"click"],["aria-label",l,"href","",1,"page-link",3,"click"],["aria-label",c,"href","",1,"page-link",3,"click"],["aria-label",u,"href","",1,"page-link",3,"click"]]},template:function(i,s){if(i&1&&(Pt(0,G8,2,0,"ng-template",null,0,Ao)(2,H8,2,0,"ng-template",null,1,Ao)(4,$8,2,0,"ng-template",null,2,Ao)(6,W8,2,0,"ng-template",null,3,Ao)(8,z8,1,0,"ng-template",null,4,Ao)(10,q8,1,1,"ng-template",null,5,Ao)(12,t$,2,0,"ng-template",null,6,Ao),ue(14,"ul"),Pt(15,r$,3,9,"li",7)(16,o$,3,8,"li",7)(17,a$,0,0,"ng-template",8)(18,c$,3,9,"li",7)(19,h$,3,9,"li",7),oe()),i&2){let o=Er(13);Ae(14),Nh("pagination"+(s.size?" pagination-"+s.size:"")),Ae(1),sc(15,s.boundaryLinks?15:-1),Ae(1),sc(16,s.directionLinks?16:-1),Ae(1),ct("ngTemplateOutlet",(s.tplPages==null?null:s.tplPages.templateRef)||o)("ngTemplateOutletContext",Ex(8,d$,s.page,s.pages,s.disabled)),Ae(1),sc(18,s.directionLinks?18:-1),Ae(1),sc(19,s.boundaryLinks?19:-1)}},dependencies:[YA],encapsulation:2,changeDetection:0});let n=e;return n})();var PI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var FI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var kI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var LI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var BI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var VI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var UI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var jI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var Eoe=new ce("live announcer delay",{providedIn:"root",factory:()=>100});var GI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();var HI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})(),j$=[SI,EI,CI,DI,II,MI,OI,RI,HI,PI,FI,kI,LI,BI,VI,UI,jI,GI],$I=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({imports:[j$,SI,EI,CI,DI,II,MI,OI,RI,HI,PI,FI,kI,LI,BI,VI,UI,jI,GI]});let n=e;return n})();var Gh=class{},lg=class{},La=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Qx=class{encodeKey(e){return WI(e)}encodeValue(e){return WI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function $$(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}var W$=/%(\d[a-f0-9])/gi,z$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function WI(n){return encodeURIComponent(n).replace(W$,(e,t)=>z$[t]??e)}function ag(n){return`${n}`}var Io=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Qx,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=$$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ag):[ag(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ag(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ag(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Kx=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function q$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function zI(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function qI(n){return typeof Blob<"u"&&n instanceof Blob}function XI(n){return typeof FormData<"u"&&n instanceof FormData}function X$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var jh=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(q$(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers||(this.headers=new La),this.context||(this.context=new Kx),!this.params)this.params=new Io,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:zI(this.body)||qI(this.body)||XI(this.body)||X$(this.body)||typeof this.body=="string"?this.body:this.body instanceof Io?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||XI(this.body)?null:qI(this.body)?this.body.type||null:zI(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Io?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,l=e.headers||this.headers,c=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,d)=>h.set(d,e.setHeaders[d]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((h,d)=>h.set(d,e.setParams[d]),c)),new n(t,r,s,{params:c,headers:l,context:u,reportProgress:a,responseType:i,withCredentials:o})}},Vs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vs||{}),Hh=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new La,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Jx=class n extends Hh{constructor(e={}){super(e),this.type=Vs.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},cg=class n extends Hh{constructor(e={}){super(e),this.type=Vs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ug=class extends Hh{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function Zx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Ba=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof jh)o=r;else{let c;s.headers instanceof La?c=s.headers:c=new La(s.headers);let u;s.params&&(s.params instanceof Io?u=s.params:u=new Io({fromObject:s.params})),o=new jh(r,i,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=me(o).pipe(As(c=>this.handler.handle(c)));if(r instanceof jh||s.observe==="events")return a;let l=a.pipe(en(c=>c instanceof cg));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(Ie(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(Ie(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(Ie(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(Ie(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Io().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Zx(s,i))}post(r,i,s={}){return this.request("POST",r,Zx(s,i))}put(r,i,s={}){return this.request("PUT",r,Zx(s,i))}};e.\u0275fac=function(i){return new(i||e)(re(Gh))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})();function KI(n,e){return e(n)}function Y$(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function Z$(n,e,t){return(r,i)=>Qi(t,()=>e(r,s=>n(s,i)))}var Q$=new ce(""),eb=new ce(""),K$=new ce(""),J$=new ce("");function e5(){let n=null;return(e,t)=>{n===null&&(n=($(Q$,{optional:!0})??[]).reduceRight(Y$,KI));let r=$(Pa),i=r.add();return n(e,t).pipe(Is(()=>r.remove(i)))}}var YI=(()=>{let e=class e extends Gh{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=$(Pa);let s=$(J$,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(eb),...this.injector.get(K$,[])]));this.chain=s.reduceRight((o,a)=>Z$(o,a,this.injector),KI)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Is(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(re(lg),re(sn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})();var t5=/^\)\]\}',?\n/;function n5(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var ZI=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new _e(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?bt(i.\u0275loadImpl()):me(null)).pipe(In(()=>new Me(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((g,_)=>a.setRequestHeader(g,_.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let l=r.serializeBody(),c=null,u=()=>{if(c!==null)return c;let g=a.statusText||"OK",_=new La(a.getAllResponseHeaders()),v=n5(a)||r.url;return c=new Jx({headers:_,status:a.status,statusText:g,url:v}),c},h=()=>{let{headers:g,status:_,statusText:v,url:y}=u(),x=null;_!==204&&(x=typeof a.response>"u"?a.responseText:a.response),_===0&&(_=x?200:0);let T=_>=200&&_<300;if(r.responseType==="json"&&typeof x=="string"){let C=x;x=x.replace(t5,"");try{x=x!==""?JSON.parse(x):null}catch(b){x=C,T&&(T=!1,x={error:b,text:x})}}T?(o.next(new cg({body:x,headers:g,status:_,statusText:v,url:y||void 0})),o.complete()):o.error(new ug({error:x,headers:g,status:_,statusText:v,url:y||void 0}))},d=g=>{let{url:_}=u(),v=new ug({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:_||void 0});o.error(v)},f=!1,p=g=>{f||(o.next(u()),f=!0);let _={type:Vs.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),r.responseType==="text"&&a.responseText&&(_.partialText=a.responseText),o.next(_)},m=g=>{let _={type:Vs.UploadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),o.next(_)};return a.addEventListener("load",h),a.addEventListener("error",d),a.addEventListener("timeout",d),a.addEventListener("abort",d),r.reportProgress&&(a.addEventListener("progress",p),l!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(l),o.next({type:Vs.Sent}),()=>{a.removeEventListener("error",d),a.removeEventListener("abort",d),a.removeEventListener("load",h),a.removeEventListener("timeout",d),r.reportProgress&&(a.removeEventListener("progress",p),l!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(re(oc))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})(),JI=new ce("XSRF_ENABLED"),r5="XSRF-TOKEN",i5=new ce("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>r5}),s5="X-XSRF-TOKEN",o5=new ce("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>s5}),hg=class{},a5=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Jm(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(re(Wt),re(Ki),re(i5))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})();function l5(n,e){let t=n.url.toLowerCase();if(!$(JI)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=$(hg).getToken(),i=$(o5);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var eM=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(eM||{});function c5(n,e){return{\u0275kind:n,\u0275providers:e}}function tM(...n){let e=[Ba,ZI,YI,{provide:Gh,useExisting:YI},{provide:lg,useExisting:ZI},{provide:eb,useValue:l5,multi:!0},{provide:JI,useValue:!0},{provide:hg,useClass:a5}];for(let t of n)e.push(...t.\u0275providers);return tc(e)}var QI=new ce("LEGACY_INTERCEPTOR_FN");function nM(){return c5(eM.LegacyInterceptors,[{provide:QI,useFactory:e5},{provide:eb,useExisting:QI,multi:!0}])}var ib=class extends Km{constructor(){super(...arguments),this.supportsDOMEvents=!0}},sb=class n extends ib{static makeCurrent(){$A(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=u5();return t==null?null:h5(t)}resetBaseElement(){$h=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Jm(document.cookie,e)}},$h=null;function u5(){return $h=$h||document.querySelector("base"),$h?$h.getAttribute("href"):null}function h5(n){return new URL(n,document.baseURI).pathname}var ob=class{addToWindow(e){Rn.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new _e(5103,!1);return s},Rn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Rn.getAllAngularTestabilities(),s=i.length,o=!1,a=function(l){o=o||l,s--,s==0&&r(o)};i.forEach(l=>{l.whenStable(a)})};Rn.frameworkStabilizers||(Rn.frameworkStabilizers=[]),Rn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?ts().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},d5=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})(),ab=new ce("EventManagerPlugins"),oM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new _e(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(re(ab),re(ze))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})(),dg=class{constructor(e){this._doc=e}},nb="ng-app-id",aM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Lx(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${nb}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(nb),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(nb,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(re(Wt),re(Om),re(sx,8),re(Ki))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})(),rb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cb=/%COMP%/g,lM="%COMP%",f5=`_nghost-${lM}`,p5=`_ngcontent-${lM}`,m5=!0,g5=new ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>m5});function _5(n){return p5.replace(cb,n)}function y5(n){return f5.replace(cb,n)}function cM(n,e){return e.map(t=>t.replace(cb,n))}var rM=(()=>{let e=class e{constructor(r,i,s,o,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Lx(l),this.defaultRenderer=new Wh(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xi.ShadowDom&&(i=W(S({},i),{encapsulation:Xi.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof fg?s.applyToHost(r):s instanceof zh&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Xi.Emulated:o=new fg(c,u,i,this.appId,h,a,l,d);break;case Xi.ShadowDom:return new lb(c,u,r,i,a,l,this.nonce,d);default:o=new zh(c,u,i,h,a,l,d);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(re(oM),re(aM),re(Om),re(g5),re(Wt),re(Ki),re(ze),re(sx))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})(),Wh=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(rb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(iM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(iM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new _e(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=rb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=rb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ns.DashCase|Ns.Important)?e.style.setProperty(t,r,i&Ns.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ns.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=ts().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function iM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var lb=class extends Wh{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=cM(i.id,i.styles);for(let u of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zh=class extends Wh{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?cM(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fg=class extends zh{constructor(e,t,r,i,s,o,a,l){let c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=_5(c),this.hostAttr=y5(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},v5=(()=>{let e=class e extends dg{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(re(Wt))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})(),sM=["alt","control","meta","shift"],x5={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},b5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},w5=(()=>{let e=class e extends dg{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ts().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),sM.forEach(u=>{let h=i.indexOf(u);h>-1&&(i.splice(h,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=x5[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),sM.forEach(a=>{if(a!==s){let l=b5[a];l(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(re(Wt))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})();function uM(n,e){return BA(S({rootComponent:n},T5(e)))}function T5(n){return{appProviders:[...hM,...n?.providers??[]],platformProviders:D5}}function S5(){sb.makeCurrent()}function E5(){return new Yi}function C5(){return sD(document),document}var D5=[{provide:Ki,useValue:QA},{provide:ix,useValue:S5,multi:!0},{provide:Wt,useFactory:C5,deps:[]}];var A5=new ce(""),I5=[{provide:kh,useClass:ob,deps:[]},{provide:Dx,useClass:qm,deps:[ze,Xm,kh]},{provide:qm,useClass:qm,deps:[ze,Xm,kh]}],hM=[{provide:Im,useValue:"root"},{provide:Yi,useFactory:E5,deps:[]},{provide:ab,useClass:v5,multi:!0,deps:[Wt,ze,Ki]},{provide:ab,useClass:w5,multi:!0,deps:[Wt]},rM,aM,oM,{provide:xh,useExisting:rM},{provide:oc,useClass:d5,deps:[]},[]],dM=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Om,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(re(A5,12))},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({providers:[...hM,...I5],imports:[ZA,LA]});let n=e;return n})();function M5(){return new ub(re(Wt))}var ub=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(re(Wt))},e.\u0275prov=ee({token:e,factory:function(i){let s=null;return i?s=new i:s=M5(),s},providedIn:"root"});let n=e;return n})();var Fe="primary",ld=Symbol("RouteTitle"),mb=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function mc(n){return new mb(n)}function R5(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function N5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ns(n[t],e[t]))return!1;return!0}function ns(n,e){let t=n?gb(n):void 0,r=e?gb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!bM(n[i],e[i]))return!1;return!0}function gb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function bM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function wM(n){return n.length>0?n[n.length-1]:null}function No(n){return h0(n)?n:Ra(n)?bt(Promise.resolve(n)):me(n)}var P5={exact:SM,subset:EM},TM={exact:F5,subset:k5,ignored:()=>!0};function fM(n,e,t){return P5[t.paths](n.root,e.root,t.matrixParams)&&TM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function F5(n,e){return ns(n,e)}function SM(n,e,t){if(!Ua(n.segments,e.segments)||!gg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!SM(n.children[r],e.children[r],t))return!1;return!0}function k5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bM(n[t],e[t]))}function EM(n,e,t){return CM(n,e,e.segments,t)}function CM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ua(i,t)||e.hasChildren()||!gg(i,t,r))}else if(n.segments.length===t.length){if(!Ua(n.segments,t)||!gg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!EM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ua(n.segments,i)||!gg(n.segments,i,r)||!n.children[Fe]?!1:CM(n.children[Fe],e,s,r)}}function gg(n,e,t){return e.every((r,i)=>TM[t](n[i].parameters,r.parameters))}var Mo=class{constructor(e=new rt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mc(this.queryParams)),this._queryParamMap}toString(){return V5.serialize(this)}},rt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _g(this)}},Va=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=mc(this.parameters)),this._parameterMap}toString(){return AM(this)}};function L5(n,e){return Ua(n,e)&&n.every((t,r)=>ns(t.parameters,e[r].parameters))}function Ua(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function B5(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Fe&&(t=t.concat(e(i,r)))}),t}var cd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>new Jh)(),providedIn:"root"});let n=e;return n})(),Jh=class{parse(e){let t=new yb(e);return new Mo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qh(e.root,!0)}`,r=G5(e.queryParams),i=typeof e.fragment=="string"?`#${U5(e.fragment)}`:"";return`${t}${r}${i}`}},V5=new Jh;function _g(n){return n.segments.map(e=>AM(e)).join("/")}function qh(n,e){if(!n.hasChildren())return _g(n);if(e){let t=n.children[Fe]?qh(n.children[Fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Fe&&r.push(`${i}:${qh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=B5(n,(r,i)=>i===Fe?[qh(n.children[Fe],!1)]:[`${i}:${qh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Fe]!=null?`${_g(n)}/${t[0]}`:`${_g(n)}/(${t.join("//")})`}}function DM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pg(n){return DM(n).replace(/%3B/gi,";")}function U5(n){return encodeURI(n)}function _b(n){return DM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yg(n){return decodeURIComponent(n)}function pM(n){return yg(n.replace(/\+/g,"%20"))}function AM(n){return`${_b(n.path)}${j5(n.parameters)}`}function j5(n){return Object.keys(n).map(e=>`;${_b(e)}=${_b(n[e])}`).join("")}function G5(n){let e=Object.keys(n).map(t=>{let r=n[t];return Array.isArray(r)?r.map(i=>`${pg(t)}=${pg(i)}`).join("&"):`${pg(t)}=${pg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}var H5=/^[^\/()?;#]+/;function hb(n){let e=n.match(H5);return e?e[0]:""}var $5=/^[^\/()?;=#]+/;function W5(n){let e=n.match($5);return e?e[0]:""}var z5=/^[^=?&#]+/;function q5(n){let e=n.match(z5);return e?e[0]:""}var X5=/^[^&#]+/;function Y5(n){let e=n.match(X5);return e?e[0]:""}var yb=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Fe]=new rt(e,t)),r}parseSegment(){let e=hb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(e),new Va(yg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=W5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=hb(this.remaining);i&&(r=i,this.capture(r))}e[yg(t)]=yg(r)}parseQueryParam(e){let t=q5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=Y5(this.remaining);o&&(r=o,this.capture(r))}let i=pM(t),s=pM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new _e(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Fe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Fe]:new rt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new _e(4011,!1)}};function IM(n){return n.segments.length>0?new rt([],{[Fe]:n}):n}function MM(n){let e={};for(let r of Object.keys(n.children)){let i=n.children[r],s=MM(i);if(r===Fe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new rt(n.segments,e);return Z5(t)}function Z5(n){if(n.numberOfChildren===1&&n.children[Fe]){let e=n.children[Fe];return new rt(n.segments.concat(e.segments),e.children)}return n}function gc(n){return n instanceof Mo}function Q5(n,e,t=null,r=null){let i=OM(n);return RM(i,e,t,r)}function OM(n){let e;function t(s){let o={};for(let l of s.children){let c=t(l);o[l.outlet]=c}let a=new rt(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=IM(r);return e??i}function RM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return db(i,i,i,t,r);let s=K5(e);if(s.toRoot())return db(i,i,new rt([],{}),t,r);let o=J5(s,i,n),a=o.processChildren?Zh(o.segmentGroup,o.index,s.commands):PM(o.segmentGroup,o.index,s.commands);return db(i,o.segmentGroup,a,t,r)}function vg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ed(n){return typeof n=="object"&&n!=null&&n.outlets}function db(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===e?o=t:o=NM(n,e,t);let a=IM(MM(o));return new Mo(a,s,i)}function NM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=NM(s,e,t)}),new rt(n.segments,r)}var xg=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vg(r[0]))throw new _e(4003,!1);let i=r.find(ed);if(i&&i!==wM(r))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function K5(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new xg(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new xg(t,e,r)}var fc=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function J5(n,e,t){if(n.isAbsolute)return new fc(e,!0,0);if(!t)return new fc(e,!1,NaN);if(t.parent===null)return new fc(t,!0,0);let r=vg(n.commands[0])?0:1,i=t.segments.length-1+r;return eW(t,i,n.numberOfDoubleDots)}function eW(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new _e(4005,!1);i=r.segments.length}return new fc(r,!1,i-s)}function tW(n){return ed(n[0])?n[0].outlets:{[Fe]:n}}function PM(n,e,t){if(n||(n=new rt([],{})),n.segments.length===0&&n.hasChildren())return Zh(n,e,t);let r=nW(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new rt(n.segments.slice(0,r.pathIndex),{});return s.children[Fe]=new rt(n.segments.slice(r.pathIndex),n.children),Zh(s,0,i)}else return r.match&&i.length===0?new rt(n.segments,{}):r.match&&!n.hasChildren()?vb(n,e,t):r.match?Zh(n,0,i):vb(n,e,t)}function Zh(n,e,t){if(t.length===0)return new rt(n.segments,{});{let r=tW(t),i={};if(Object.keys(r).some(s=>s!==Fe)&&n.children[Fe]&&n.numberOfChildren===1&&n.children[Fe].segments.length===0){let s=Zh(n.children[Fe],e,t);return new rt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=PM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new rt(n.segments,i)}}function nW(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(ed(a))break;let l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!gM(l,c,o))return s;r+=2}else{if(!gM(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function vb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(ed(s)){let l=rW(s.outlets);return new rt(r,l)}if(i===0&&vg(t[0])){let l=n.segments[e];r.push(new Va(l.path,mM(t[0]))),i++;continue}let o=ed(s)?s.outlets[Fe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&vg(a)?(r.push(new Va(o,mM(a))),i+=2):(r.push(new Va(o,{})),i++)}return new rt(r,{})}function rW(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=vb(new rt([],{}),0,r))}),e}function mM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gM(n,e,t){return n==t.path&&ns(e,t.parameters)}var Qh="imperative",Xr=class{constructor(e,t){this.id=e,this.url=t}},_c=class extends Xr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rs=class extends Xr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Oo=class extends Xr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ro=class extends Xr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}},td=class extends Xr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bg=class extends Xr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xb=class extends Xr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bb=class extends Xr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wb=class extends Xr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tb=class extends Xr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sb=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Eb=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cb=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Db=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ab=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ib=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wg=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},nd=class{},rd=class{constructor(e){this.url=e}};var Mb=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ud,this.attachRef=null}},ud=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Mb,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Tg=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ob(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Ob(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Rb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Rb(e,this._root).map(t=>t.value)}};function Ob(n,e){if(n===e.value)return e;for(let t of e.children){let r=Ob(n,t);if(r)return r}return null}function Rb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Rb(n,t);if(r.length)return r.unshift(e),r}return[]}var Cr=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function dc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Sg=class extends Tg{constructor(e,t){super(e),this.snapshot=t,Gb(this,e)}toString(){return this.snapshot.toString()}};function FM(n,e){let t=iW(n,e),r=new rn([new Va("",{})]),i=new rn({}),s=new rn({}),o=new rn({}),a=new rn(""),l=new is(r,i,o,a,s,Fe,e,t.root);return l.snapshot=t.root,new Sg(new Cr(l,[]),t)}function iW(n,e){let t={},r={},i={},s="",o=new id([],t,i,s,r,Fe,e,null,{});return new Eg("",new Cr(o,[]))}var is=class{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ie(c=>c[ld]))??me(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ie(e=>mc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ie(e=>mc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jb(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:S(S({},e.params),n.params),data:S(S({},e.data),n.data),resolve:S(S(S(S({},n.data),e.data),i?.data),n._resolvedData)}:r={params:S({},n.params),data:S({},n.data),resolve:S(S({},n.data),n._resolvedData??{})},i&&LM(i)&&(r.resolve[ld]=i.title),r}var id=class{get title(){return this.data?.[ld]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mc(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Eg=class extends Tg{constructor(e,t){super(t),this.url=e,Gb(this,t)}toString(){return kM(this._root)}};function Gb(n,e){e.value._routerState=n,e.children.forEach(t=>Gb(n,t))}function kM(n){let e=n.children.length>0?` { ${n.children.map(kM).join(", ")} } `:"";return`${n.value}${e}`}function fb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ns(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ns(e.params,t.params)||n.paramsSubject.next(t.params),N5(e.url,t.url)||n.urlSubject.next(t.url),ns(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Nb(n,e){let t=ns(n.params,e.params)&&L5(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Nb(n.parent,e.parent))}function LM(n){return typeof n.title=="string"||n.title===null}var Hb=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Fe,this.activateEvents=new Nt,this.deactivateEvents=new Nt,this.attachEvents=new Nt,this.detachEvents=new Nt,this.parentContexts=$(ud),this.location=$(es),this.changeDetector=$(Co),this.environmentInjector=$(sn),this.inputBinder=$(Ig,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new _e(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Pb(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$t({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zi]});let n=e;return n})(),Pb=class{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===is?this.route:e===ud?this.childContexts:this.parent.get(e,t)}},Ig=new ce(""),_M=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Nl([i.queryParams,i.params,i.data]).pipe(In(([o,a,l],c)=>(l=S(S(S({},o),a),l),c===0?me(l):Promise.resolve(l)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=VA(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of a.inputs)r.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})();function sW(n,e,t){let r=sd(n,e._root,t?t._root:void 0);return new Sg(r,e)}function sd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=oW(n,e,t);return new Cr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>sd(n,a)),o}}let r=aW(e.value),i=e.children.map(s=>sd(n,s));return new Cr(r,i)}}function oW(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sd(n,r,i);return sd(n,r)})}function aW(n){return new is(new rn(n.url),new rn(n.params),new rn(n.queryParams),new rn(n.fragment),new rn(n.data),n.outlet,n.component,n)}var BM="ngNavigationCancelingError";function VM(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=gc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UM(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function UM(n,e,t){let r=new Error("NavigationCancelingError: "+(n||""));return r[BM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function lW(n){return jM(n)&&gc(n.url)}function jM(n){return n&&n[BM]}var cW=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["ng-component"]],standalone:!0,features:[Bn],decls:1,vars:0,template:function(i,s){i&1&&Wr(0,"router-outlet")},dependencies:[Hb],encapsulation:2});let n=e;return n})();function uW(n,e){return n.providers&&!n._injector&&(n._injector=jm(n.providers,e,`Route: ${n.path}`)),n._injector??e}function $b(n){let e=n.children&&n.children.map($b),t=e?W(S({},n),{children:e}):S({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Fe&&(t.component=cW),t}function ss(n){return n.outlet||Fe}function hW(n,e){let t=n.filter(r=>ss(r)===e);return t.push(...n.filter(r=>ss(r)!==e)),t}function hd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var dW=(n,e,t,r)=>Ie(i=>(new Fb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Fb=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),fb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=dc(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=dc(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=dc(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=dc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ib(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Db(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(fb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),fb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=hd(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Cg=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},pc=class{constructor(e,t){this.component=e,this.route=t}};function fW(n,e,t){let r=n._root,i=e?e._root:null;return Xh(r,i,t,[r.value])}function pW(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function vc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ZE(n)?n:e.get(n):r}function Xh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=dc(e);return n.children.forEach(o=>{mW(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Kh(a,t.getContext(o),i)),i}function mW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=gW(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Cg(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Xh(n,e,a?a.children:null,r,i):Xh(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new pc(a.outlet.component,o))}else o&&Kh(e,a,i),i.canActivateChecks.push(new Cg(r)),s.component?Xh(n,null,a?a.children:null,r,i):Xh(n,null,t,r,i);return i}function gW(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ua(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ua(n.url,e.url)||!ns(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nb(n,e)||!ns(n.queryParams,e.queryParams);case"paramsChange":default:return!Nb(n,e)}}function Kh(n,e,t){let r=dc(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Kh(o,e.children.getContext(s),t):Kh(o,null,t):Kh(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new pc(e.outlet.component,i)):t.canDeactivateChecks.push(new pc(null,i)):t.canDeactivateChecks.push(new pc(null,i))}function dd(n){return typeof n=="function"}function _W(n){return typeof n=="boolean"}function yW(n){return n&&dd(n.canLoad)}function vW(n){return n&&dd(n.canActivate)}function xW(n){return n&&dd(n.canActivateChild)}function bW(n){return n&&dd(n.canDeactivate)}function wW(n){return n&&dd(n.canMatch)}function GM(n){return n instanceof Ds||n?.name==="EmptyError"}var mg=Symbol("INITIAL_VALUE");function yc(){return In(n=>Nl(n.map(e=>e.pipe(hr(1),Up(mg)))).pipe(Ie(e=>{for(let t of e)if(t!==!0){if(t===mg)return mg;if(t===!1||t instanceof Mo)return t}return!0}),en(e=>e!==mg),hr(1)))}function TW(n,e){return Dt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?me(W(S({},t),{guardsResult:!0})):SW(o,r,i,n).pipe(Dt(a=>a&&_W(a)?EW(r,s,n,e):me(a)),Ie(a=>W(S({},t),{guardsResult:a})))})}function SW(n,e,t,r){return bt(n).pipe(Dt(i=>MW(i.component,i.route,t,e,r)),$i(i=>i!==!0,!0))}function EW(n,e,t,r){return bt(e).pipe(As(i=>po(DW(i.route.parent,r),CW(i.route,r),IW(n,i.path,t),AW(n,i.route,t))),$i(i=>i!==!0,!0))}function CW(n,e){return n!==null&&e&&e(new Ab(n)),me(!0)}function DW(n,e){return n!==null&&e&&e(new Cb(n)),me(!0)}function AW(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return me(!0);let i=r.map(s=>Lp(()=>{let o=hd(e)??t,a=vc(s,o),l=vW(a)?a.canActivate(e,n):Qi(o,()=>a(e,n));return No(l).pipe($i())}));return me(i).pipe(yc())}function IW(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>pW(o)).filter(o=>o!==null).map(o=>Lp(()=>{let a=o.guards.map(l=>{let c=hd(o.node)??t,u=vc(l,c),h=xW(u)?u.canActivateChild(r,n):Qi(c,()=>u(r,n));return No(h).pipe($i())});return me(a).pipe(yc())}));return me(s).pipe(yc())}function MW(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return me(!0);let o=s.map(a=>{let l=hd(e)??i,c=vc(a,l),u=bW(c)?c.canDeactivate(n,e,t,r):Qi(l,()=>c(n,e,t,r));return No(u).pipe($i())});return me(o).pipe(yc())}function OW(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return me(!0);let s=i.map(o=>{let a=vc(o,n),l=yW(a)?a.canLoad(e,t):Qi(n,()=>a(e,t));return No(l)});return me(s).pipe(yc(),HM(r))}function HM(n){return o0(Gt(e=>{if(gc(e))throw VM(n,e)}),Ie(e=>e===!0))}function RW(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return me(!0);let s=i.map(o=>{let a=vc(o,n),l=wW(a)?a.canMatch(e,t):Qi(n,()=>a(e,t));return No(l)});return me(s).pipe(yc(),HM(r))}var od=class{constructor(e){this.segmentGroup=e||null}},Dg=class extends Error{constructor(e){super(),this.urlTree=e}};function hc(n){return Ol(new od(n))}function NW(n){return Ol(new _e(4e3,!1))}function PW(n){return Ol(UM(!1,3))}var kb=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return me(r);if(i.numberOfChildren>1||!i.children[Fe])return NW(e.redirectTo);i=i.children[Fe]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Dg(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Mo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new rt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new _e(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Lb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FW(n,e,t,r,i){let s=Wb(n,e,t);return s.matched?(r=uW(e,r),RW(r,e,t,i).pipe(Ie(o=>o===!0?s:S({},Lb)))):me(s)}function Wb(n,e,t){if(e.path==="**")return kW(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?S({},Lb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||R5)(t,n,e);if(!i)return S({},Lb);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?S(S({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function kW(n){return{matched:!0,parameters:n.length>0?wM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yM(n,e,t,r){return t.length>0&&VW(n,t,r)?{segmentGroup:new rt(e,BW(r,new rt(t,n.children))),slicedSegments:[]}:t.length===0&&UW(n,t,r)?{segmentGroup:new rt(n.segments,LW(n,e,t,r,n.children)),slicedSegments:t}:{segmentGroup:new rt(n.segments,n.children),slicedSegments:t}}function LW(n,e,t,r,i){let s={};for(let o of r)if(Mg(n,t,o)&&!i[ss(o)]){let a=new rt([],{});s[ss(o)]=a}return S(S({},i),s)}function BW(n,e){let t={};t[Fe]=e;for(let r of n)if(r.path===""&&ss(r)!==Fe){let i=new rt([],{});t[ss(r)]=i}return t}function VW(n,e,t){return t.some(r=>Mg(n,e,r)&&ss(r)!==Fe)}function UW(n,e,t){return t.some(r=>Mg(n,e,r))}function Mg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function jW(n,e,t,r){return ss(n)!==r&&(r===Fe||!Mg(e,t,n))?!1:Wb(e,n,t).matched}function GW(n,e,t){return e.length===0&&!n.children[t]}var Bb=class{};function HW(n,e,t,r,i,s,o="emptyOnly"){return new Vb(n,e,t,r,i,o,s).recognize()}var $W=31,Vb=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new kb(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new _e(4002,`'${e.segmentGroup}'`)}recognize(){let e=yM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ie(t=>{let r=new id([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fe,this.rootComponentType,null,{}),i=new Cr(r,t),s=new Eg("",i),o=Q5(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Fe).pipe(mo(r=>{if(r instanceof Dg)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof od?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=jb(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(Ie(s=>s instanceof Cr?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return bt(i).pipe(As(s=>{let o=r.children[s],a=hW(t,s);return this.processSegmentGroup(e,a,o,s)}),y0((s,o)=>(s.push(...o),s)),go(null),_0(),Dt(s=>{if(s===null)return hc(r);let o=$M(s);return WW(o),me(o)}))}processSegment(e,t,r,i,s,o){return bt(t).pipe(As(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(mo(l=>{if(l instanceof od)return me(null);throw l}))),$i(a=>!!a),mo(a=>{if(GM(a))return GW(r,i,s)?me(new Bb):hc(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return jW(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):hc(i):hc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=Wb(t,i,s);if(!a)return hc(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$W&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,h).pipe(Dt(d=>this.processSegment(e,r,t,d.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let o=FW(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),o.pipe(In(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(In(({routes:l})=>{let c=r._loadedInjector??e,{consumedSegments:u,remainingSegments:h,parameters:d}=a,f=new id(u,d,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,qW(r),ss(r),r.component??r._loadedComponent??null,r,XW(r)),{segmentGroup:p,slicedSegments:m}=yM(t,u,h,l);if(m.length===0&&p.hasChildren())return this.processChildren(c,l,p).pipe(Ie(_=>_===null?null:new Cr(f,_)));if(l.length===0&&m.length===0)return me(new Cr(f,[]));let g=ss(r)===s;return this.processSegment(c,l,p,m,g?Fe:s,!0).pipe(Ie(_=>new Cr(f,_ instanceof Cr?[_]:[])))}))):hc(t)))}getChildConfig(e,t,r){return t.children?me({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?me({routes:t._loadedRoutes,injector:t._loadedInjector}):OW(e,t,r,this.urlSerializer).pipe(Dt(i=>i?this.configLoader.loadChildren(e,t).pipe(Gt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):PW(t))):me({routes:[],injector:e})}};function WW(n){n.sort((e,t)=>e.value.outlet===Fe?-1:t.value.outlet===Fe?1:e.value.outlet.localeCompare(t.value.outlet))}function zW(n){let e=n.value.routeConfig;return e&&e.path===""}function $M(n){let e=[],t=new Set;for(let r of n){if(!zW(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=$M(r.children);e.push(new Cr(r.value,i))}return e.filter(r=>!t.has(r))}function qW(n){return n.data||{}}function XW(n){return n.resolve||{}}function YW(n,e,t,r,i,s){return Dt(o=>HW(n,e,t,r,o.extractedUrl,i,s).pipe(Ie(({state:a,tree:l})=>W(S({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function ZW(n,e){return Dt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return me(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of WM(l))o.add(c);let a=0;return bt(o).pipe(As(l=>s.has(l)?QW(l,r,n,e):(l.data=jb(l,l.parent,n).resolve,me(void 0))),Gt(()=>a++),Fl(1),Dt(l=>a===o.size?me(t):Dn))})}function WM(n){let e=n.children.map(t=>WM(t)).flat();return[n,...e]}function QW(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!LM(i)&&(s[ld]=i.title),KW(s,n,e,r).pipe(Ie(o=>(n._resolvedData=o,n.data=jb(n,n.parent,t).resolve,null)))}function KW(n,e,t,r){let i=gb(n);if(i.length===0)return me({});let s={};return bt(i).pipe(Dt(o=>JW(n[o],e,t,r).pipe($i(),Gt(a=>{s[o]=a}))),Fl(1),m0(s),mo(o=>GM(o)?Dn:Ol(o)))}function JW(n,e,t,r){let i=hd(e)??r,s=vc(n,i),o=s.resolve?s.resolve(e,t):Qi(i,()=>s(e,t));return No(o)}function pb(n){return In(e=>{let t=n(e);return t?bt(t).pipe(Ie(()=>e)):me(e)})}var zM=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===Fe);return i}getResolvedTitleForRoute(r){return r.data[ld]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(ez))(),providedIn:"root"});let n=e;return n})(),ez=(()=>{let e=class e extends zM{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(re(ub))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),fd=new ce("",{providedIn:"root",factory:()=>({})}),ad=new ce("ROUTES"),zb=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(zm)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return me(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=No(r.loadComponent()).pipe(Ie(qM),Gt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Is(()=>{this.componentLoaders.delete(r)})),s=new Al(i,()=>new St).pipe(Dl());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return me({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=tz(i,this.compiler,r,this.onLoadEndListener).pipe(Is(()=>{this.childrenLoaders.delete(i)})),a=new Al(o,()=>new St).pipe(Dl());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function tz(n,e,t,r){return No(n.loadChildren()).pipe(Ie(qM),Dt(i=>i instanceof Sh||Array.isArray(i)?me(i):bt(e.compileModuleAsync(i))),Ie(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(ad,[],{optional:!0,self:!0}).flat()),{routes:o.map($b),injector:s}}))}function nz(n){return n&&typeof n=="object"&&"default"in n}function qM(n){return nz(n)?n.default:n}var qb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(rz))(),providedIn:"root"});let n=e;return n})(),rz=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),XM=new ce(""),YM=new ce("");function iz(n,e,t){let r=n.get(YM),i=n.get(Wt);return n.get(ze).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),sz(n))),{onViewTransitionCreated:l}=r;return l&&Qi(n,()=>l({transition:a,from:e,to:t})),o})}function sz(n){return new Promise(e=>{wx(e,{injector:n})})}var Xb=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new St,this.transitionAbortSubject=new St,this.configLoader=$(zb),this.environmentInjector=$(sn),this.urlSerializer=$(cd),this.rootContexts=$(ud),this.location=$(ac),this.inputBindingEnabled=$(Ig,{optional:!0})!==null,this.titleStrategy=$(zM),this.options=$(fd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(qb),this.createViewTransition=$(XM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>me(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Sb(s)),i=s=>this.events.next(new Eb(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(W(S(S({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new rn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qh,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(en(o=>o.id!==0),Ie(o=>W(S({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),In(o=>{this.currentTransition=o;let a=!1,l=!1;return me(o).pipe(Gt(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?W(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),In(c=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&h!=="reload"){let d="";return this.events.next(new Ro(c.id,this.urlSerializer.serialize(c.rawUrl),d,0)),c.resolve(null),Dn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return me(c).pipe(In(d=>{let f=this.transitions?.getValue();return this.events.next(new _c(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?Dn:Promise.resolve(d)}),YW(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Gt(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=W(S({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new bg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:p,restoredState:m,extras:g}=c,_=new _c(d,this.urlSerializer.serialize(f),p,m);this.events.next(_);let v=FM(f,this.rootComponentType).snapshot;return this.currentTransition=o=W(S({},c),{targetSnapshot:v,urlAfterRedirects:f,extras:W(S({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,me(o)}else{let d="";return this.events.next(new Ro(c.id,this.urlSerializer.serialize(c.extractedUrl),d,1)),c.resolve(null),Dn}}),Gt(c=>{let u=new xb(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ie(c=>(this.currentTransition=o=W(S({},c),{guards:fW(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),TW(this.environmentInjector,c=>this.events.next(c)),Gt(c=>{if(o.guardsResult=c.guardsResult,gc(c.guardsResult))throw VM(this.urlSerializer,c.guardsResult);let u=new bb(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),en(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",3),!1)),pb(c=>{if(c.guards.canActivateChecks.length)return me(c).pipe(Gt(u=>{let h=new wb(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),In(u=>{let h=!1;return me(u).pipe(ZW(this.paramsInheritanceStrategy,this.environmentInjector),Gt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",2)}}))}),Gt(u=>{let h=new Tb(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),pb(c=>{let u=h=>{let d=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(h.routeConfig).pipe(Gt(f=>{h.component=f}),Ie(()=>{})));for(let f of h.children)d.push(...u(f));return d};return Nl(u(c.targetSnapshot.root)).pipe(go(null),hr(1))}),pb(()=>this.afterPreactivation()),In(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return h?bt(h).pipe(Ie(()=>o)):me(o)}),Ie(c=>{let u=sW(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=W(S({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Gt(()=>{this.events.next(new nd)}),dW(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),hr(1),Gt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Mn(this.transitionAbortSubject.pipe(Gt(c=>{throw c}))),Is(()=>{if(!a&&!l){let c="";this.cancelNavigationTransition(o,c,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),mo(c=>{if(l=!0,jM(c))this.events.next(new Oo(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),lW(c)?this.events.next(new rd(c.url)):o.resolve(!1);else{this.events.next(new td(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(u){o.reject(u)}}return Dn}))}))}cancelNavigationTransition(r,i,s){let o=new Oo(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function oz(n){return n!==Qh}var az=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(lz))(),providedIn:"root"});let n=e;return n})(),Ub=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},lz=(()=>{let e=class e extends Ub{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ec(e)))(s||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ZM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(cz))(),providedIn:"root"});let n=e;return n})(),cz=(()=>{let e=class e extends ZM{constructor(){super(...arguments),this.location=$(ac),this.urlSerializer=$(cd),this.options=$(fd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(qb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FM(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof _c)this.stateMemento=this.createStateMemento();else if(r instanceof Ro)this.rawUrlTree=i.initialUrl;else if(r instanceof bg){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof nd?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Oo&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof td?this.restoreHistory(i,!0):r instanceof rs&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=S(S({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=S(S({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ec(e)))(s||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Yh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Yh||{});function QM(n,e){n.events.pipe(en(t=>t instanceof rs||t instanceof Oo||t instanceof td||t instanceof Ro),Ie(t=>t instanceof rs||t instanceof Ro?Yh.COMPLETE:(t instanceof Oo?t.code===0||t.code===1:!1)?Yh.REDIRECTING:Yh.FAILED),en(t=>t!==Yh.REDIRECTING),hr(1)).subscribe(()=>{e()})}function uz(n){throw n}var hz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Us=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=$(Wm),this.stateManager=$(ZM),this.options=$(fd,{optional:!0})||{},this.pendingTasks=$(Pa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(Xb),this.urlSerializer=$(cd),this.location=$(ac),this.urlHandlingStrategy=$(qb),this._events=new St,this.errorHandler=this.options.errorHandler||uz,this.navigated=!1,this.routeReuseStrategy=$(az),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(ad,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(Ig,{optional:!0}),this.eventsSubscription=new jt,this.isNgZoneEnabled=$(ze)instanceof ze&&ze.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Oo&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof rs)this.navigated=!0;else if(i instanceof rd){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||oz(s.source)};this.scheduleNavigation(a,Qh,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}pz(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=S({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map($b),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a,h=null;switch(l){case"merge":h=S(S({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let d;try{let f=s?s.snapshot:this.routerState.snapshot.root;d=OM(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return RM(d,r,h,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=gc(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Qh,null,i)}navigate(r,i={skipLocationChange:!1}){return fz(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=S({},hz):i===!1?s=S({},dz):s=i,gc(r))return fM(this.currentUrlTree,r,s);let o=this.parseUrl(r);return fM(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{let o=r[s];return o!=null&&(i[s]=o),i},{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((d,f)=>{l=d,c=f});let h=this.pendingTasks.add();return QM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function fz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new _e(4008,!1)}function pz(n){return!(n instanceof nd)&&!(n instanceof rd)}var KM=(()=>{let e=class e{constructor(r,i,s,o,a,l){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new St,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof rs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:OD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(Pe(Us),Pe(is),Dm("tabindex"),Pe(Ma),Pe(Ln),Pe(Bs))},e.\u0275dir=$t({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&wt("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&$r("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Fa],skipLocationChange:["skipLocationChange","skipLocationChange",Fa],replaceUrl:["replaceUrl","replaceUrl",Fa],routerLink:"routerLink"},standalone:!0,features:[Sx,Zi]});let n=e;return n})();var Ag=class{};var mz=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(en(r=>r instanceof rs),As(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=jm(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return bt(s).pipe(Pl())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=me(null);let o=s.pipe(Dt(a=>a===null?me(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return bt([o,a]).pipe(Pl())}else return o})}};e.\u0275fac=function(i){return new(i||e)(re(Us),re(zm),re(sn),re(Ag),re(zb))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),JM=new ce(""),gz=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof _c?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof rs?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Ro&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof wg&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wg(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){BD()},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let n=e;return n})();function eO(n,...e){return tc([{provide:ad,multi:!0,useValue:n},[],{provide:is,useFactory:tO,deps:[Us]},{provide:Lh,multi:!0,useFactory:nO},e.map(t=>t.\u0275providers)])}function tO(n){return n.routerState.root}function pd(n,e){return{\u0275kind:n,\u0275providers:e}}function nO(){let n=$(pr);return e=>{let t=n.get(ks);if(e!==t.components[0])return;let r=n.get(Us),i=n.get(rO);n.get(Yb)===1&&r.initialNavigation(),n.get(iO,null,Be.Optional)?.setUpPreloading(),n.get(JM,null,Be.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rO=new ce("",{factory:()=>new St}),Yb=new ce("",{providedIn:"root",factory:()=>1});function _z(){return pd(2,[{provide:Yb,useValue:0},{provide:Ym,multi:!0,deps:[pr],useFactory:e=>{let t=e.get(WA,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Us),s=e.get(rO);QM(i,()=>{r(!0)}),e.get(Xb).afterPreactivation=()=>(r(!0),s.closed?me(void 0):s),i.initialNavigation()}))}}])}function yz(){return pd(3,[{provide:Ym,multi:!0,useFactory:()=>{let e=$(Us);return()=>{e.setUpLocationChangeListener()}}},{provide:Yb,useValue:2}])}var iO=new ce("");function vz(n){return pd(0,[{provide:iO,useExisting:mz},{provide:Ag,useExisting:n}])}function xz(){return pd(8,[_M,{provide:Ig,useExisting:_M}])}function bz(n){let e=[{provide:XM,useValue:iz},{provide:YM,useValue:S({skipNextTransition:!!n?.skipInitialTransition},n)}];return pd(9,e)}var vM=new ce("ROUTER_FORROOT_GUARD"),wz=[ac,{provide:cd,useClass:Jh},Us,ud,{provide:is,useFactory:tO,deps:[Us]},zb,[]],ja=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[wz,[],{provide:ad,multi:!0,useValue:r},{provide:vM,useFactory:Cz,deps:[[Us,new Am,new tx]]},{provide:fd,useValue:i||{}},i?.useHash?Sz():Ez(),Tz(),i?.preloadingStrategy?vz(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Dz(i):[],i?.bindToComponentInputs?xz().\u0275providers:[],i?.enableViewTransitions?bz().\u0275providers:[],Az()]}}static forChild(r){return{ngModule:e,providers:[{provide:ad,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(re(vM,8))},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({});let n=e;return n})();function Tz(){return{provide:JM,useFactory:()=>{let n=$(KA),e=$(ze),t=$(fd),r=$(Xb),i=$(cd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gz(i,r,n,e,t)}}}function Sz(){return{provide:Bs,useClass:qA}}function Ez(){return{provide:Bs,useClass:kx}}function Cz(n){return"guarded"}function Dz(n){return[n.initialNavigation==="disabled"?yz().\u0275providers:[],n.initialNavigation==="enabledBlocking"?_z().\u0275providers:[]]}var xM=new ce("");function Az(){return[{provide:xM,useFactory:nO},{provide:Lh,multi:!0,useExisting:xM}]}var sO=(()=>{let e=class e{constructor(r){this.http=r,this.currentpage=1,this.midifiles=[],this.rootPath="https://localhost:44356/"}getlist(){return this.http.get(this.rootPath+"api/MidiDataApi/getall")}getlistpage(r,i){this.currentpage=r;let s=this.rootPath+"api/MidiDataApi/getpage?pagenum="+r+"&itemsPerPage="+i;return console.log("path",s),this.http.get(s)}};e.\u0275fac=function(i){return new(i||e)(re(Ba))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Mz(n,e){n&1&&(ue(0,"p"),Ye(1,"Loading..."),oe())}var Oz=n=>["mididetails",n];function Rz(n,e){if(n&1&&(ue(0,"tr")(1,"td"),Ye(2),oe(),ue(3,"td"),Ye(4),oe(),ue(5,"td"),Ye(6),oe(),ue(7,"td")(8,"button",2),Ye(9,"details"),oe()()()),n&2){let t=e.$implicit;Ae(2),Na(t.filePath),Ae(2),Na(t.fileNumber),Ae(2),Na(t.composer),Ae(2),ct("routerLink",Fh(4,Oz,t.id))}}function Nz(n,e){if(n&1&&(ue(0,"table")(1,"thead")(2,"tr")(3,"th"),Ye(4,"filePath"),oe(),ue(5,"th"),Ye(6,"song number"),oe(),ue(7,"th"),Ye(8,"composer"),oe(),Wr(9,"th"),oe()(),ue(10,"tbody"),Pt(11,Rz,10,6,"tr",6),oe()()),n&2){let t=ut();Ae(11),ct("ngForOf",t.midifiles)}}var Pz=()=>["uploadmidi"],oO=(()=>{let e=class e{constructor(r){this.getMidiListService=r,this.midifiles=[],this.rootPath="https://localhost:7296/",this.currentpage=1,this.totalmidifiles=1270,this.itemsperpage=60,this.title="FrontendANG"}ngOnInit(){this.currentpage=this.getMidiListService.currentpage,this.getMidiList()}getMidiList(){this.getMidiListService.getlistpage(this.currentpage,this.itemsperpage).subscribe(r=>{r&&(this.midifiles=r)})}play(r){console.log(this.rootPath+"MidiData/maestro/"+r.filePath)}};e.\u0275fac=function(i){return new(i||e)(Pe(sO))},e.\u0275cmp=kn({type:e,selectors:[["app-midi-list"]],standalone:!0,features:[Bn],decls:10,vars:9,consts:[[1,"title"],[1,"topbuttons"],[1,"mybutton",3,"routerLink"],[1,"paginator"],["aria-label","Default pagination",1,"pagination",3,"collectionSize","pageSize","maxSize","rotate","page","pageChange"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(i,s){i&1&&(ue(0,"h1",0),Ye(1,"Midi files"),oe(),ue(2,"div",1)(3,"td")(4,"button",2),Ye(5,"upload midi file"),oe()()(),ue(6,"div",3)(7,"ngb-pagination",4),wt("pageChange",function(a){return s.currentpage=a})("pageChange",function(){return s.getMidiList()}),oe()(),Pt(8,Mz,2,0,"p",5)(9,Nz,12,1,"table",5)),i&2&&(Ae(4),ct("routerLink",MA(8,Pz)),Ae(3),ct("collectionSize",s.totalmidifiles)("pageSize",s.itemsperpage)("maxSize",5)("rotate",!0)("page",s.currentpage),Ae(1),ct("ngIf",!s.midifiles),Ae(1),ct("ngIf",s.midifiles))},dependencies:[NI,lc,XA,ja,KM],styles:["tr[_ngcontent-%COMP%]:nth-child(2n){background:#666fbe}tr[_ngcontent-%COMP%]:nth-child(odd){background:#8189ce;border-top-style:solid;border-top-width:1px;border-bottom-style:solid;border-bottom-width:1px;border-color:#cfd2f5}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}table[_ngcontent-%COMP%]{margin:0 auto;border-style:solid;border-width:1px;border-color:#7e7e7e}.title[_ngcontent-%COMP%]{color:#fff;border-style:none;margin:0}.mybutton[_ngcontent-%COMP%]{color:#fff;background-color:#172e44;border-style:solid;border-radius:5px;border-width:1px;padding-left:10px;padding-right:10px}.topbuttons[_ngcontent-%COMP%]{background:rgb(27,54,78);border-top-style:solid;border-top-width:1px;border-bottom-style:solid;border-bottom-width:1px;border-color:#cfd2f5;margin-top:10px;margin-bottom:10px;padding-top:3px;padding-bottom:3px}"]});let n=e;return n})();var md=(()=>{let e=class e{constructor(r){this.http=r,this.url="https://localhost:44356/api/DownloadUpload"}upload(r){return console.log(this.url+"/upload/"+r),this.http.post(this.url+"/upload/",r,{reportProgress:!0,observe:"events"})}download(r){var i=this.url+"/download?fileUrl=MidiData\\maestro\\"+r;return console.log("testUrl",i),this.http.get(i,{responseType:"arraybuffer"})}downloadArrayBufferUrl(r){return console.log("downloadbyurl",r),this.http.get(r,{responseType:"arraybuffer"})}};e.\u0275fac=function(i){return new(i||e)(re(Ba))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Fz(n,e){if(n&1&&(ue(0,"span",10),Ye(1),oe()),n&2){let t=ut();Ae(1),Ci(" ",t.progress,"% ")}}function kz(n,e){if(n&1&&(ue(0,"span",10),Ye(1),oe()),n&2){let t=ut();Ae(1),Ci(" ",t.message," ")}}function Lz(n,e){if(n&1&&(ue(0,"span",10),Ye(1),oe()),n&2){let t=ut();Ae(1),Ci(" ",t.progress,"% ")}}function Bz(n,e){if(n&1&&(ue(0,"span",10),Ye(1),oe()),n&2){let t=ut();Ae(1),Ci(" ",t.message," ")}}var aO=(()=>{let e=class e{constructor(r){this.transferService=r,this.progress=0,this.composer="",this.year=2024,this.title="",this.onUploadFinished=new Nt,this.uploadFile=i=>{if(i==null||i.length===0)return;let s=i[0],o=new FormData;o.append("file",s,s.name),this.transferService.upload(o).subscribe({next:a=>{a.type===Vs.UploadProgress?a.total!=null&&(this.progress=Math.round(100*a.loaded/a.total)):a.type===Vs.Response&&(this.message="Upload success.",this.onUploadFinished.emit(a.body))},error:a=>console.log(a)})}}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(Pe(md))},e.\u0275cmp=kn({type:e,selectors:[["app-upload"]],outputs:{onUploadFinished:"onUploadFinished"},standalone:!0,features:[Bn],decls:47,vars:7,consts:[[1,"title"],[1,"row",2,"margin-bottom","15px"],[1,"topbuttons"],["id","table"],["type","file","placeholder","Select file",2,"display","none",3,"change"],["file",""],["type","button",1,"mybutton",3,"click"],["class","mybutton",4,"ngIf"],["type","text",1,"mybutton",3,"ngModel","ngModelChange"],[2,"width","100%"],[1,"mybutton"]],template:function(i,s){if(i&1){let o=Do();ue(0,"h1",0),Ye(1,"Upload Midi"),oe(),ue(2,"div",1)(3,"div",2)(4,"table",3)(5,"td")(6,"tr")(7,"td")(8,"p"),Ye(9,"Midi: "),oe()(),ue(10,"td")(11,"input",4,5),wt("change",function(){Ti(o);let l=Er(12);return Si(s.uploadFile(l.files))}),oe(),ue(13,"button",6),wt("click",function(){Ti(o);let l=Er(12);return Si(l.click())}),Ye(14,"Select File"),oe(),Pt(15,Fz,2,1,"span",7)(16,kz,2,1,"span",7),oe()(),ue(17,"tr")(18,"td")(19,"p"),Ye(20,"Composer Picture: "),oe()(),ue(21,"td")(22,"input",4,5),wt("change",function(){Ti(o);let l=Er(12);return Si(s.uploadFile(l.files))}),oe(),ue(24,"button",6),wt("click",function(){Ti(o);let l=Er(12);return Si(l.click())}),Ye(25,"Select File"),oe(),Pt(26,Lz,2,1,"span",7)(27,Bz,2,1,"span",7),oe()(),ue(28,"tr")(29,"td")(30,"p"),Ye(31,"Composer: "),oe()(),ue(32,"td")(33,"input",8),wt("ngModelChange",function(l){return s.composer=l}),oe()()(),ue(34,"tr")(35,"td")(36,"p"),Ye(37,"Title: "),oe()(),ue(38,"td")(39,"input",8),wt("ngModelChange",function(l){return s.title=l}),oe()()(),ue(40,"tr")(41,"td")(42,"p"),Ye(43,"Year: "),oe()(),ue(44,"td")(45,"input",8),wt("ngModelChange",function(l){return s.year=l}),oe()()()(),Wr(46,"td",9),oe()()()}i&2&&(Ae(15),ct("ngIf",s.progress>0),Ae(1),ct("ngIf",s.message),Ae(10),ct("ngIf",s.progress>0),Ae(1),ct("ngIf",s.message),Ae(6),ct("ngModel",s.composer),Ae(6),ct("ngModel",s.title),Ae(6),ct("ngModel",s.year))},dependencies:[lc,vI,rg,gI,Hx],styles:[".mybutton[_ngcontent-%COMP%]{margin-left:10px;color:#fff;background-color:#172e44;border-style:solid;border-radius:5px;border-width:1px;padding-left:10px;padding-right:10px}.title[_ngcontent-%COMP%]{color:#fff;border-style:none;margin:0}#table[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;border-collapse:collapse;width:100%}#table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}#table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;text-align:left;background-color:#04aa6d;color:#fff}#table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#666fbe;padding-right:10px}#table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background:#8189ce;border-top-style:solid;border-top-width:1px;border-bottom-style:solid;border-bottom-width:1px;border-color:#cfd2f5;padding-right:10px}"]});let n=e;return n})();var s9=pa(l1());var gd="14.7.77";var mr=pa(h1());var jO=()=>new DOMException("","AbortError");var GO=n=>(e,t,[r,i,s],o)=>{n(e[i],[t,r,s],a=>a[0]===t&&a[1]===r,o)};var HO=n=>(e,t,r)=>{let i=[];for(let s=0;s<r.numberOfInputs;s+=1)i.push(new Set);n.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})};var $O=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})};var os=new WeakSet,Gg=new WeakMap,Tc=new WeakMap,Hg=new WeakMap,Dd=new WeakMap,Sc=new WeakMap,$g=new WeakMap,Ad=new WeakMap,Id=new WeakMap,Md=new WeakMap;var WO={construct(){return WO}},zO=n=>{try{let e=new Proxy(n,WO);new e}catch{return!1}return!0};var qO=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,d1=(n,e)=>{let t=[],r=n.replace(/^[\s]+/,""),i=r.match(qO);for(;i!==null;){let s=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,e).toString());t.push(o),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(qO)}return[t.join(";"),r]};var XO=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},YO=n=>{if(!zO(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},ZO=(n,e,t,r,i,s,o,a,l,c,u,h,d)=>{let f=0;return(p,m,g={credentials:"omit"})=>{let _=u.get(p);if(_!==void 0&&_.has(m))return Promise.resolve();let v=c.get(p);if(v!==void 0){let T=v.get(m);if(T!==void 0)return T}let y=s(p),x=y.audioWorklet===void 0?i(m).then(([T,C])=>{let[b,w]=d1(T,C),P=`${b};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${w}
})})(window,'_AWGS')`;return t(P)}).then(()=>{let T=d._AWGS.pop();if(T===void 0)throw new SyntaxError;r(y.currentTime,y.sampleRate,()=>T(class{},void 0,(C,b)=>{if(C.trim()==="")throw e();let w=Id.get(y);if(w!==void 0){if(w.has(C))throw e();YO(b),XO(b.parameterDescriptors),w.set(C,b)}else YO(b),XO(b.parameterDescriptors),Id.set(y,new Map([[C,b]]))},y.sampleRate,void 0,void 0))}):Promise.all([i(m),Promise.resolve(n(h,h))]).then(([[T,C],b])=>{let w=f+1;f=w;let[P,U]=d1(T,C),E=`${P};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${b?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${b?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${b?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${w}',class extends AudioWorkletProcessor{process(){return !1}})`,O=new Blob([E],{type:"application/javascript; charset=utf-8"}),k=URL.createObjectURL(O);return y.audioWorklet.addModule(k,g).then(()=>{if(a(y))return y;let A=o(y);return A.audioWorklet.addModule(k,g).then(()=>A)}).then(A=>{if(l===null)throw new SyntaxError;try{new l(A,`__sac${w}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(k))});return v===void 0?c.set(p,new Map([[m,x]])):v.set(m,x),x.then(()=>{let T=u.get(p);T===void 0?u.set(p,new Set([m])):T.add(m)}).finally(()=>{let T=c.get(p);T!==void 0&&T.delete(m)}),x}};var Qt=(n,e)=>{let t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t};var ko=(n,e)=>{let t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");let[r]=t;return n.delete(r),r};var Wg=(n,e,t,r)=>{let i=Qt(n,e),s=ko(i,o=>o[0]===t&&o[1]===r);return i.size===0&&n.delete(e),s};var as=n=>Qt($g,n);var Di=n=>{if(os.has(n))throw new Error("The AudioNode is already stored.");os.add(n),as(n).forEach(e=>e(!0))};var zg=n=>"port"in n;var ls=n=>{if(!os.has(n))throw new Error("The AudioNode is not stored.");os.delete(n),as(n).forEach(e=>e(!1))};var Od=(n,e)=>{!zg(n)&&e.every(t=>t.size===0)&&ls(n)};var QO=(n,e,t,r,i,s,o,a,l,c,u,h,d)=>{let f=new WeakMap;return(p,m,g,_,v)=>{let{activeInputs:y,passiveInputs:x}=s(m),{outputs:T}=s(p),C=a(p),b=w=>{let P=l(m),U=l(p);if(w){let R=Wg(x,p,g,_);n(y,p,R,!1),!v&&!h(p)&&t(U,P,g,_),d(m)&&Di(m)}else{let R=r(y,p,g,_);e(x,_,R,!1),!v&&!h(p)&&i(U,P,g,_);let I=o(m);if(I===0)u(m)&&Od(m,y);else{let M=f.get(m);M!==void 0&&clearTimeout(M),f.set(m,setTimeout(()=>{u(m)&&Od(m,y)},I*1e3))}}};return c(T,[m,g,_],w=>w[0]===m&&w[1]===g&&w[2]===_,!0)?(C.add(b),u(p)?n(y,p,[g,_,b],!0):e(x,_,[p,g,b],!0),!0):!1}};var KO=n=>(e,t,[r,i,s],o)=>{let a=e.get(r);a===void 0?e.set(r,new Set([[i,t,s]])):n(a,[i,t,s],l=>l[0]===i&&l[1]===t,o)};var JO=n=>(e,t)=>{let r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);let i=()=>{t.removeEventListener("ended",i),t.disconnect(r),r.disconnect()};t.addEventListener("ended",i)};var eR=n=>(e,t)=>{n(e).add(t)};var Y6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},tR=(n,e,t,r,i,s)=>class extends n{constructor(a,l){let c=i(a),u=S(S({},Y6),l),h=r(c,u),d=s(c)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){let l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){let l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}};var Qe=(n,e)=>n.context===e;var nR=(n,e,t)=>()=>{let r=new WeakMap,i=(s,o)=>L(void 0,null,function*(){let a=e(s);if(!Qe(a,o)){let c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,c)}return r.set(o,a),yield t(s,o,a),a});return{render(s,o){let a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}};var Ec=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};var Qr=()=>new DOMException("","IndexSizeError");var Cc=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(r){throw r.code===12?Qr():r}})(n.getChannelData)};var Z6={numberOfChannels:1},rR=(n,e,t,r,i,s,o,a)=>{let l=null;return class iR{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:h,numberOfChannels:d,sampleRate:f}=S(S({},Z6),u);l===null&&(l=new i(1,1,44100));let p=r!==null&&e(s,s)?new r({length:h,numberOfChannels:d,sampleRate:f}):l.createBuffer(d,h,f);if(p.numberOfChannels===0)throw t();return typeof p.copyFromChannel!="function"?(o(p),Cc(p)):e(Ec,()=>Ec(p))||a(p),n.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===iR.prototype||n.has(u)}}};var zt=-34028234663852886e22,Ft=-zt;var Kn=n=>os.has(n);var Q6={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},sR=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){let h=s(c),d=S(S({},Q6),u),f=i(h,d),p=o(h),m=p?e():null;super(c,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,p,f.playbackRate,Ft,zt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=u;let h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?c:h}get playbackRate(){return this._playbackRate}start(c=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(c,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[c,u]:[c,u,h]),this.context.state!=="closed"){Di(this);let d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Kn(this)&&ls(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}};var oR=(n,e,t,r,i)=>()=>{let s=new WeakMap,o=null,a=null,l=(c,u)=>L(void 0,null,function*(){let h=t(c),d=Qe(h,u);if(!d){let f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return s.set(u,h),d?yield n(u,c.playbackRate,h.playbackRate):yield r(u,c.playbackRate,h.playbackRate),yield i(c,u,h),h});return{set start(c){o=c},set stop(c){a=c},render(c,u){let h=s.get(u);return h!==void 0?Promise.resolve(h):l(c,u)}}};var aR=n=>"playbackRate"in n;var lR=n=>"frequency"in n&&"gain"in n;var cR=n=>"offset"in n;var uR=n=>!("frequency"in n)&&"gain"in n;var hR=n=>"detune"in n&&"frequency"in n;var dR=n=>"pan"in n;var nn=n=>Qt(Gg,n);var Lo=n=>Qt(Hg,n);var qg=(n,e)=>{let{activeInputs:t}=nn(n);t.forEach(i=>i.forEach(([s])=>{e.includes(n)||qg(s,[...e,n])}));let r=aR(n)?[n.playbackRate]:zg(n)?Array.from(n.parameters.values()):lR(n)?[n.Q,n.detune,n.frequency,n.gain]:cR(n)?[n.offset]:uR(n)?[n.gain]:hR(n)?[n.detune,n.frequency]:dR(n)?[n.pan]:[];for(let i of r){let s=Lo(i);s!==void 0&&s.activeInputs.forEach(([o])=>qg(o,e))}Kn(n)&&ls(n)};var Bo=n=>{qg(n.destination,[])};var Xg=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback");var fR=(n,e,t,r,i,s,o,a,l)=>class extends n{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new l(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?t():p}if(h===null)throw r();if(!Xg(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);let{latencyHint:d}=u,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,l.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";let p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Bo(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{let d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}};var pR=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){let h=s(c),d=o(h),f=i(h,u,d),p=d?e(a):null;super(c,!1,f,p),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};var mR=n=>{let e=new WeakMap,t=(r,i)=>L(void 0,null,function*(){let s=i.destination;return e.set(i,s),yield n(r,i,s),s});return{render(r,i){let s=e.get(i);return s!==void 0?Promise.resolve(s):t(r,i)}}};var gR=(n,e,t,r,i,s,o,a)=>(l,c)=>{let u=c.listener,h=()=>{let T=new Float32Array(1),C=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),b=o(c),w=!1,P=[0,0,-1,0,1,0],U=[0,0,0],R=()=>{if(w)return;w=!0;let O=r(c,256,9,0);O.onaudioprocess=({inputBuffer:k})=>{let A=[s(k,T,0),s(k,T,1),s(k,T,2),s(k,T,3),s(k,T,4),s(k,T,5)];A.some((N,B)=>N!==P[B])&&(u.setOrientation(...A),P=A);let F=[s(k,T,6),s(k,T,7),s(k,T,8)];F.some((N,B)=>N!==U[B])&&(u.setPosition(...F),U=F)},C.connect(O)},I=O=>k=>{k!==P[O]&&(P[O]=k,u.setOrientation(...P))},M=O=>k=>{k!==U[O]&&(U[O]=k,u.setPosition(...U))},E=(O,k,A)=>{let F=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k});F.connect(C,0,O),F.start(),Object.defineProperty(F.offset,"defaultValue",{get(){return k}});let N=n({context:l},b,F.offset,Ft,zt);return a(N,"value",B=>()=>B.call(N),B=>H=>{try{B.call(N,H)}catch(he){if(he.code!==9)throw he}R(),b&&A(H)}),N.cancelAndHoldAtTime=(B=>b?()=>{throw i()}:(...H)=>{let he=B.apply(N,H);return R(),he})(N.cancelAndHoldAtTime),N.cancelScheduledValues=(B=>b?()=>{throw i()}:(...H)=>{let he=B.apply(N,H);return R(),he})(N.cancelScheduledValues),N.exponentialRampToValueAtTime=(B=>b?()=>{throw i()}:(...H)=>{let he=B.apply(N,H);return R(),he})(N.exponentialRampToValueAtTime),N.linearRampToValueAtTime=(B=>b?()=>{throw i()}:(...H)=>{let he=B.apply(N,H);return R(),he})(N.linearRampToValueAtTime),N.setTargetAtTime=(B=>b?()=>{throw i()}:(...H)=>{let he=B.apply(N,H);return R(),he})(N.setTargetAtTime),N.setValueAtTime=(B=>b?()=>{throw i()}:(...H)=>{let he=B.apply(N,H);return R(),he})(N.setValueAtTime),N.setValueCurveAtTime=(B=>b?()=>{throw i()}:(...H)=>{let he=B.apply(N,H);return R(),he})(N.setValueCurveAtTime),N};return{forwardX:E(0,0,I(0)),forwardY:E(1,0,I(1)),forwardZ:E(2,-1,I(2)),positionX:E(6,0,M(0)),positionY:E(7,0,M(1)),positionZ:E(8,0,M(2)),upX:E(3,0,I(3)),upY:E(4,1,I(4)),upZ:E(5,0,I(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:m,positionY:g,positionZ:_,upX:v,upY:y,upZ:x}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return _},get upX(){return v},get upY(){return y},get upZ(){return x}}};var Ha=n=>"context"in n;var Vo=n=>Ha(n[0]);var Ai=(n,e,t,r)=>{for(let i of n)if(t(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0};var f1=(n,e,[t,r],i)=>{Ai(n,[e,t,r],s=>s[0]===e&&s[1]===t,i)};var p1=(n,[e,t,r],i)=>{let s=n.get(e);s===void 0?n.set(e,new Set([[t,r]])):Ai(s,[t,r],o=>o[0]===t,i)};var Kr=n=>"inputs"in n;var Dc=(n,e,t,r)=>{if(Kr(e)){let i=e.inputs[r];return n.connect(i,t,0),[i,t,0]}return n.connect(e,t,r),[e,t,r]};var m1=(n,e,t)=>{for(let r of n)if(r[0]===e&&r[1]===t)return n.delete(r),r;return null};var _R=(n,e,t)=>ko(n,r=>r[0]===e&&r[1]===t);var g1=(n,e)=>{if(!as(n).delete(e))throw new Error("Missing the expected event listener.")};var _1=(n,e,t)=>{let r=Qt(n,e),i=ko(r,s=>s[0]===t);return r.size===0&&n.delete(e),i};var Ac=(n,e,t,r)=>{Kr(e)?n.disconnect(e.inputs[r],t,0):n.disconnect(e,t,r)};var ht=n=>Qt(Tc,n);var $a=n=>Qt(Dd,n);var Gs=n=>Ad.has(n);var Ic=n=>!os.has(n);var y1=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{let r=n.createScriptProcessor(256,1,1),i=n.createGain(),s=n.createBuffer(1,2,44100),o=s.getChannelData(0);o[0]=1,o[1]=1;let a=n.createBufferSource();a.buffer=s,a.loop=!0,a.connect(r).connect(n.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=l=>{let c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?t(!0):t(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(n.destination)},a.start()}});var Yg=(n,e)=>{let t=new Map;for(let r of n)for(let i of r){let s=t.get(i);t.set(i,s===void 0?1:s+1)}t.forEach((r,i)=>e(i,r))};var Wa=n=>"context"in n;var yR=n=>{let e=new Map;n.connect=(t=>(r,i=0,s=0)=>{let o=Wa(r)?t(r,i,s):t(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:s,output:i}]):a.every(l=>l.input!==s||l.output!==i)&&a.push({input:s,output:i}),o})(n.connect.bind(n)),n.disconnect=(t=>(r,i,s)=>{if(t.apply(n),r===void 0)e.clear();else if(typeof r=="number")for(let[o,a]of e){let l=a.filter(c=>c.output!==r);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(r))if(i===void 0)e.delete(r);else{let o=e.get(r);if(o!==void 0){let a=o.filter(l=>l.output!==i&&(l.input!==s||s===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(let[o,a]of e)a.forEach(l=>{Wa(o)?n.connect(o,l.output,l.input):n.connect(o,l.output)})})(n.disconnect)};var K6=(n,e,t,r)=>{let{activeInputs:i,passiveInputs:s}=Lo(e),{outputs:o}=nn(n),a=as(n),l=c=>{let u=ht(n),h=$a(e);if(c){let d=_1(s,n,t);f1(i,n,d,!1),!r&&!Gs(n)&&u.connect(h,t)}else{let d=_R(i,n,t);p1(s,d,!1),!r&&!Gs(n)&&u.disconnect(h,t)}};return Ai(o,[e,t],c=>c[0]===e&&c[1]===t,!0)?(a.add(l),Kn(n)?f1(i,n,[t,l],!0):p1(s,[n,t,l],!0),!0):!1},J6=(n,e,t,r)=>{let{activeInputs:i,passiveInputs:s}=nn(e),o=m1(i[r],n,t);return o===null?[Wg(s,n,t,r)[2],!1]:[o[2],!0]},eq=(n,e,t)=>{let{activeInputs:r,passiveInputs:i}=Lo(e),s=m1(r,n,t);return s===null?[_1(i,n,t)[1],!1]:[s[2],!0]},v1=(n,e,t,r,i)=>{let[s,o]=J6(n,t,r,i);if(s!==null&&(g1(n,s),o&&!e&&!Gs(n)&&Ac(ht(n),ht(t),r,i)),Kn(t)){let{activeInputs:a}=nn(t);Od(t,a)}},x1=(n,e,t,r)=>{let[i,s]=eq(n,t,r);i!==null&&(g1(n,i),s&&!e&&!Gs(n)&&ht(n).disconnect($a(t),r))},tq=(n,e)=>{let t=nn(n),r=[];for(let i of t.outputs)Vo(i)?v1(n,e,...i):x1(n,e,...i),r.push(i[0]);return t.outputs.clear(),r},nq=(n,e,t)=>{let r=nn(n),i=[];for(let s of r.outputs)s[1]===t&&(Vo(s)?v1(n,e,...s):x1(n,e,...s),i.push(s[0]),r.outputs.delete(s));return i},rq=(n,e,t,r,i)=>{let s=nn(n);return Array.from(s.outputs).filter(o=>o[0]===t&&(r===void 0||o[1]===r)&&(i===void 0||o[2]===i)).map(o=>(Vo(o)?v1(n,e,...o):x1(n,e,...o),s.outputs.delete(o),o[0]))},vR=(n,e,t,r,i,s,o,a,l,c,u,h,d,f,p,m)=>class extends c{constructor(_,v,y,x){super(y),this._context=_,this._nativeAudioNode=y;let T=u(_);h(T)&&t(y1,()=>y1(T,m))!==!0&&yR(y),Tc.set(this,y),$g.set(this,new Set),_.state!=="closed"&&v&&Di(this),n(this,x,y)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(_){this._nativeAudioNode.channelCount=_}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(_){this._nativeAudioNode.channelCountMode=_}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(_){this._nativeAudioNode.channelInterpretation=_}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(_,v=0,y=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw i();let x=u(this._context),T=p(x);if(d(_)||f(_))throw s();if(Ha(_)){let w=ht(_);try{let U=Dc(this._nativeAudioNode,w,v,y),R=Ic(this);(T||R)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!R&&Ic(_)&&Di(_)}catch(U){throw U.code===12?s():U}if(e(this,_,v,y,T)){let U=l([this],_);Yg(U,r(T))}return _}let C=$a(_);if(C.name==="playbackRate"&&C.maxValue===1024)throw o();try{this._nativeAudioNode.connect(C,v),(T||Ic(this))&&this._nativeAudioNode.disconnect(C,v)}catch(w){throw w.code===12?s():w}if(K6(this,_,v,T)){let w=l([this],_);Yg(w,r(T))}}disconnect(_,v,y){let x,T=u(this._context),C=p(T);if(_===void 0)x=tq(this,C);else if(typeof _=="number"){if(_<0||_>=this.numberOfOutputs)throw i();x=nq(this,C,_)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Ha(_)&&y!==void 0&&(y<0||y>=_.numberOfInputs))throw i();if(x=rq(this,C,_,v,y),x.length===0)throw s()}for(let b of x){let w=l([this],b);Yg(w,a)}}};var xR=pa(h1()),bR=(n,e,t,r,i,s,o,a,l,c,u,h,d)=>(f,p,m,g=null,_=null)=>{let v=m.value,y=new xR.AutomationEventList(v),x=p?r(y):null,T={get defaultValue(){return v},get maxValue(){return g===null?m.maxValue:g},get minValue(){return _===null?m.minValue:_},get value(){return m.value},set value(C){m.value=C,T.setValueAtTime(C,f.context.currentTime)},cancelAndHoldAtTime(C){if(typeof m.cancelAndHoldAtTime=="function")x===null&&y.flush(f.context.currentTime),y.add(i(C)),m.cancelAndHoldAtTime(C);else{let b=Array.from(y).pop();x===null&&y.flush(f.context.currentTime),y.add(i(C));let w=Array.from(y).pop();m.cancelScheduledValues(C),b!==w&&w!==void 0&&(w.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(w.value,w.endTime):w.type==="linearRampToValue"?m.linearRampToValueAtTime(w.value,w.endTime):w.type==="setValue"?m.setValueAtTime(w.value,w.startTime):w.type==="setValueCurve"&&m.setValueCurveAtTime(w.values,w.startTime,w.duration))}return T},cancelScheduledValues(C){return x===null&&y.flush(f.context.currentTime),y.add(s(C)),m.cancelScheduledValues(C),T},exponentialRampToValueAtTime(C,b){if(C===0)throw new RangeError;if(!Number.isFinite(b)||b<0)throw new RangeError;let w=f.context.currentTime;return x===null&&y.flush(w),Array.from(y).length===0&&(y.add(c(v,w)),m.setValueAtTime(v,w)),y.add(o(C,b)),m.exponentialRampToValueAtTime(C,b),T},linearRampToValueAtTime(C,b){let w=f.context.currentTime;return x===null&&y.flush(w),Array.from(y).length===0&&(y.add(c(v,w)),m.setValueAtTime(v,w)),y.add(a(C,b)),m.linearRampToValueAtTime(C,b),T},setTargetAtTime(C,b,w){return x===null&&y.flush(f.context.currentTime),y.add(l(C,b,w)),m.setTargetAtTime(C,b,w),T},setValueAtTime(C,b){return x===null&&y.flush(f.context.currentTime),y.add(c(C,b)),m.setValueAtTime(C,b),T},setValueCurveAtTime(C,b,w){let P=C instanceof Float32Array?C:new Float32Array(C);if(h!==null&&h.name==="webkitAudioContext"){let U=b+w,R=f.context.sampleRate,I=Math.ceil(b*R),M=Math.floor(U*R),E=M-I,O=new Float32Array(E);for(let A=0;A<E;A+=1){let F=(P.length-1)/w*((I+A)/R-b),N=Math.floor(F),B=Math.ceil(F);O[A]=N===B?P[N]:(1-(F-N))*P[N]+(1-(B-F))*P[B]}x===null&&y.flush(f.context.currentTime),y.add(u(O,b,w)),m.setValueCurveAtTime(O,b,w);let k=M/R;k<U&&d(T,O[O.length-1],k),d(T,P[P.length-1],U)}else x===null&&y.flush(f.context.currentTime),y.add(u(P,b,w)),m.setValueCurveAtTime(P,b,w);return T}};return t.set(T,m),e.set(T,f),n(T,x),T};var wR=n=>({replay(e){for(let t of n)if(t.type==="exponentialRampToValue"){let{endTime:r,value:i}=t;e.exponentialRampToValueAtTime(i,r)}else if(t.type==="linearRampToValue"){let{endTime:r,value:i}=t;e.linearRampToValueAtTime(i,r)}else if(t.type==="setTarget"){let{startTime:r,target:i,timeConstant:s}=t;e.setTargetAtTime(i,r,s)}else if(t.type==="setValue"){let{startTime:r,value:i}=t;e.setValueAtTime(i,r)}else if(t.type==="setValueCurve"){let{duration:r,startTime:i,values:s}=t;e.setValueCurveAtTime(s,i,r)}else throw new Error("Can't apply an unknown automation.")}});var Mc=class{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((r,i)=>e.call(t,r,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}};var iq={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},TR=(n,e,t,r,i,s,o,a,l,c,u,h,d,f)=>class extends e{constructor(m,g,_){var v;let y=a(m),x=l(y),T=u(S(S({},iq),_));d(T);let C=Id.get(y),b=C?.get(g),w=x||y.state!=="closed"?y:(v=o(y))!==null&&v!==void 0?v:y,P=i(w,x?null:m.baseLatency,c,g,b,T),U=x?r(g,T,b):null;super(m,!0,P,U);let R=[];P.parameters.forEach((M,E)=>{let O=t(this,x,M);R.push([E,O])}),this._nativeAudioWorkletNode=P,this._onprocessorerror=null,this._parameters=new Mc(R),x&&n(y,this);let{activeInputs:I}=s(this);h(P,I)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){let g=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;let _=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=_!==null&&_===g?m:_}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Oc(n,e,t,r,i){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],r,i);else{let s=n.getChannelData(r);if(e[t].byteLength===0)e[t]=s.slice(i,i+128);else{let o=new Float32Array(s.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}var Zg=(n,e,t,r,i)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],r,i):e[t].byteLength!==0&&n.getChannelData(r).set(e[t],i)};var Rc=(n,e)=>{let t=[];for(let r=0;r<n;r+=1){let i=[],s=typeof e=="number"?e:e[r];for(let o=0;o<s;o+=1)i.push(new Float32Array(128));t.push(i)}return t};var SR=(n,e)=>{let t=Qt(Md,n),r=ht(e);return Qt(t,r)};var sq=(n,e,t,r,i,s,o)=>L(void 0,null,function*(){let a=e===null?Math.ceil(n.context.length/128)*128:e.length,l=r.channelCount*r.numberOfInputs,c=i.reduce((g,_)=>g+_,0),u=c===0?null:t.createBuffer(c,a,t.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");let h=nn(n),d=yield SR(t,n),f=Rc(r.numberOfInputs,r.channelCount),p=Rc(r.numberOfOutputs,i),m=Array.from(n.parameters.keys()).reduce((g,_)=>W(S({},g),{[_]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(r.numberOfInputs>0&&e!==null)for(let _=0;_<r.numberOfInputs;_+=1)for(let v=0;v<r.channelCount;v+=1)Oc(e,f[_],v,v,g);s.parameterDescriptors!==void 0&&e!==null&&s.parameterDescriptors.forEach(({name:_},v)=>{Oc(e,m,_,l+v,g)});for(let _=0;_<r.numberOfInputs;_+=1)for(let v=0;v<i[_];v+=1)p[_][v].byteLength===0&&(p[_][v]=new Float32Array(128));try{let _=f.map((y,x)=>h.activeInputs[x].size===0?[]:y),v=o(g/t.sampleRate,t.sampleRate,()=>d.process(_,p,m));if(u!==null)for(let y=0,x=0;y<r.numberOfOutputs;y+=1){for(let T=0;T<i[y];T+=1)Zg(u,p[y],T,x+T,g);x+=i[y]}if(!v)break}catch(_){n.dispatchEvent(new ErrorEvent("processorerror",{colno:_.colno,filename:_.filename,lineno:_.lineno,message:_.message}));break}}return u}),ER=(n,e,t,r,i,s,o,a,l,c,u,h,d,f,p,m)=>(g,_,v)=>{let y=new WeakMap,x=null,T=(C,b)=>L(void 0,null,function*(){let w=u(C),P=null,U=Qe(w,b),R=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(h===null){let I=R.reduce((k,A)=>k+A,0),M=i(b,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),E=[];for(let k=0;k<C.numberOfOutputs;k+=1)E.push(r(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[k]}));let O=o(b,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});O.connect=e.bind(null,E),O.disconnect=l.bind(null,E),P=[M,E,O]}else U||(w=new h(b,g));if(y.set(b,P===null?w:P[2]),P!==null){if(x===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");let A=C.channelCount*C.numberOfInputs,F=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,N=A+F;x=sq(C,N===0?null:yield(()=>L(void 0,null,function*(){let H=new d(N,Math.ceil(C.context.length/128)*128,b.sampleRate),he=[],Ce=[];for(let Te=0;Te<_.numberOfInputs;Te+=1)he.push(o(H,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),Ce.push(i(H,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));let Ne=yield Promise.all(Array.from(C.parameters.values()).map(Te=>L(void 0,null,function*(){let ne=s(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Te.value});return yield f(H,Te,ne.offset),ne}))),We=r(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,A+F)});for(let Te=0;Te<_.numberOfInputs;Te+=1){he[Te].connect(Ce[Te]);for(let ne=0;ne<_.channelCount;ne+=1)Ce[Te].connect(We,ne,Te*_.channelCount+ne)}for(let[Te,ne]of Ne.entries())ne.connect(We,0,A+Te),ne.start(0);return We.connect(H.destination),yield Promise.all(he.map(Te=>p(C,H,Te))),m(H)}))(),b,_,R,v,c)}let I=yield x,M=t(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[E,O,k]=P;I!==null&&(M.buffer=I,M.start(0)),M.connect(E);for(let A=0,F=0;A<C.numberOfOutputs;A+=1){let N=O[A];for(let B=0;B<R[A];B+=1)E.connect(N,F+B,B);F+=R[A]}return k}if(U)for(let[I,M]of C.parameters.entries())yield n(b,M,w.parameters.get(I));else for(let[I,M]of C.parameters.entries())yield f(b,M,w.parameters.get(I));return yield p(C,b,w),w});return{render(C,b){a(b,C);let w=y.get(b);return w!==void 0?Promise.resolve(w):T(C,b)}}};var CR=(n,e,t,r,i,s,o,a,l,c,u,h,d,f,p,m,g,_,v,y)=>class extends p{constructor(T,C){super(T,C),this._nativeContext=T,this._audioWorklet=n===void 0?void 0:{addModule:(b,w)=>n(this,b,w)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(T,C,b){return new t({length:C,numberOfChannels:T,sampleRate:b})}createBufferSource(){return new r(this)}createChannelMerger(T=6){return new s(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new o(this,{numberOfOutputs:T})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(T=1){return new u(this,{maxDelayTime:T})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(T,C){return new f(this,{feedback:C,feedforward:T})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(T,C,b={disableNormalization:!1}){return new _(this,W(S({},b),{imag:C,real:T}))}createStereoPanner(){return new v(this)}createWaveShaper(){return new y(this)}decodeAudioData(T,C,b){return c(this._nativeContext,T).then(w=>(typeof C=="function"&&C(w),w),w=>{throw typeof b=="function"&&b(w),w})}};var oq={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},DR=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){let h=s(c),d=S(S({},oq),u),f=i(h,d),p=o(h),m=p?t():null;super(c,!1,f,m),this._Q=e(this,p,f.Q,Ft,zt),this._detune=e(this,p,f.detune,1200*Math.log2(Ft),-1200*Math.log2(Ft)),this._frequency=e(this,p,f.frequency,c.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Ft),zt),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,h)}catch(d){throw d.code===11?r():d}if(c.length!==u.length||u.length!==h.length)throw r()}};var AR=(n,e,t,r,i)=>()=>{let s=new WeakMap,o=(a,l)=>L(void 0,null,function*(){let c=t(a),u=Qe(c,l);if(!u){let h={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,h)}return s.set(l,c),u?(yield n(l,a.Q,c.Q),yield n(l,a.detune,c.detune),yield n(l,a.frequency,c.frequency),yield n(l,a.gain,c.gain)):(yield r(l,a.Q,c.Q),yield r(l,a.detune,c.detune),yield r(l,a.frequency,c.frequency),yield r(l,a.gain,c.gain)),yield i(a,l,c),c});return{render(a,l){let c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}};var IR=(n,e)=>(t,r)=>{let i=e.get(t);if(i!==void 0)return i;let s=n.get(t);if(s!==void 0)return s;try{let o=r();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}};var aq={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},MR=(n,e,t,r,i)=>class extends n{constructor(o,a){let l=r(o),c=S(S({},aq),a),u=t(l,c),h=i(l)?e():null;super(o,!1,u,h)}};var OR=(n,e,t)=>()=>{let r=new WeakMap,i=(s,o)=>L(void 0,null,function*(){let a=e(s);if(!Qe(a,o)){let c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,c)}return r.set(o,a),yield t(s,o,a),a});return{render(s,o){let a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}};var lq={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},RR=(n,e,t,r,i,s)=>class extends n{constructor(a,l){let c=r(a),u=s(S(S({},lq),l)),h=t(c,u),d=i(c)?e():null;super(a,!1,h,d)}};var NR=(n,e,t)=>()=>{let r=new WeakMap,i=(s,o)=>L(void 0,null,function*(){let a=e(s);if(!Qe(a,o)){let c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,c)}return r.set(o,a),yield t(s,o,a),a});return{render(s,o){let a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}};var PR=n=>(e,t,r)=>n(t,e,r);var FR=n=>(e,t,r=0,i=0)=>{let s=e[r];if(s===void 0)throw n();return Wa(t)?s.connect(t,0,i):s.connect(t,0)};var kR=n=>(e,t)=>{let r=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}};var cq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},LR=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){let u=i(l),h=S(S({},cq),c),d=r(u,h),f=s(u),p=f?t():null;super(l,!1,d,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,Ft,zt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){let c=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=c;let u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Di(this);let c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Kn(this)&&ls(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}};var BR=(n,e,t,r,i)=>()=>{let s=new WeakMap,o=null,a=null,l=(c,u)=>L(void 0,null,function*(){let h=t(c),d=Qe(h,u);if(!d){let f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return s.set(u,h),d?yield n(u,c.offset,h.offset):yield r(u,c.offset,h.offset),yield i(c,u,h),h});return{set start(c){o=c},set stop(c){a=c},render(c,u){let h=s.get(u);return h!==void 0?Promise.resolve(h):l(c,u)}}};var VR=n=>e=>(n[0]=e,n[0]);var uq={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},UR=(n,e,t,r,i,s)=>class extends n{constructor(a,l){let c=r(a),u=S(S({},uq),l),h=t(c,u),f=i(c)?e():null;super(a,!1,h,f),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){let l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}};var jR=(n,e,t)=>()=>{let r=new WeakMap,i=(s,o)=>L(void 0,null,function*(){let a=e(s);if(!Qe(a,o)){let c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,c)}return r.set(o,a),Kr(a)?yield t(s,o,a.inputs[0]):yield t(s,o,a),a});return{render(s,o){let a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}};var GR=(n,e)=>(t,r,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,r,i)}catch(s){throw s.name==="SyntaxError"?n():s}};var HR=()=>new DOMException("","DataCloneError");var b1=n=>{let{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{let i=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>i();try{e.postMessage(n,[n])}catch{}finally{i()}})};var $R=(n,e,t,r,i,s,o,a,l,c,u)=>(h,d)=>{let f=o(h)?h:s(h);if(i.has(d)){let p=t();return Promise.reject(p)}try{i.add(d)}catch{}return e(l,()=>l(f))?f.decodeAudioData(d).then(p=>(b1(d).catch(()=>{}),e(a,()=>a(p))||u(p),n.add(p),p)):new Promise((p,m)=>{let g=()=>L(void 0,null,function*(){try{yield b1(d)}catch{}}),_=v=>{m(v),g()};try{f.decodeAudioData(d,v=>{typeof v.copyFromChannel!="function"&&(c(v),Cc(v)),n.add(v),g().then(()=>p(v))},v=>{_(v===null?r():v)})}catch(v){_(v)}})};var WR=(n,e,t,r,i,s,o,a)=>(l,c)=>{let u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");let h=s(l.context),d=a(h);if(u===c){if(e.delete(l),!d&&o(l)){let f=r(l),{outputs:p}=t(l);for(let m of p)if(Vo(m)){let g=r(m[0]);n(f,g,m[1],m[2])}else{let g=i(m[0]);f.connect(g,m[1])}}}else e.set(l,u-c)};var hq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},zR=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){let u=i(l),h=S(S({},hq),c),d=r(u,h),f=s(u),p=f?t(h.maxDelayTime):null;super(l,!1,d,p),this._delayTime=e(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}};var qR=(n,e,t,r,i)=>s=>{let o=new WeakMap,a=(l,c)=>L(void 0,null,function*(){let u=t(l),h=Qe(u,c);if(!h){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:s};u=e(c,d)}return o.set(c,u),h?yield n(c,l.delayTime,u.delayTime):yield r(c,l.delayTime,u.delayTime),yield i(l,c,u),u});return{render(l,c){let u=o.get(c);return u!==void 0?Promise.resolve(u):a(l,c)}}};var XR=n=>(e,t,r,i)=>n(e[i],s=>s[0]===t&&s[1]===r);var YR=n=>(e,t)=>{n(e).delete(t)};var ZR=n=>"delayTime"in n;var QR=(n,e,t)=>function r(i,s){let o=Ha(s)?s:t(n,s);if(ZR(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];let{outputs:a}=e(o);return Array.from(a).map(l=>r([...i,o],l[0])).reduce((l,c)=>l.concat(c),[])};var Qg=(n,e,t)=>{let r=e[t];if(r===void 0)throw n();return r},KR=n=>(e,t=void 0,r=void 0,i=0)=>t===void 0?e.forEach(s=>s.disconnect()):typeof t=="number"?Qg(n,e,t).disconnect():Wa(t)?r===void 0?e.forEach(s=>s.disconnect(t)):i===void 0?Qg(n,e,r).disconnect(t,0):Qg(n,e,r).disconnect(t,0,i):r===void 0?e.forEach(s=>s.disconnect(t)):Qg(n,e,r).disconnect(t,0);var dq={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},JR=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){let h=s(c),d=S(S({},dq),u),f=r(h,d),p=o(h),m=p?t():null;super(c,!1,f,m),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){let u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){let u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};var eN=(n,e,t,r,i)=>()=>{let s=new WeakMap,o=(a,l)=>L(void 0,null,function*(){let c=t(a),u=Qe(c,l);if(!u){let h={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,h)}return s.set(l,c),u?(yield n(l,a.attack,c.attack),yield n(l,a.knee,c.knee),yield n(l,a.ratio,c.ratio),yield n(l,a.release,c.release),yield n(l,a.threshold,c.threshold)):(yield r(l,a.attack,c.attack),yield r(l,a.knee,c.knee),yield r(l,a.ratio,c.ratio),yield r(l,a.release,c.release),yield r(l,a.threshold,c.threshold)),yield i(a,l,c),c});return{render(a,l){let c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}};var tN=()=>new DOMException("","EncodingError");var nN=n=>e=>new Promise((t,r)=>{if(n===null){r(new SyntaxError);return}let i=n.document.head;if(i===null)r(new SyntaxError);else{let s=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=n.onerror,c=()=>{n.onerror=l,URL.revokeObjectURL(a)};n.onerror=(u,h,d,f,p)=>{if(h===a||h===n.location.href&&d===1&&f===1)return c(),r(p),!1;if(l!==null)return l(u,h,d,f,p)},s.onerror=()=>{c(),r(new SyntaxError)},s.onload=()=>{c(),t()},s.src=a,s.type="module",i.appendChild(s)}});var rN=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,i){if(r!==null){let s=this._listeners.get(r);s===void 0&&(s=n(this,r),typeof r=="function"&&this._listeners.set(r,s)),this._nativeEventTarget.addEventListener(t,s,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,i){let s=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,s===void 0?null:s,i)}};var iN=n=>(e,t,r)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}};var sN=n=>e=>L(void 0,null,function*(){try{let t=yield fetch(e);if(t.ok)return[yield t.text(),t.url]}catch{}throw n()});var fq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},oN=(n,e,t,r,i,s)=>class extends n{constructor(a,l){let c=i(a),u=S(S({},fq),l),h=r(c,u),d=s(c),f=d?t():null;super(a,!1,h,f),this._gain=e(this,d,h.gain,Ft,zt)}get gain(){return this._gain}};var aN=(n,e,t,r,i)=>()=>{let s=new WeakMap,o=(a,l)=>L(void 0,null,function*(){let c=t(a),u=Qe(c,l);if(!u){let h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,h)}return s.set(l,c),u?yield n(l,a.gain,c.gain):yield r(l,a.gain,c.gain),yield i(a,l,c),c});return{render(a,l){let c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}};var lN=(n,e)=>t=>e(n,t);var cN=n=>e=>{let t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer};var uN=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0};var hN=n=>e=>{let t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer};var dN=n=>e=>n.get(e);var Et=()=>new DOMException("","InvalidStateError");var fN=n=>e=>{let t=n.get(e);if(t===void 0)throw Et();return t};var pN=(n,e)=>t=>{let r=n.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),n.set(t,r),r};var mN=n=>e=>{let t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t};var Nc=()=>new DOMException("","InvalidAccessError");var gN=n=>{n.getFrequencyResponse=(e=>(t,r,i)=>{if(t.length!==r.length||r.length!==i.length)throw Nc();return e.call(n,t,r,i)})(n.getFrequencyResponse)};var pq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},_N=(n,e,t,r,i,s)=>class extends n{constructor(a,l){let c=r(a),u=i(c),h=S(S({},pq),l),d=e(c,u?null:a.baseLatency,h),f=u?t(h.feedback,h.feedforward):null;super(a,!1,d,f),gN(d),this._nativeIIRFilterNode=d,s(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}};var Kg=(n,e,t,r,i,s,o,a,l,c,u)=>{let h=c.length,d=a;for(let f=0;f<h;f+=1){let p=t[0]*c[f];for(let m=1;m<i;m+=1){let g=d-m&l-1;p+=t[m]*s[g],p-=n[m]*o[g]}for(let m=i;m<r;m+=1)p+=t[m]*s[d-m&l-1];for(let m=i;m<e;m+=1)p-=n[m]*o[d-m&l-1];s[d]=c[f],o[d]=p,d=d+1&l-1,u[f]=p}return d};var mq=(n,e,t,r)=>{let i=t instanceof Float64Array?t:new Float64Array(t),s=r instanceof Float64Array?r:new Float64Array(r),o=i.length,a=s.length,l=Math.min(o,a);if(i[0]!==1){for(let p=0;p<o;p+=1)s[p]/=i[0];for(let p=1;p<a;p+=1)i[p]/=i[0]}let c=32,u=new Float32Array(c),h=new Float32Array(c),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){let m=n.getChannelData(p),g=d.getChannelData(p);u.fill(0),h.fill(0),Kg(i,o,s,a,l,u,h,0,c,m,g)}return d},yN=(n,e,t,r,i)=>(s,o)=>{let a=new WeakMap,l=null,c=(u,h)=>L(void 0,null,function*(){let d=null,f=e(u),p=Qe(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=h.createIIRFilter(o,s)),a.set(h,d===null?f:d),d!==null){if(l===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");let g=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);l=(()=>L(void 0,null,function*(){yield r(u,g,g.destination);let _=yield i(g);return mq(_,h,s,o)}))()}let m=yield l;return d.buffer=m,d.start(0),d}return yield r(u,h,f),f});return{render(u,h){let d=a.get(h);return d!==void 0?Promise.resolve(d):c(u,h)}}};var vN=(n,e,t,r,i,s)=>o=>(a,l)=>{let c=n.get(a);if(c===void 0){if(!o&&s(a)){let u=r(a),{outputs:h}=t(a);for(let d of h)if(Vo(d)){let f=r(d[0]);e(u,f,d[1],d[2])}else{let f=i(d[0]);u.disconnect(f,d[1])}}n.set(a,l)}else n.set(a,c+l)};var xN=(n,e)=>t=>{let r=n.get(t);return e(r)||e(t)};var bN=(n,e)=>t=>n.has(t)||e(t);var wN=(n,e)=>t=>n.has(t)||e(t);var TN=(n,e)=>t=>{let r=n.get(t);return e(r)||e(t)};var SN=n=>e=>n!==null&&e instanceof n;var EN=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode;var CN=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam;var DN=(n,e)=>t=>n(t)||e(t);var AN=n=>e=>n!==null&&e instanceof n;var IN=n=>n!==null&&n.isSecureContext;var MN=(n,e,t,r)=>class extends n{constructor(s,o){let a=t(s),l=e(a,o);if(r(a))throw TypeError();super(s,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};var gq={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ON=(n,e,t,r)=>class extends n{constructor(s,o){let a=t(s);if(r(a))throw new TypeError;let l=S(S({},gq),o),c=e(a,l);super(s,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};var RN=(n,e,t,r)=>class extends n{constructor(s,o){let a=t(s),l=e(a,o);if(r(a))throw new TypeError;super(s,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};var NN=(n,e,t)=>class extends n{constructor(i,s){let o=t(i),a=e(o,s);super(i,!0,a,null)}};var PN=(n,e,t,r,i)=>class extends r{constructor(o={}){if(i===null)throw new Error("Missing the native AudioContext constructor.");let a;try{a=new i(o)}catch(u){throw u.code===12&&u.message==="sampleRate is not in range"?e():u}if(a===null)throw t();if(!Xg(o.latencyHint))throw new TypeError(`The provided value '${o.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(o.sampleRate!==void 0&&a.sampleRate!==o.sampleRate)throw e();super(a,2);let{latencyHint:l}=o,{sampleRate:c}=a;if(this._baseLatency=typeof a.baseLatency=="number"?a.baseLatency:l==="balanced"?512/c:l==="interactive"||l===void 0?256/c:l==="playback"?1024/c:Math.max(2,Math.min(128,Math.round(l*c/128)))*128/c,this._nativeAudioContext=a,i.name==="webkitAudioContext"?(this._nativeGainNode=a.createGain(),this._nativeOscillatorNode=a.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(a.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,a.state==="running"){this._state="suspended";let u=()=>{this._state==="suspended"&&(this._state=null),a.removeEventListener("statechange",u)};a.addEventListener("statechange",u)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw n()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Bo(this)}))}resume(){return this._state==="suspended"?new Promise((o,a)=>{let l=()=>{this._nativeAudioContext.removeEventListener("statechange",l),this._nativeAudioContext.state==="running"?o():this.resume().then(o,a)};this._nativeAudioContext.addEventListener("statechange",l)}):this._nativeAudioContext.resume().catch(o=>{throw o===void 0||o.code===15?n():o})}suspend(){return this._nativeAudioContext.suspend().catch(o=>{throw o===void 0?n():o})}};var FN=(n,e,t,r,i,s)=>class extends t{constructor(a,l){super(a),this._nativeContext=a,Sc.set(this,a),r(a)&&i.set(a,new Set),this._destination=new n(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){let l=typeof a=="function"?s(this,a):null;this._nativeContext.onstatechange=l;let c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};var Ii=n=>{let e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1};var _q={numberOfChannels:1},kN=(n,e,t,r,i)=>class extends r{constructor(o){let{length:a,numberOfChannels:l,sampleRate:c}=S(S({},_q),o),u=t(l,a,c);n(Ii,()=>Ii(u))||u.addEventListener("statechange",(()=>{let h=0,d=f=>{this._state==="running"&&(h>0?(u.removeEventListener("statechange",d),f.stopImmediatePropagation(),this._waitForThePromiseToSettle(f)):h+=1)};return d})()),super(u,l),this._length=a,this._nativeOfflineAudioContext=u,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Bo(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}};var LN=(n,e)=>(t,r,i)=>{let s=new Set;return t.connect=(o=>(a,l=0,c=0)=>{let u=s.size===0;if(e(a))return o.call(t,a,l,c),n(s,[a,l,c],h=>h[0]===a&&h[1]===l&&h[2]===c,!0),u&&r(),a;o.call(t,a,l),n(s,[a,l],h=>h[0]===a&&h[1]===l,!0),u&&r()})(t.connect),t.disconnect=(o=>(a,l,c)=>{let u=s.size>0;if(a===void 0)o.apply(t),s.clear();else if(typeof a=="number"){o.call(t,a);for(let d of s)d[1]===a&&s.delete(d)}else{e(a)?o.call(t,a,l,c):o.call(t,a,l);for(let d of s)d[0]===a&&(l===void 0||d[1]===l)&&(c===void 0||d[2]===c)&&s.delete(d)}let h=s.size===0;u&&h&&i()})(t.disconnect),t};var Ke=(n,e,t)=>{let r=e[t];r!==void 0&&r!==n[t]&&(n[t]=r)};var je=(n,e)=>{Ke(n,e,"channelCount"),Ke(n,e,"channelCountMode"),Ke(n,e,"channelInterpretation")};var w1=n=>typeof n.getFloatTimeDomainData=="function";var BN=n=>{n.getFloatTimeDomainData=e=>{let t=new Uint8Array(e.length);n.getByteTimeDomainData(t);let r=Math.max(t.length,n.fftSize);for(let i=0;i<r;i+=1)e[i]=(t[i]-128)*.0078125;return e}};var VN=(n,e)=>(t,r)=>{let i=t.createAnalyser();if(je(i,r),!(r.maxDecibels>r.minDecibels))throw e();return Ke(i,r,"fftSize"),Ke(i,r,"maxDecibels"),Ke(i,r,"minDecibels"),Ke(i,r,"smoothingTimeConstant"),n(w1,()=>w1(i))||BN(i),i};var UN=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null;var tt=(n,e,t)=>{let r=e[t];r!==void 0&&r!==n[t].value&&(n[t].value=r)};var jN=n=>{n.start=(e=>{let t=!1;return(r=0,i=0,s)=>{if(t)throw Et();e.call(n,r,i,s),t=!0}})(n.start)};var Pc=n=>{n.start=(e=>(t=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,r,i)})(n.start)};var Fc=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)};var GN=(n,e,t,r,i,s,o,a,l,c,u)=>(h,d)=>{let f=h.createBufferSource();return je(f,d),tt(f,d,"playbackRate"),Ke(f,d,"buffer"),Ke(f,d,"loop"),Ke(f,d,"loopEnd"),Ke(f,d,"loopStart"),e(t,()=>t(h))||jN(f),e(r,()=>r(h))||l(f),e(i,()=>i(h))||c(f,h),e(s,()=>s(h))||Pc(f),e(o,()=>o(h))||u(f,h),e(a,()=>a(h))||Fc(f),n(h,f),f};var HN=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null;var $N=(n,e)=>(t,r,i)=>{let s=t.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}i&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});let o=n(t,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{s.channelCount=l}catch(c){if(l>s.maxChannelCount)throw c}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),s.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),s.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o};var WN=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null;var zN=n=>{let{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}};var qN=(n,e,t,r,i)=>(s,o,a,l,c,u)=>{if(a!==null)try{let h=new a(s,l,u),d=new Map,f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){let g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){let _=d.get(m[1]);_!==void 0?m[1]=_:(m[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),g(v)):g(new ErrorEvent(m[0],S({},v)))},d.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){let g=d.get(m[1]);g!==void 0&&(d.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){let p=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(s.destination),i(h,()=>p.disconnect(),()=>p.connect(s.destination))}return h}catch(h){throw h.code===11?r():h}if(c===void 0)throw r();return zN(u),e(s,o,c,u)};var Jg=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e)))));var XN=n=>new Promise((e,t)=>{let{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:s})=>{r.close(),i.close(),e(s)},r.onmessageerror=({data:s})=>{r.close(),i.close(),t(s)},i.postMessage(n)});var YN=(n,e)=>L(void 0,null,function*(){let t=yield XN(e);return new n(t)});var ZN=(n,e,t,r)=>{let i=Md.get(n);i===void 0&&(i=new WeakMap,Md.set(n,i));let s=YN(t,r);return i.set(e,s),s};var QN=(n,e,t,r,i,s,o,a,l,c,u,h,d)=>(f,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw l();let _=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(_.some(Q=>Q<1))throw l();if(_.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw l();let v=g.channelCount*g.numberOfInputs,y=_.reduce((Q,de)=>Q+de,0),x=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(v+x>6||y>6)throw l();let T=new MessageChannel,C=[],b=[];for(let Q=0;Q<g.numberOfInputs;Q+=1)C.push(o(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),b.push(i(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let w=[];if(m.parameterDescriptors!==void 0)for(let{defaultValue:Q,maxValue:de,minValue:Ut,name:lt}of m.parameterDescriptors){let et=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[lt]!==void 0?g.parameterData[lt]:Q===void 0?0:Q});Object.defineProperties(et.offset,{defaultValue:{get:()=>Q===void 0?0:Q},maxValue:{get:()=>de===void 0?Ft:de},minValue:{get:()=>Ut===void 0?zt:Ut}}),w.push(et)}let P=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+x)}),U=Jg(p,f.sampleRate),R=a(f,U,v+x,Math.max(1,y)),I=i(f,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),M=[];for(let Q=0;Q<g.numberOfOutputs;Q+=1)M.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[Q]}));for(let Q=0;Q<g.numberOfInputs;Q+=1){C[Q].connect(b[Q]);for(let de=0;de<g.channelCount;de+=1)b[Q].connect(P,de,Q*g.channelCount+de)}let E=new Mc(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:Q},de)=>{let Ut=w[de];return Ut.connect(P,0,v+de),Ut.start(0),[Q,Ut.offset]}));P.connect(R);let O=g.channelInterpretation,k=null,A=g.numberOfOutputs===0?[R]:M,F={get bufferSize(){return U},get channelCount(){return g.channelCount},set channelCount(Q){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(Q){throw t()},get channelInterpretation(){return O},set channelInterpretation(Q){for(let de of C)de.channelInterpretation=Q;O=Q},get context(){return R.context},get inputs(){return C},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return k},set onprocessorerror(Q){typeof k=="function"&&F.removeEventListener("processorerror",k),k=typeof Q=="function"?Q:null,typeof k=="function"&&F.addEventListener("processorerror",k)},get parameters(){return E},get port(){return T.port2},addEventListener(...Q){return R.addEventListener(Q[0],Q[1],Q[2])},connect:n.bind(null,A),disconnect:c.bind(null,A),dispatchEvent(...Q){return R.dispatchEvent(Q[0])},removeEventListener(...Q){return R.removeEventListener(Q[0],Q[1],Q[2])}},N=new Map;T.port1.addEventListener=(Q=>(...de)=>{if(de[0]==="message"){let Ut=typeof de[1]=="function"?de[1]:typeof de[1]=="object"&&de[1]!==null&&typeof de[1].handleEvent=="function"?de[1].handleEvent:null;if(Ut!==null){let lt=N.get(de[1]);lt!==void 0?de[1]=lt:(de[1]=et=>{u(f.currentTime,f.sampleRate,()=>Ut(et))},N.set(Ut,de[1]))}}return Q.call(T.port1,de[0],de[1],de[2])})(T.port1.addEventListener),T.port1.removeEventListener=(Q=>(...de)=>{if(de[0]==="message"){let Ut=N.get(de[1]);Ut!==void 0&&(N.delete(de[1]),de[1]=Ut)}return Q.call(T.port1,de[0],de[1],de[2])})(T.port1.removeEventListener);let B=null;Object.defineProperty(T.port1,"onmessage",{get:()=>B,set:Q=>{typeof B=="function"&&T.port1.removeEventListener("message",B),B=typeof Q=="function"?Q:null,typeof B=="function"&&(T.port1.addEventListener("message",B),T.port1.start())}}),m.prototype.port=T.port1;let H=null;ZN(f,F,m,g).then(Q=>H=Q);let Ce=Rc(g.numberOfInputs,g.channelCount),Ne=Rc(g.numberOfOutputs,_),We=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((Q,{name:de})=>W(S({},Q),{[de]:new Float32Array(128)}),{}),Te=!0,ne=()=>{g.numberOfOutputs>0&&R.disconnect(I);for(let Q=0,de=0;Q<g.numberOfOutputs;Q+=1){let Ut=M[Q];for(let lt=0;lt<_[Q];lt+=1)I.disconnect(Ut,de+lt,lt);de+=_[Q]}},pt=new Map;R.onaudioprocess=({inputBuffer:Q,outputBuffer:de})=>{if(H!==null){let Ut=h(F);for(let lt=0;lt<U;lt+=128){for(let et=0;et<g.numberOfInputs;et+=1)for(let Rt=0;Rt<g.channelCount;Rt+=1)Oc(Q,Ce[et],Rt,Rt,lt);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:et},Rt)=>{Oc(Q,We,et,v+Rt,lt)});for(let et=0;et<g.numberOfInputs;et+=1)for(let Rt=0;Rt<_[et];Rt+=1)Ne[et][Rt].byteLength===0&&(Ne[et][Rt]=new Float32Array(128));try{let et=Ce.map((Ur,uo)=>{if(Ut[uo].size>0)return pt.set(uo,U/128),Ur;let Yy=pt.get(uo);return Yy===void 0?[]:(Ur.every(gV=>gV.every(_V=>_V===0))&&(Yy===1?pt.delete(uo):pt.set(uo,Yy-1)),Ur)});Te=u(f.currentTime+lt/f.sampleRate,f.sampleRate,()=>H.process(et,Ne,We));for(let Ur=0,uo=0;Ur<g.numberOfOutputs;Ur+=1){for(let sh=0;sh<_[Ur];sh+=1)Zg(de,Ne[Ur],sh,uo+sh,lt);uo+=_[Ur]}}catch(et){Te=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:et.colno,filename:et.filename,lineno:et.lineno,message:et.message}))}if(!Te){for(let et=0;et<g.numberOfInputs;et+=1){C[et].disconnect(b[et]);for(let Rt=0;Rt<g.channelCount;Rt+=1)b[lt].disconnect(P,Rt,et*g.channelCount+Rt)}if(m.parameterDescriptors!==void 0){let et=m.parameterDescriptors.length;for(let Rt=0;Rt<et;Rt+=1){let Ur=w[Rt];Ur.disconnect(P,0,v+Rt),Ur.stop()}}P.disconnect(R),R.onaudioprocess=null,nt?ne():yt();break}}}};let nt=!1,Y=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ze=()=>R.connect(Y).connect(f.destination),yt=()=>{R.disconnect(Y),Y.disconnect()},mt=()=>{if(Te){yt(),g.numberOfOutputs>0&&R.connect(I);for(let Q=0,de=0;Q<g.numberOfOutputs;Q+=1){let Ut=M[Q];for(let lt=0;lt<_[Q];lt+=1)I.connect(Ut,de+lt,lt);de+=_[Q]}}nt=!0},Cn=()=>{Te&&(Ze(),ne()),nt=!1};return Ze(),d(F,mt,Cn)};var T1=(n,e)=>{let t=n.createBiquadFilter();return je(t,e),tt(t,e,"Q"),tt(t,e,"detune"),tt(t,e,"frequency"),tt(t,e,"gain"),Ke(t,e,"type"),t};var KN=(n,e)=>(t,r)=>{let i=t.createChannelMerger(r.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,i),je(i,r),i};var JN=n=>{let e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Et()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Et()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Et()}})};var kc=(n,e)=>{let t=n.createChannelSplitter(e.numberOfOutputs);return je(t,e),JN(t),t};var eP=(n,e,t,r,i)=>(s,o)=>{if(s.createConstantSource===void 0)return t(s,o);let a=s.createConstantSource();return je(a,o),tt(a,o,"offset"),e(r,()=>r(s))||Pc(a),e(i,()=>i(s))||Fc(a),n(s,a),a};var Jr=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n);var tP=(n,e,t,r)=>(i,a)=>{var l=a,{offset:s}=l,o=Tr(l,["offset"]);let c=i.createBuffer(1,2,44100),u=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=t(i,W(S({},o),{gain:s})),d=c.getChannelData(0);d[0]=1,d[1]=1,u.buffer=c,u.loop=!0;let f={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(g){h.channelCount=g},get channelCountMode(){return h.channelCountMode},set channelCountMode(g){h.channelCountMode=g},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(g){h.channelInterpretation=g},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return u.onended},set onended(g){u.onended=g},addEventListener(...g){return u.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return u.dispatchEvent(g[0])},removeEventListener(...g){return u.removeEventListener(g[0],g[1],g[2])},start(g=0){u.start.call(u,g)},stop(g=0){u.stop.call(u,g)}},p=()=>u.connect(h),m=()=>u.disconnect(h);return n(i,u),r(Jr(f,h),p,m)};var nP=(n,e)=>(t,r)=>{let i=t.createConvolver();if(je(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),Ke(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",s=>()=>s.call(i),s=>o=>{if(o>2)throw n();return s.call(i,o)}),r.channelCountMode==="max"))throw n();return e(i,"channelCountMode",s=>()=>s.call(i),s=>o=>{if(o==="max")throw n();return s.call(i,o)}),i};var S1=(n,e)=>{let t=n.createDelay(e.maxDelayTime);return je(t,e),tt(t,e,"delayTime"),t};var rP=n=>(e,t)=>{let r=e.createDynamicsCompressor();if(je(r,t),t.channelCount>2||t.channelCountMode==="max")throw n();return tt(r,t,"attack"),tt(r,t,"knee"),tt(r,t,"ratio"),tt(r,t,"release"),tt(r,t,"threshold"),r};var Jn=(n,e)=>{let t=n.createGain();return je(t,e),tt(t,e,"gain"),t};var iP=n=>(e,t,r)=>{if(e.createIIRFilter===void 0)return n(e,t,r);let i=e.createIIRFilter(r.feedforward,r.feedback);return je(i,r),i};function yq(n,e){let t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function vq(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function sP(n,e){let t=[0,0];for(let r=n.length-1;r>=0;r-=1)t=vq(t,e),t[0]+=n[r];return t}var oP=(n,e,t,r)=>(i,s,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:u})=>{let h=Jg(s,i.sampleRate),d=c instanceof Float64Array?c:new Float64Array(c),f=u instanceof Float64Array?u:new Float64Array(u),p=d.length,m=f.length,g=Math.min(p,m);if(p===0||p>20)throw r();if(d[0]===0)throw e();if(m===0||m>20)throw r();if(f[0]===0)throw e();if(d[0]!==1){for(let w=0;w<m;w+=1)f[w]/=d[0];for(let w=1;w<p;w+=1)d[w]/=d[0]}let _=t(i,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=l;let v=32,y=[],x=[],T=[];for(let w=0;w<o;w+=1){y.push(0);let P=new Float32Array(v),U=new Float32Array(v);P.fill(0),U.fill(0),x.push(P),T.push(U)}_.onaudioprocess=w=>{let P=w.inputBuffer,U=w.outputBuffer,R=P.numberOfChannels;for(let I=0;I<R;I+=1){let M=P.getChannelData(I),E=U.getChannelData(I);y[I]=Kg(d,p,f,m,g,x[I],T[I],y[I],v,M,E)}};let C=i.sampleRate/2;return Jr({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(w){_.channelCount=w},get channelCountMode(){return _.channelCountMode},set channelCountMode(w){_.channelCountMode=w},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(w){_.channelInterpretation=w},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener(...w){return _.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return _.dispatchEvent(w[0])},getFrequencyResponse(w,P,U){if(w.length!==P.length||P.length!==U.length)throw n();let R=w.length;for(let I=0;I<R;I+=1){let M=-Math.PI*(w[I]/C),E=[Math.cos(M),Math.sin(M)],O=sP(f,E),k=sP(d,E),A=yq(O,k);P[I]=Math.sqrt(A[0]*A[0]+A[1]*A[1]),U[I]=Math.atan2(A[1],A[0])}},removeEventListener(...w){return _.removeEventListener(w[0],w[1],w[2])}},_)};var aP=(n,e)=>n.createMediaElementSource(e.mediaElement);var lP=(n,e)=>{let t=n.createMediaStreamDestination();return je(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t};var cP=(n,{mediaStream:e})=>{let t=e.getAudioTracks();t.sort((s,o)=>s.id<o.id?-1:s.id>o.id?1:0);let r=t.slice(0,1),i=n.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i};var uP=(n,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);let i=new MediaStream([r]),s=t.createMediaStreamSource(i);if(r.kind!=="audio")throw n();if(e(t))throw new TypeError;return s};var hP=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null;var dP=(n,e,t,r,i,s)=>(o,a)=>{let l=o.createOscillator();return je(l,a),tt(l,a,"detune"),tt(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):Ke(l,a,"type"),e(t,()=>t(o))||Pc(l),e(r,()=>r(o))||s(l,o),e(i,()=>i(o))||Fc(l),n(o,l),l};var fP=n=>(e,t)=>{let r=e.createPanner();return r.orientationX===void 0?n(e,t):(je(r,t),tt(r,t,"orientationX"),tt(r,t,"orientationY"),tt(r,t,"orientationZ"),tt(r,t,"positionX"),tt(r,t,"positionY"),tt(r,t,"positionZ"),Ke(r,t,"coneInnerAngle"),Ke(r,t,"coneOuterAngle"),Ke(r,t,"coneOuterGain"),Ke(r,t,"distanceModel"),Ke(r,t,"maxDistance"),Ke(r,t,"panningModel"),Ke(r,t,"refDistance"),Ke(r,t,"rolloffFactor"),r)};var pP=(n,e,t,r,i,s,o,a,l,c)=>(u,U)=>{var R=U,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:g,orientationY:_,orientationZ:v,panningModel:y,positionX:x,positionY:T,positionZ:C,refDistance:b,rolloffFactor:w}=R,P=Tr(R,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);let I=u.createPanner();if(P.channelCount>2||P.channelCountMode==="max")throw o();je(I,P);let M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=t(u,W(S({},M),{channelInterpretation:"speakers",numberOfInputs:6})),O=r(u,W(S({},P),{gain:1})),k=r(u,W(S({},M),{gain:1})),A=r(u,W(S({},M),{gain:0})),F=r(u,W(S({},M),{gain:0})),N=r(u,W(S({},M),{gain:0})),B=r(u,W(S({},M),{gain:0})),H=r(u,W(S({},M),{gain:0})),he=i(u,256,6,1),Ce=s(u,W(S({},M),{curve:new Float32Array([1,1]),oversample:"none"})),Ne=[g,_,v],We=[x,T,C],Te=new Float32Array(1);he.onaudioprocess=({inputBuffer:Y})=>{let Ze=[l(Y,Te,0),l(Y,Te,1),l(Y,Te,2)];Ze.some((mt,Cn)=>mt!==Ne[Cn])&&(I.setOrientation(...Ze),Ne=Ze);let yt=[l(Y,Te,3),l(Y,Te,4),l(Y,Te,5)];yt.some((mt,Cn)=>mt!==We[Cn])&&(I.setPosition(...yt),We=yt)},Object.defineProperty(A.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0});let ne={get bufferSize(){},get channelCount(){return I.channelCount},set channelCount(Y){if(Y>2)throw o();O.channelCount=Y,I.channelCount=Y},get channelCountMode(){return I.channelCountMode},set channelCountMode(Y){if(Y==="max")throw o();O.channelCountMode=Y,I.channelCountMode=Y},get channelInterpretation(){return I.channelInterpretation},set channelInterpretation(Y){O.channelInterpretation=Y,I.channelInterpretation=Y},get coneInnerAngle(){return I.coneInnerAngle},set coneInnerAngle(Y){I.coneInnerAngle=Y},get coneOuterAngle(){return I.coneOuterAngle},set coneOuterAngle(Y){I.coneOuterAngle=Y},get coneOuterGain(){return I.coneOuterGain},set coneOuterGain(Y){if(Y<0||Y>1)throw e();I.coneOuterGain=Y},get context(){return I.context},get distanceModel(){return I.distanceModel},set distanceModel(Y){I.distanceModel=Y},get inputs(){return[O]},get maxDistance(){return I.maxDistance},set maxDistance(Y){if(Y<0)throw new RangeError;I.maxDistance=Y},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get orientationX(){return k.gain},get orientationY(){return A.gain},get orientationZ(){return F.gain},get panningModel(){return I.panningModel},set panningModel(Y){I.panningModel=Y},get positionX(){return N.gain},get positionY(){return B.gain},get positionZ(){return H.gain},get refDistance(){return I.refDistance},set refDistance(Y){if(Y<0)throw new RangeError;I.refDistance=Y},get rolloffFactor(){return I.rolloffFactor},set rolloffFactor(Y){if(Y<0)throw new RangeError;I.rolloffFactor=Y},addEventListener(...Y){return O.addEventListener(Y[0],Y[1],Y[2])},dispatchEvent(...Y){return O.dispatchEvent(Y[0])},removeEventListener(...Y){return O.removeEventListener(Y[0],Y[1],Y[2])}};h!==ne.coneInnerAngle&&(ne.coneInnerAngle=h),d!==ne.coneOuterAngle&&(ne.coneOuterAngle=d),f!==ne.coneOuterGain&&(ne.coneOuterGain=f),p!==ne.distanceModel&&(ne.distanceModel=p),m!==ne.maxDistance&&(ne.maxDistance=m),g!==ne.orientationX.value&&(ne.orientationX.value=g),_!==ne.orientationY.value&&(ne.orientationY.value=_),v!==ne.orientationZ.value&&(ne.orientationZ.value=v),y!==ne.panningModel&&(ne.panningModel=y),x!==ne.positionX.value&&(ne.positionX.value=x),T!==ne.positionY.value&&(ne.positionY.value=T),C!==ne.positionZ.value&&(ne.positionZ.value=C),b!==ne.refDistance&&(ne.refDistance=b),w!==ne.rolloffFactor&&(ne.rolloffFactor=w),(Ne[0]!==1||Ne[1]!==0||Ne[2]!==0)&&I.setOrientation(...Ne),(We[0]!==0||We[1]!==0||We[2]!==0)&&I.setPosition(...We);let pt=()=>{O.connect(I),n(O,Ce,0,0),Ce.connect(k).connect(E,0,0),Ce.connect(A).connect(E,0,1),Ce.connect(F).connect(E,0,2),Ce.connect(N).connect(E,0,3),Ce.connect(B).connect(E,0,4),Ce.connect(H).connect(E,0,5),E.connect(he).connect(u.destination)},nt=()=>{O.disconnect(I),a(O,Ce,0,0),Ce.disconnect(k),k.disconnect(E),Ce.disconnect(A),A.disconnect(E),Ce.disconnect(F),F.disconnect(E),Ce.disconnect(N),N.disconnect(E),Ce.disconnect(B),B.disconnect(E),Ce.disconnect(H),H.disconnect(E),E.disconnect(he),he.disconnect(u.destination)};return c(Jr(ne,I),pt,nt)};var mP=n=>(e,{disableNormalization:t,imag:r,real:i})=>{let s=r instanceof Float32Array?r:new Float32Array(r),o=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(o,s,{disableNormalization:t});if(Array.from(r).length<2)throw n();return a};var Lc=(n,e,t,r)=>n.createScriptProcessor(e,t,r);var gP=(n,e)=>(t,r)=>{let i=r.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,r);let s=t.createStereoPanner();return je(s,r),tt(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:o=>{if(o!==i)throw e()}}),s};var _P=(n,e,t,r,i,s)=>{let a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u=W(S({},c),{oversample:"none"}),h=(p,m,g,_)=>{let v=new Float32Array(16385),y=new Float32Array(16385);for(let P=0;P<16385;P+=1){let U=P/16384*l;v[P]=Math.cos(U),y[P]=Math.sin(U)}let x=t(p,W(S({},c),{gain:0})),T=r(p,W(S({},u),{curve:v})),C=r(p,W(S({},u),{curve:a})),b=t(p,W(S({},c),{gain:0})),w=r(p,W(S({},u),{curve:y}));return{connectGraph(){m.connect(x),m.connect(C.inputs===void 0?C:C.inputs[0]),m.connect(b),C.connect(g),g.connect(T.inputs===void 0?T:T.inputs[0]),g.connect(w.inputs===void 0?w:w.inputs[0]),T.connect(x.gain),w.connect(b.gain),x.connect(_,0,0),b.connect(_,0,1)},disconnectGraph(){m.disconnect(x),m.disconnect(C.inputs===void 0?C:C.inputs[0]),m.disconnect(b),C.disconnect(g),g.disconnect(T.inputs===void 0?T:T.inputs[0]),g.disconnect(w.inputs===void 0?w:w.inputs[0]),T.disconnect(x.gain),w.disconnect(b.gain),x.disconnect(_,0,0),b.disconnect(_,0,1)}}},d=(p,m,g,_)=>{let v=new Float32Array(16385),y=new Float32Array(16385),x=new Float32Array(16385),T=new Float32Array(16385),C=Math.floor(16385/2);for(let A=0;A<16385;A+=1)if(A>C){let F=(A-C)/(16384-C)*l;v[A]=Math.cos(F),y[A]=Math.sin(F),x[A]=0,T[A]=1}else{let F=A/(16384-C)*l;v[A]=1,y[A]=0,x[A]=Math.cos(F),T[A]=Math.sin(F)}let b=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=t(p,W(S({},c),{gain:0})),P=r(p,W(S({},u),{curve:v})),U=t(p,W(S({},c),{gain:0})),R=r(p,W(S({},u),{curve:y})),I=r(p,W(S({},u),{curve:a})),M=t(p,W(S({},c),{gain:0})),E=r(p,W(S({},u),{curve:x})),O=t(p,W(S({},c),{gain:0})),k=r(p,W(S({},u),{curve:T}));return{connectGraph(){m.connect(b),m.connect(I.inputs===void 0?I:I.inputs[0]),b.connect(w,0),b.connect(U,0),b.connect(M,1),b.connect(O,1),I.connect(g),g.connect(P.inputs===void 0?P:P.inputs[0]),g.connect(R.inputs===void 0?R:R.inputs[0]),g.connect(E.inputs===void 0?E:E.inputs[0]),g.connect(k.inputs===void 0?k:k.inputs[0]),P.connect(w.gain),R.connect(U.gain),E.connect(M.gain),k.connect(O.gain),w.connect(_,0,0),M.connect(_,0,0),U.connect(_,0,1),O.connect(_,0,1)},disconnectGraph(){m.disconnect(b),m.disconnect(I.inputs===void 0?I:I.inputs[0]),b.disconnect(w,0),b.disconnect(U,0),b.disconnect(M,1),b.disconnect(O,1),I.disconnect(g),g.disconnect(P.inputs===void 0?P:P.inputs[0]),g.disconnect(R.inputs===void 0?R:R.inputs[0]),g.disconnect(E.inputs===void 0?E:E.inputs[0]),g.disconnect(k.inputs===void 0?k:k.inputs[0]),P.disconnect(w.gain),R.disconnect(U.gain),E.disconnect(M.gain),k.disconnect(O.gain),w.disconnect(_,0,0),M.disconnect(_,0,0),U.disconnect(_,0,1),O.disconnect(_,0,1)}}},f=(p,m,g,_,v)=>{if(m===1)return h(p,g,_,v);if(m===2)return d(p,g,_,v);throw i()};return(p,y)=>{var x=y,{channelCount:m,channelCountMode:g,pan:_}=x,v=Tr(x,["channelCount","channelCountMode","pan"]);if(g==="max")throw i();let T=n(p,W(S({},v),{channelCount:1,channelCountMode:g,numberOfInputs:2})),C=t(p,W(S({},v),{channelCount:m,channelCountMode:g,gain:1})),b=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:_}),{connectGraph:w,disconnectGraph:P}=f(p,m,C,b,T);Object.defineProperty(b.gain,"defaultValue",{get:()=>0}),Object.defineProperty(b.gain,"maxValue",{get:()=>1}),Object.defineProperty(b.gain,"minValue",{get:()=>-1});let U={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(E){C.channelCount!==E&&(R&&P(),{connectGraph:w,disconnectGraph:P}=f(p,E,C,b,T),R&&w()),C.channelCount=E},get channelCountMode(){return C.channelCountMode},set channelCountMode(E){if(E==="clamped-max"||E==="max")throw i();C.channelCountMode=E},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(E){C.channelInterpretation=E},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get pan(){return b.gain},addEventListener(...E){return C.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return C.dispatchEvent(E[0])},removeEventListener(...E){return C.removeEventListener(E[0],E[1],E[2])}},R=!1,I=()=>{w(),R=!0},M=()=>{P(),R=!1};return s(Jr(U,T),I,M)}};var yP=(n,e,t,r,i,s,o)=>(a,l)=>{let c=a.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,l);je(c,l);let u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();Ke(c,{curve:u},"curve"),Ke(c,l,"oversample");let h=null,d=!1;return o(c,"curve",m=>()=>m.call(c),m=>g=>(m.call(c,g),d&&(r(g)&&h===null?h=n(a,c):!r(g)&&h!==null&&(h(),h=null)),g)),i(c,()=>{d=!0,r(c.curve)&&(h=n(a,c))},()=>{d=!1,h!==null&&(h(),h=null)})};var vP=(n,e,t,r,i)=>(s,c)=>{var u=c,{curve:o,oversample:a}=u,l=Tr(u,["curve","oversample"]);let h=s.createWaveShaper(),d=s.createWaveShaper();je(h,l),je(d,l);let f=t(s,W(S({},l),{gain:1})),p=t(s,W(S({},l),{gain:-1})),m=t(s,W(S({},l),{gain:1})),g=t(s,W(S({},l),{gain:-1})),_=null,v=!1,y=null,x={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(b){f.channelCount=b,p.channelCount=b,h.channelCount=b,m.channelCount=b,d.channelCount=b,g.channelCount=b},get channelCountMode(){return h.channelCountMode},set channelCountMode(b){f.channelCountMode=b,p.channelCountMode=b,h.channelCountMode=b,m.channelCountMode=b,d.channelCountMode=b,g.channelCountMode=b},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(b){f.channelInterpretation=b,p.channelInterpretation=b,h.channelInterpretation=b,m.channelInterpretation=b,d.channelInterpretation=b,g.channelInterpretation=b},get context(){return h.context},get curve(){return y},set curve(b){if(b!==null&&b.length<2)throw e();if(b===null)h.curve=b,d.curve=b;else{let w=b.length,P=new Float32Array(w+2-w%2),U=new Float32Array(w+2-w%2);P[0]=b[0],U[0]=-b[w-1];let R=Math.ceil((w+1)/2),I=(w+1)/2-1;for(let M=1;M<R;M+=1){let E=M/R*I,O=Math.floor(E),k=Math.ceil(E);P[M]=O===k?b[O]:(1-(E-O))*b[O]+(1-(k-E))*b[k],U[M]=O===k?-b[w-1-O]:-((1-(E-O))*b[w-1-O])-(1-(k-E))*b[w-1-k]}P[R]=w%2===1?b[R-1]:(b[R-2]+b[R-1])/2,h.curve=P,d.curve=U}y=b,v&&(r(y)&&_===null?_=n(s,f):_!==null&&(_(),_=null))},get inputs(){return[f]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(b){h.oversample=b,d.oversample=b},addEventListener(...b){return f.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return f.dispatchEvent(b[0])},removeEventListener(...b){return f.removeEventListener(b[0],b[1],b[2])}};o!==null&&(x.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==x.oversample&&(x.oversample=a);let T=()=>{f.connect(h).connect(m),f.connect(p).connect(d).connect(g).connect(m),v=!0,r(y)&&(_=n(s,f))},C=()=>{f.disconnect(h),h.disconnect(m),f.disconnect(p),p.disconnect(d),d.disconnect(g),g.disconnect(m),v=!1,_!==null&&(_(),_=null)};return i(Jr(x,m),T,C)};var yn=()=>new DOMException("","NotSupportedError");var xq={numberOfChannels:1},xP=(n,e,t,r,i)=>class extends n{constructor(o,a,l){let c;if(typeof o=="number"&&a!==void 0&&l!==void 0)c={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")c=o;else throw new Error("The given parameters are not valid.");let{length:u,numberOfChannels:h,sampleRate:d}=S(S({},xq),c),f=r(h,u,d);e(Ii,()=>Ii(f))||f.addEventListener("statechange",(()=>{let p=0,m=g=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(f,h),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Bo(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}};var bq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},bP=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){let u=i(l),h=S(S({},bq),c),d=t(u,h),f=s(u),p=f?r():null,m=l.sampleRate/2;super(l,!1,d,p),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,m,-m),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){let c=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=c;let u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Di(this);let c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Kn(this)&&ls(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}};var wP=(n,e,t,r,i)=>()=>{let s=new WeakMap,o=null,a=null,l=null,c=(u,h)=>L(void 0,null,function*(){let d=t(u),f=Qe(d,h);if(!f){let p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,p),a!==null&&d.start(a),l!==null&&d.stop(l)}return s.set(h,d),f?(yield n(h,u.detune,d.detune),yield n(h,u.frequency,d.frequency)):(yield r(h,u.detune,d.detune),yield r(h,u.frequency,d.frequency)),yield i(u,h,d),d});return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){l=u},render(u,h){let d=s.get(h);return d!==void 0?Promise.resolve(d):c(u,h)}}};var wq={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},TP=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){let u=i(l),h=S(S({},wq),c),d=t(u,h),f=s(u),p=f?r():null;super(l,!1,d,p),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,Ft,zt),this._orientationY=e(this,f,d.orientationY,Ft,zt),this._orientationZ=e(this,f,d.orientationZ,Ft,zt),this._positionX=e(this,f,d.positionX,Ft,zt),this._positionY=e(this,f,d.positionY,Ft,zt),this._positionZ=e(this,f,d.positionZ,Ft,zt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}};var SP=(n,e,t,r,i,s,o,a,l,c)=>()=>{let u=new WeakMap,h=null,d=(f,p)=>L(void 0,null,function*(){let m=null,g=s(f),_={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},v=W(S({},_),{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),y=Qe(g,p);if("bufferSize"in g)m=r(p,W(S({},_),{gain:1}));else if(!y){let x=W(S({},v),{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=i(p,x)}if(u.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");let R=new o(6,f.context.length,p.sampleRate),I=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});I.connect(R.destination),h=(()=>L(void 0,null,function*(){let M=yield Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((E,O)=>L(void 0,null,function*(){let k=t(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:O===0?1:0});return yield a(R,E,k.offset),k})));for(let E=0;E<6;E+=1)M[E].connect(I,0,E),M[E].start(0);return c(R)}))()}let x=yield h,T=r(p,W(S({},_),{gain:1}));yield l(f,p,T);let C=[];for(let R=0;R<x.numberOfChannels;R+=1)C.push(x.getChannelData(R));let b=[C[0][0],C[1][0],C[2][0]],w=[C[3][0],C[4][0],C[5][0]],P=r(p,W(S({},_),{gain:1})),U=i(p,W(S({},v),{orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:w[0],positionY:w[1],positionZ:w[2]}));T.connect(P).connect(U.inputs[0]),U.connect(m);for(let R=128;R<x.length;R+=128){let I=[C[0][R],C[1][R],C[2][R]],M=[C[3][R],C[4][R],C[5][R]];if(I.some((E,O)=>E!==b[O])||M.some((E,O)=>E!==w[O])){b=I,w=M;let E=R/p.sampleRate;P.gain.setValueAtTime(0,E),P=r(p,W(S({},_),{gain:0})),U=i(p,W(S({},v),{orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:w[0],positionY:w[1],positionZ:w[2]})),P.gain.setValueAtTime(1,E),T.connect(P).connect(U.inputs[0]),U.connect(m)}}return m}return y?(yield n(p,f.orientationX,g.orientationX),yield n(p,f.orientationY,g.orientationY),yield n(p,f.orientationZ,g.orientationZ),yield n(p,f.positionX,g.positionX),yield n(p,f.positionY,g.positionY),yield n(p,f.positionZ,g.positionZ)):(yield a(p,f.orientationX,g.orientationX),yield a(p,f.orientationY,g.orientationY),yield a(p,f.orientationZ,g.orientationZ),yield a(p,f.positionX,g.positionX),yield a(p,f.positionY,g.positionY),yield a(p,f.positionZ,g.positionZ)),Kr(g)?yield l(f,p,g.inputs[0]):yield l(f,p,g),g});return{render(f,p){let m=u.get(p);return m!==void 0?Promise.resolve(m):d(f,p)}}};var Tq={disableNormalization:!1},EP=(n,e,t,r)=>class CP{constructor(s,o){let a=e(s),l=r(S(S({},Tq),o)),c=n(a,l);return t.add(c),c}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===CP.prototype||t.has(s)}};var DP=(n,e)=>(t,r,i)=>(n(r).replay(i),e(r,t,i));var AP=(n,e,t)=>(r,i,s)=>L(void 0,null,function*(){let o=n(r);yield Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(h=>L(void 0,[h],function*([c,u]){let f=yield e(c).render(c,i),p=r.context.destination;!t(c)&&(r!==p||!t(r))&&f.connect(s,u,l)}))).reduce((a,l)=>[...a,...l],[]))});var IP=(n,e,t)=>(r,i,s)=>L(void 0,null,function*(){let o=e(r);yield Promise.all(Array.from(o.activeInputs).map(c=>L(void 0,[c],function*([a,l]){let h=yield n(a).render(a,i);t(a)||h.connect(s,l)})))});var MP=(n,e,t,r)=>i=>n(Ii,()=>Ii(i))?Promise.resolve(n(r,r)).then(s=>{if(!s){let o=t(i,512,0,1);i.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>i.currentTime,o.connect(i.destination)}return i.startRendering()}):new Promise(s=>{let o=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{o.disconnect(),s(a.renderedBuffer)},o.connect(i.destination),i.startRendering()});var OP=n=>(e,t)=>{n.set(e,t)};var RP=n=>(e,t)=>n.set(e,t);var NP=(n,e,t,r,i,s,o,a)=>(l,c)=>t(l).render(l,c).then(()=>Promise.all(Array.from(r(c)).map(u=>t(u).render(u,c)))).then(()=>i(c)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Cc(u)):e(s,()=>s(u))||a(u),n.add(u),u));var Sq={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},PP=(n,e,t,r,i,s)=>class extends n{constructor(a,l){let c=i(a),u=S(S({},Sq),l),h=t(c,u),d=s(c),f=d?r():null;super(a,!1,h,f),this._pan=e(this,d,h.pan)}get pan(){return this._pan}};var FP=(n,e,t,r,i)=>()=>{let s=new WeakMap,o=(a,l)=>L(void 0,null,function*(){let c=t(a),u=Qe(c,l);if(!u){let h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,h)}return s.set(l,c),u?yield n(l,a.pan,c.pan):yield r(l,a.pan,c.pan),Kr(c)?yield i(a,l,c.inputs[0]):yield i(a,l,c),c});return{render(a,l){let c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}};var kP=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0};var LP=(n,e)=>()=>L(void 0,null,function*(){if(n===null)return!0;if(e===null)return!1;let t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(t),s=!1,o=!1;try{yield r.audioWorklet.addModule(i);let a=new n(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>s=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),yield r.startRendering(),yield new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(i)}return s&&!o});var BP=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);let t=new e(1,1,44100),r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{r.disconnect(),i(t.currentTime!==0)},t.startRendering()})};var E1=()=>new DOMException("","UnknownError");var Eq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},VP=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){let u=i(l),h=S(S({},Eq),c),d=t(u,h),p=s(u)?r():null;super(l,!0,d,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}};var UP=(n,e,t)=>()=>{let r=new WeakMap,i=(s,o)=>L(void 0,null,function*(){let a=e(s);if(!Qe(a,o)){let c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,c)}return r.set(o,a),Kr(a)?yield t(s,o,a.inputs[0]):yield t(s,o,a),a});return{render(s,o){let a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}};var jP=()=>typeof window>"u"?null:window;var GP=(n,e)=>t=>{t.copyFromChannel=(r,i,s=0)=>{let o=n(s),a=n(i);if(a>=t.numberOfChannels)throw e();let l=t.length,c=t.getChannelData(a),u=r.length;for(let h=o<0?-o:0;h+o<l&&h<u;h+=1)r[h]=c[h+o]},t.copyToChannel=(r,i,s=0)=>{let o=n(s),a=n(i);if(a>=t.numberOfChannels)throw e();let l=t.length,c=t.getChannelData(a),u=r.length;for(let h=o<0?-o:0;h+o<l&&h<u;h+=1)c[h+o]=r[h]}};var HP=n=>e=>{e.copyFromChannel=(t=>(r,i,s=0)=>{let o=n(s),a=n(i);if(o<e.length)return t.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(r,i,s=0)=>{let o=n(s),a=n(i);if(o<e.length)return t.call(e,r,a,o)})(e.copyToChannel)};var $P=n=>(e,t)=>{let r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),n(e,"buffer",i=>()=>{let s=i.call(e);return s===r?null:s},i=>s=>i.call(e,s===null?r:s))};var WP=(n,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});let i=t.createBufferSource();e(r,()=>{let a=r.numberOfInputs;for(let l=0;l<a;l+=1)i.connect(r,0,l)},()=>i.disconnect(r))};var C1=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]);var D1=n=>{if(n===null)return!1;let e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0};var Bc=(n,e,t,r)=>{let i=n;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);let{get:s,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,{get:t(s),set:r(o)})};var zP=n=>W(S({},n),{outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)});var qP=n=>W(S({},n),{channelCount:n.numberOfOutputs});var XP=n=>{let{imag:e,real:t}=n;return e===void 0?t===void 0?W(S({},n),{imag:[0,0],real:[0,0]}):W(S({},n),{imag:Array.from(t,()=>0),real:t}):t===void 0?W(S({},n),{imag:e,real:Array.from(e,()=>0)}):W(S({},n),{imag:e,real:t})};var A1=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;A1(n,e,t+1e-7)}};var YP=n=>{let e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1};var ZP=n=>{let e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0};var QP=n=>{let e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0};var e_=n=>{let e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1};var I1=n=>{let e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}};var t_=n=>{let e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1};var KP=n=>{let{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}};var JP=n=>{n.start=(e=>(t=0,r=0,i)=>{let s=n.buffer,o=s===null?r:Math.min(s.duration,r);s!==null&&o>s.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,i)})(n.start)};var M1=(n,e)=>{let t=e.createGain();n.connect(t);let r=(i=>()=>{i.call(n,t),n.removeEventListener("ended",r)})(n.disconnect);n.addEventListener("ended",r),Jr(n,t),n.stop=(i=>{let s=!1;return(o=0)=>{if(s)try{i.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else i.call(n,o),s=!0}})(n.stop)};var za=(n,e)=>t=>{let r={value:n};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)};var Cq=GO(Ai),Dq=KO(Ai),Aq=XR(ko),tF=new WeakMap,Iq=uN(tF),ei=IR(new Map,new WeakMap),cs=jP(),nF=VN(ei,Qr),O1=cN(nn),vn=AP(nn,O1,Gs),Mq=nR(nF,ht,vn),vt=fN(Sc),Hs=hP(cs),dt=AN(Hs),rF=new WeakMap,iF=rN(za),Vc=HN(cs),R1=SN(Vc),N1=EN(cs),sF=CN(cs),Rd=WN(cs),qt=vR(HO(Gg),QO(Cq,Dq,Dc,Aq,Ac,nn,Iq,as,ht,Ai,Kn,Gs,Ic),ei,vN(Ad,Ac,nn,ht,$a,Kn),Qr,Nc,yn,WR(Dc,Ad,nn,ht,$a,vt,Kn,dt),QR(rF,nn,Qt),iF,vt,R1,N1,sF,dt,Rd),Oq=tR(qt,Mq,Qr,nF,vt,dt);var P1=new WeakSet,eF=UN(cs),oF=VR(new Uint32Array(1)),F1=GP(oF,Qr),k1=HP(oF),Rq=rR(P1,ei,yn,eF,Hs,kP(eF),F1,k1);var n_=JO(Jn),aF=IP(O1,Lo,Gs),us=PR(aF),Uc=GN(n_,ei,YP,ZP,QP,e_,I1,t_,JP,$P(Bc),M1),hs=DP(hN(Lo),aF),Nq=oR(us,Uc,ht,hs,vn),Mi=bR($O(Hg),rF,Dd,wR,mr.createCancelAndHoldAutomationEvent,mr.createCancelScheduledValuesAutomationEvent,mr.createExponentialRampToValueAutomationEvent,mr.createLinearRampToValueAutomationEvent,mr.createSetTargetAutomationEvent,mr.createSetValueAutomationEvent,mr.createSetValueCurveAutomationEvent,Vc,A1),Pq=sR(qt,Nq,Mi,Et,Uc,vt,dt,za);var Fq=pR(qt,mR,Qr,Et,$N(Jn,Bc),vt,dt,vn),kq=AR(us,T1,ht,hs,vn),qa=RP(tF),Lq=DR(qt,Mi,kq,Nc,T1,vt,dt,qa),Uo=LN(Ai,N1),Bq=WP(Et,Uo),jo=KN(Vc,Bq),Vq=OR(jo,ht,vn),Uq=MR(qt,Vq,jo,vt,dt),jq=NR(kc,ht,vn),Gq=RR(qt,jq,kc,vt,dt,qP),Hq=tP(n_,Uc,Jn,Uo),jc=eP(n_,ei,Hq,e_,t_),$q=BR(us,jc,ht,hs,vn),Wq=LR(qt,Mi,$q,jc,vt,dt,za),lF=nP(yn,Bc),zq=jR(lF,ht,vn),qq=UR(qt,zq,lF,vt,dt,qa),Xq=qR(us,S1,ht,hs,vn),Yq=zR(qt,Mi,Xq,S1,vt,dt,qa),cF=rP(yn),Zq=eN(us,cF,ht,hs,vn),Qq=JR(qt,Mi,Zq,cF,yn,vt,dt,qa),Kq=aN(us,Jn,ht,hs,vn),Jq=oN(qt,Mi,Kq,Jn,vt,dt),e7=oP(Nc,Et,Lc,yn),r_=MP(ei,Jn,Lc,BP(Jn,Hs)),t7=yN(Uc,ht,Hs,vn,r_),n7=iP(e7),r7=_N(qt,n7,t7,vt,dt,qa),i7=gR(Mi,jo,jc,Lc,yn,C1,dt,Bc),uF=new WeakMap,L1=FN(Fq,i7,iF,dt,uF,za),hF=dP(n_,ei,e_,I1,t_,M1),s7=wP(us,hF,ht,hs,vn),o7=bP(qt,Mi,hF,s7,vt,dt,za),dF=kR(Uc),a7=vP(dF,Et,Jn,D1,Uo),i_=yP(dF,Et,a7,D1,Uo,Vc,Bc),l7=pP(Dc,Et,jo,Jn,Lc,i_,yn,Ac,C1,Uo),fF=fP(l7),c7=SP(us,jo,jc,Jn,fF,ht,Hs,hs,vn,r_),u7=TP(qt,Mi,fF,c7,vt,dt,qa),h7=mP(Qr),d7=EP(h7,vt,new WeakSet,XP),f7=_P(jo,kc,Jn,i_,yn,Uo),pF=gP(f7,yn),p7=FP(us,pF,ht,hs,vn),m7=PP(qt,Mi,pF,p7,vt,dt),g7=UP(i_,ht,vn),_7=VP(qt,Et,i_,g7,vt,dt,qa),mF=IN(cs),B1=iN(cs),gF=new WeakMap,y7=pN(gF,Hs),v7=mF?ZO(ei,yn,nN(cs),B1,sN(jO),vt,y7,dt,Rd,new WeakMap,new WeakMap,LP(Rd,Hs),cs):void 0,x7=DN(R1,dt),b7=$R(P1,ei,HR,tN,new WeakSet,vt,x7,Ec,Ii,F1,k1),_F=CR(v7,Oq,Rq,Pq,Lq,Uq,Gq,Wq,qq,b7,Yq,Qq,Jq,r7,L1,o7,u7,d7,m7,_7),w7=MN(qt,aP,vt,dt),T7=ON(qt,lP,vt,dt),S7=RN(qt,cP,vt,dt),E7=uP(Et,dt),C7=NN(qt,E7,vt),yF=fR(_F,Et,yn,E1,w7,T7,S7,C7,Vc);var V1=mN(uF),D7=eR(V1),vF=FR(Qr),A7=YR(V1),xF=KR(Qr),bF=new WeakMap,I7=lN(bF,Qt),M7=QN(vF,Qr,Et,jo,kc,jc,Jn,Lc,yn,xF,B1,I7,Uo),O7=qN(Et,M7,Jn,yn,Uo),R7=ER(us,vF,Uc,jo,kc,jc,Jn,A7,xF,B1,ht,Rd,Hs,hs,vn,r_),N7=dN(gF),P7=OP(bF),U1=mF?TR(D7,qt,Mi,R7,O7,nn,N7,vt,dt,Rd,zP,P7,KP,za):void 0;var cIe=PN(Et,yn,E1,L1,Vc);var wF=GR(yn,Hs),TF=NP(P1,ei,O1,V1,r_,Ec,F1,k1),uIe=kN(ei,Et,wF,L1,TF);var SF=xP(_F,ei,Et,wF,TF);var EF=xN(Sc,R1),CF=bN(Tc,N1),DF=wN(Dd,sF),AF=TN(Sc,dt);function J(n,e){if(!n)throw new Error(e)}function on(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function s_(n){!n.isOffline&&n.state!=="running"&&Gc('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var IF=console;function MF(...n){IF.log(...n)}function Gc(...n){IF.warn(...n)}function Xt(n){return typeof n>"u"}function ge(n){return!Xt(n)}function OF(n){return typeof n=="function"}function an(n){return typeof n=="number"}function ti(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function o_(n){return typeof n=="boolean"}function Ct(n){return Array.isArray(n)}function ln(n){return typeof n=="string"}function Nd(n){return ln(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function RF(n){return new yF(n)}function NF(n,e,t){return new SF(n,e,t)}var ds=typeof self=="object"?self:null,PF=ds&&(ds.hasOwnProperty("AudioContext")||ds.hasOwnProperty("webkitAudioContext"));function FF(n,e,t){return J(ge(U1),"This node only works in a secure context (https or localhost)"),new U1(n,e,t)}var a_=class{constructor(e,t,r){this._callback=e,this._type=t,this._updateInterval=r,this._createClock()}_createWorker(){let e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),r=new Worker(t);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}};function Oi(n){return DF(n)}function fs(n){return CF(n)}function Hc(n){return AF(n)}function Go(n){return EF(n)}function l_(n){return n instanceof AudioBuffer}function L7(n,e){return n==="value"||Oi(e)||fs(e)||l_(e)}function ni(n,...e){if(!e.length)return n;let t=e.shift();if(ti(n)&&ti(t))for(let r in t)L7(r,t[r])?n[r]=t[r]:ti(t[r])?(n[r]||Object.assign(n,{[r]:{}}),ni(n[r],t[r])):Object.assign(n,{[r]:t[r]});return ni(n,...e)}function kF(n,e){return n.length===e.length&&n.every((t,r)=>e[r]===t)}function D(n,e,t=[],r){let i={},s=Array.from(e);if(ti(s[0])&&r&&!Reflect.has(s[0],r)&&(Object.keys(s[0]).some(a=>Reflect.has(n,a))||(ni(i,{[r]:s[0]}),t.splice(t.indexOf(r),1),s.shift())),s.length===1&&ti(s[0]))ni(i,s[0]);else for(let o=0;o<t.length;o++)ge(s[o])&&(i[t[o]]=s[o]);return ni(n,i)}function LF(n){return n.constructor.getDefaults()}function xn(n,e){return Xt(n)?e:n}function er(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}var Vn=(()=>{class n{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||ds&&this.toString()===ds.TONE_DEBUG_CLASS)&&MF(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return n.version=gd,n})();function $c(n,e){return n>e+1e-6}function Pd(n,e){return $c(n,e)||tr(n,e)}function c_(n,e){return n+1e-6<e}function tr(n,e){return Math.abs(n-e)<1e-6}function j1(n,e,t){return Math.max(Math.min(n,t),e)}var cn=class n extends Vn{constructor(){super(),this.name="Timeline",this._timeline=[];let e=D(n.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(J(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){let t=this._timeline[this.length-1];J(Pd(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{let t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){let t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){let t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){let r=this._search(e,t);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){let r=this._search(e,t);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){let t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];let r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(tr(this._timeline[t].time,e)){for(let r=t;r>=0&&tr(this._timeline[r].time,e);r--)t=r;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Pd(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){let t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){let t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let r=0,i=this._timeline.length,s=i;if(i>0&&this._timeline[i-1][t]<=e)return i-1;for(;r<s;){let o=Math.floor(r+(s-r)/2),a=this._timeline[o],l=this._timeline[o+1];if(tr(a[t],e)){for(let c=o;c<this._timeline.length;c++){let u=this._timeline[c];if(tr(u[t],e))o=c;else break}return o}else{if(c_(a[t],e)&&$c(l[t],e))return o;$c(a[t],e)?s=o:r=o+1}}return-1}_iterate(e,t=0,r=this._timeline.length-1){this._timeline.slice(t,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){let r=this._search(e);return r!==-1&&this._iterate(t,0,r),this}forEachAfter(e,t){let r=this._search(e);return this._iterate(t,r+1),this}forEachBetween(e,t,r){let i=this._search(e),s=this._search(t);return i!==-1&&s!==-1?(this._timeline[i].time!==e&&(i+=1),this._timeline[s].time===t&&(s-=1),this._iterate(r,i,s)):i===-1&&this._iterate(r,0,s),this}forEachFrom(e,t){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(t,r+1),this}forEachAtTime(e,t){let r=this._search(e);if(r!==-1&&tr(this._timeline[r].time,e)){let i=r;for(let s=r;s>=0&&tr(this._timeline[s].time,e);s--)i=s;this._iterate(s=>{t(s)},i,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}};var BF=[];function Ho(n){BF.push(n)}function VF(n){BF.forEach(e=>e(n))}var UF=[];function $o(n){UF.push(n)}function jF(n){UF.forEach(e=>e(n))}var Wo=class n extends Vn{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(i=>{Xt(this._events)&&(this._events={}),this._events.hasOwnProperty(i)||(this._events[i]=[]),this._events[i].push(t)}),this}once(e,t){let r=(...i)=>{t(...i),this.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(i=>{if(Xt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Xt(t))this._events[e]=[];else{let s=this._events[e];for(let o=s.length-1;o>=0;o--)s[o]===t&&s.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){let r=this._events[e].slice(0);for(let i=0,s=r.length;i<s;i++)r[i].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{let r=Object.getOwnPropertyDescriptor(n.prototype,t);Object.defineProperty(e.prototype,t,r)})}dispose(){return super.dispose(),this._events=void 0,this}};var Wc=class extends Wo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}};var Xa=class n extends Wc{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new cn,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;let e=D(n.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=RF({latencyHint:e.latencyHint}),this._ticker=new a_(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(VF(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,r){return this._context.createBuffer(e,t,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,r){return this._context.createPeriodicWave(e,t,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return J(Go(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return J(Go(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return J(Go(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){J(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){J(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){J(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){J(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return FF(this.rawContext,e,t)}addAudioWorkletModule(e,t){return He(this,void 0,void 0,function*(){J(ge(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return He(this,void 0,void 0,function*(){let e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,ln(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Go(this._context)?this._context.resume():Promise.resolve()}close(){return He(this,void 0,void 0,function*(){Go(this._context)&&(yield this._context.close()),this._initialized&&jF(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{let t=this._context.createBuffer(1,128,this._context.sampleRate),r=t.getChannelData(0);for(let s=0;s<r.length;s++)r[s]=e;let i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=t,i.loop=!0,i.start(0),this._constants.set(e,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){let e=this.now(),t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;let r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){let r=++this._timeoutIds,i=()=>{let s=this.now();this._timeouts.add({callback:()=>{e(),i()},id:r,time:s+t})};return i(),r}};var u_=class extends Wc{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return He(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};function Z(n,e){Ct(e)?e.forEach(t=>Z(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function zc(n,e){Ct(e)?e.forEach(t=>zc(n,t)):Object.defineProperty(n,e,{writable:!0})}var De=()=>{};var nr=(()=>{class n extends Vn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=De;let t=D(n.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&l_(t.url)||t.url instanceof n?this.set(t.url):ln(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:De,onload:De,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:kt().sampleRate}set(t){return t instanceof n?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return He(this,void 0,void 0,function*(){let r=n.load(t).then(i=>{this.set(i),this.onload(this)});n.downloads.push(r);try{yield r}finally{let i=n.downloads.indexOf(r);n.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){let r=Ct(t)&&t[0].length>0,i=r?t.length:1,s=r?t[0].length:t.length,o=kt(),a=o.createBuffer(i,s,o.sampleRate),l=!r&&i===1?[t]:t;for(let c=0;c<i;c++)a.copyToChannel(l[c],c);return this._buffer=a,this}toMono(t){if(an(t))this.fromArray(this.toArray(t));else{let r=new Float32Array(this.length),i=this.numberOfChannels;for(let s=0;s<i;s++){let o=this.toArray(s);for(let a=0;a<o.length;a++)r[a]+=o[a]}r=r.map(s=>s/i),this.fromArray(r)}return this}toArray(t){if(an(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{let r=[];for(let i=0;i<this.numberOfChannels;i++)r[i]=this.getChannelData(i);return r}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,r=this.duration){let i=Math.floor(t*this.sampleRate),s=Math.floor(r*this.sampleRate);J(i<s,"The start time must be less than the end time");let o=s-i,a=kt().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let l=0;l<this.numberOfChannels;l++)a.copyToChannel(this.getChannelData(l).subarray(i,s),l);return new n(a)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new n().fromArray(t)}static fromUrl(t){return He(this,void 0,void 0,function*(){return yield new n().load(t)})}static load(t){return He(this,void 0,void 0,function*(){let r=t.match(/\[([^\]\[]+\|.+)\]$/);if(r){let l=r[1].split("|"),c=l[0];for(let u of l)if(n.supportsType(u)){c=u;break}t=t.replace(r[0],c)}let i=n.baseUrl===""||n.baseUrl.endsWith("/")?n.baseUrl:n.baseUrl+"/",s=yield fetch(i+t);if(!s.ok)throw new Error(`could not load url: ${t}`);let o=yield s.arrayBuffer();return yield kt().decodeAudioData(o)})}static supportsType(t){let r=t.split("."),i=r[r.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return He(this,void 0,void 0,function*(){for(yield Promise.resolve();n.downloads.length;)yield n.downloads[0]})}}return n.baseUrl="",n.downloads=[],n})();var ps=class extends Xa{constructor(){super({clockSource:"offline",context:Hc(arguments[0])?arguments[0]:NF(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Hc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Hc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return He(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;let r=Math.floor(this.sampleRate/128);e&&t%r===0&&(yield new Promise(i=>setTimeout(i,1)))}})}render(e=!0){return He(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);let t=yield this._context.startRendering();return new nr(t)})}close(){return Promise.resolve()}};var GF=new u_,Fd=GF;function kt(){return Fd===GF&&PF&&G1(new Xa),Fd}function G1(n){Go(n)?Fd=new Xa(n):Hc(n)?Fd=new ps(n):Fd=n}if(ds&&!ds.TONE_SILENCE_LOGGING){let n="v";gd==="dev"&&(n="");let e=` * Tone.js ${n}${gd} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function qc(n){return Math.pow(10,n/20)}function Xc(n){return 20*(Math.log(n)/Math.LN10)}function Ya(n){return Math.pow(2,n/12)}var h_=440;function HF(){return h_}function $F(n){h_=n}function Ri(n){return Math.round(H1(n))}function H1(n){return 69+12*Math.log2(n/h_)}function kd(n){return h_*Math.pow(2,(n-69)/12)}var d_=class n extends Vn{constructor(e,t,r){super(),this.defaultUnits="s",this._val=t,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{let r=parseInt(e,10),i=t==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/r)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{let t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,r)=>{let i=0;return e&&e!=="0"&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(i+=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(i+=this._beatsToUnits(parseFloat(r)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof n&&this.fromType(this._val),Xt(this._val))return this._noArg();if(ln(this._val)&&Xt(this._units)){for(let e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(ti(this._val)){let e=0;for(let t in this._val)if(ge(this._val[t])){let r=this._val[t],i=new this.constructor(this.context,t).valueOf()*r;e+=i}return e}if(ge(this._units)){let e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return ln(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}};var Dr=class n extends d_{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{let t=new n(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){let r=new this.constructor(this.context,e).valueOf(),i=this.valueOf(),a=Math.round(i/r)*r-i;return i+a*t}toNotation(){let e=this.toSeconds(),t=["1m"];for(let s=1;s<9;s++){let o=Math.pow(2,s);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let r=t[0],i=new n(this.context,t[0]).toSeconds();return t.forEach(s=>{let o=new n(this.context,s).toSeconds();Math.abs(o-e)<Math.abs(i-e)&&(r=s,i=o)}),r}toBarsBeatsSixteenths(){let e=this._beatsToUnits(1),t=this.valueOf()/e;t=parseFloat(t.toFixed(4));let r=Math.floor(t/this._getTimeSignature()),i=t%1*4;t=Math.floor(t)%this._getTimeSignature();let s=i.toString();return s.length>3&&(i=parseFloat(parseFloat(s).toFixed(3))),[r,t,i].join(":")}toTicks(){let e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Ri(this.toFrequency())}_now(){return this.context.now()}};var rr=class n extends Dr{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return HF()}static set A4(e){$F(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:n.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){let i=B7[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?i:n.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,r){let i=1;return e&&e!=="0"&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(i*=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(i*=this._beatsToUnits(parseFloat(r)/4)),i}}})}transpose(e){return new n(this.context,this.valueOf()*Ya(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Ri(this.valueOf())}toNote(){let e=this.toFrequency(),t=Math.log2(e/n.A4),r=Math.round(12*t)+57,i=Math.floor(r/12);return i<0&&(r+=-12*i),V7[r%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return kd(e)}static ftom(e){return Ri(e)}},B7={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},V7=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var Ar=class extends Dr{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}};var Lt=class n extends Vn{constructor(){super();let e=D(n.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:kt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new Dr(this.context,e).toSeconds()}toFrequency(e){return new rr(this.context,e).toFrequency()}toTicks(e){return new Ar(this.context,e).toTicks()}_getPartialProperties(e){let t=this.get();return Object.keys(t).forEach(r=>{Xt(e[r])&&delete t[r]}),t}get(){let e=LF(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){let r=this[t];ge(r)&&ge(r.value)&&ge(r.setValueAtTime)?e[t]=r.value:r instanceof n?e[t]=r._getPartialProperties(e[t]):Ct(r)||an(r)||ln(r)||o_(r)?e[t]=r:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&ge(this[t])&&(this[t]&&ge(this[t].value)&&ge(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof n?this[t].set(e[t]):this[t]=e[t])}),this}};var ri=class extends cn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){let t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,r){return on(t,0),this.add(Object.assign({},r,{state:e,time:t})),this}getLastState(e,t){let r=this._search(t);for(let i=r;i>=0;i--){let s=this._timeline[i];if(s.state===e)return s}}getNextState(e,t){let r=this._search(t);if(r!==-1)for(let i=r;i<this._timeline.length;i++){let s=this._timeline[i];if(s.state===e)return s}}};var Ue=class n extends Lt{constructor(){super(D(n.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;let e=D(n.getDefaults(),arguments,["param","units","convert"]);for(J(ge(e.param)&&(Oi(e.param)||e.param instanceof n),"param must be an AudioParam");!Oi(e.param);)e.param=e.param._param;this._swappable=ge(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new cn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ge(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Lt.getDefaults(),{convert:!0,units:"number"})}get value(){let e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ge(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ge(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return ge(this.maxValue)&&ge(this.minValue)&&on(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?qc(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Xc(e):e}setValueAtTime(e,t){let r=this.toSeconds(t),i=this._fromType(e);return J(isFinite(i)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,r),this}getValueAtTime(e){let t=Math.max(this.toSeconds(e),0),r=this._events.getAfter(t),i=this._events.get(t),s=this._initialValue;if(i===null)s=this._initialValue;else if(i.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){let o=this._events.getBefore(i.time),a;o===null?a=this._initialValue:a=o.value,i.type==="setTargetAtTime"&&(s=this._exponentialApproach(i.time,a,i.value,i.constant,t))}else if(r===null)s=i.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=i.value;if(i.type==="setTargetAtTime"){let a=this._events.getBefore(i.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?s=this._linearInterpolate(i.time,o,r.time,r.value,t):s=this._exponentialInterpolate(i.time,o,r.time,r.value,t)}else s=i.value;return this._toType(s)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){let r=this._fromType(e),i=this.toSeconds(t);return J(isFinite(r)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this._events.add({time:i,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,i),this._param.linearRampToValueAtTime(r,i),this}exponentialRampToValueAtTime(e,t){let r=this._fromType(e);r=tr(r,0)?this._minOutput:r,this._assertRange(r);let i=this.toSeconds(t);return J(isFinite(r)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,i),this._param.exponentialRampToValueAtTime(r,i),this}exponentialRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(t)),this}linearRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(t)),this}targetRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,t),this}exponentialApproachValueAtTime(e,t,r){t=this.toSeconds(t),r=this.toSeconds(r);let i=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,t,i),this.cancelAndHoldAtTime(t+r*.9),this.linearRampToValueAtTime(e,t+r),this}setTargetAtTime(e,t,r){let i=this._fromType(e);J(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");let s=this.toSeconds(t);return this._assertRange(i),J(isFinite(i)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:r,time:s,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",e,s,r),this._param.setTargetAtTime(i,s,r),this}setValueCurveAtTime(e,t,r,i=1){r=this.toSeconds(r),t=this.toSeconds(t);let s=this._fromType(e[0])*i;this.setValueAtTime(this._toType(s),t);let o=r/(e.length-1);for(let a=1;a<e.length;a++){let l=this._fromType(e[a])*i;this.linearRampToValueAtTime(this._toType(l),t+a*o)}return this}cancelScheduledValues(e){let t=this.toSeconds(e);return J(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){let t=this.toSeconds(e),r=this._fromType(this.getValueAtTime(t));J(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+r);let i=this._events.get(t),s=this._events.getAfter(t);return i&&tr(i.time,t)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),s.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),t):s.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),t)),this._events.add({time:t,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,t),this}rampTo(e,t=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,r):this.linearRampTo(e,t,r),this}apply(e){let t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);let r=this._events.get(t);if(r&&r.type==="setTargetAtTime"){let i=this._events.getAfter(r.time),s=i?i.time:t+2,o=(s-t)/10;for(let a=t;a<s;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,i=>{i.type==="cancelScheduledValues"?e.cancelScheduledValues(i.time):i.type==="setTargetAtTime"?e.setTargetAtTime(i.value,i.time,i.constant):e[i.type](i.value,i.time)}),this}setParam(e){J(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,r,i,s){return r+(t-r)*Math.exp(-(s-e)/i)}_linearInterpolate(e,t,r,i,s){return t+(i-t)*((s-e)/(r-e))}_exponentialInterpolate(e,t,r,i,s){return t*Math.pow(i/t,(s-e)/(r-e))}};var X=class n extends Lt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return ge(this.input)?Oi(this.input)||this.input instanceof Ue?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ge(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ge(e)&&(e instanceof n||fs(e))}_getInternalNodes(){let e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){let e=this._getInternalNodes();J(e.length>0,"ToneAudioNode does not have any internal nodes");let t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,r=0){return ir(this,e,t,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Gc("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,r=0){return WF(this,e,t,r),this}chain(...e){return Ni(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),ge(this.input)&&(this.input instanceof n?this.input.dispose():fs(this.input)&&this.input.disconnect()),ge(this.output)&&(this.output instanceof n?this.output.dispose():fs(this.output)&&this.output.disconnect()),this._internalChannels=[],this}};function Ni(...n){let e=n.shift();n.reduce((t,r)=>(t instanceof X?t.connect(r):fs(t)&&ir(t,r),r),e)}function ir(n,e,t=0,r=0){for(J(ge(n),"Cannot connect from undefined node"),J(ge(e),"Cannot connect to undefined node"),(e instanceof X||fs(e))&&J(e.numberOfInputs>0,"Cannot connect to node with no inputs"),J(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof X||e instanceof Ue;)ge(e.input)&&(e=e.input);for(;n instanceof X;)ge(n.output)&&(n=n.output);Oi(e)?n.connect(e,t):n.connect(e,t,r)}function WF(n,e,t=0,r=0){if(ge(e))for(;e instanceof X;)e=e.input;for(;!fs(n);)ge(n.output)&&(n=n.output);Oi(e)?n.disconnect(e,t):fs(e)?n.disconnect(e,t,r):n.disconnect()}var pe=class n extends X{constructor(){super(D(n.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;let e=D(n.getDefaults(),arguments,["gain","units"]);this.gain=new Ue({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Z(this,"gain")}static getDefaults(){return Object.assign(X.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};var Pi=class extends X{constructor(e){super(e),this.onended=De,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new pe({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){let r=this.toSeconds(t);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(X.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:De})}_startGain(e,t=1){J(this._startTime===-1,"Source cannot be started more than once");let r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+r):this._gainNode.gain.exponentialApproachValueAtTime(t,e,r)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){J(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();let t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let r=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==De&&(this.onended(this),this.onended=De,!this.context.isOffline)){let e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),J(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}};var Ld=class n extends Pi{constructor(){super(D(n.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();let e=D(n.getDefaults(),arguments,["offset"]);ir(this._source,this._gainNode),this.offset=new Ue({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Pi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){let t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}};var Ee=class n extends X{constructor(){super(D(n.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;let e=D(n.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ld({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(X.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,r=0){return Yc(this,e,t,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,r){return this._param.exponentialRampTo(e,t,r),this}linearRampTo(e,t,r){return this._param.linearRampTo(e,t,r),this}targetRampTo(e,t,r){return this._param.targetRampTo(e,t,r),this}exponentialApproachValueAtTime(e,t,r){return this._param.exponentialApproachValueAtTime(e,t,r),this}setTargetAtTime(e,t,r){return this._param.setTargetAtTime(e,t,r),this}setValueCurveAtTime(e,t,r,i){return this._param.setValueCurveAtTime(e,t,r,i),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,r){return this._param.rampTo(e,t,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}};function Yc(n,e,t,r){(e instanceof Ue||Oi(e)||e instanceof Ee&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Ee&&(e.overridden=!0)),ir(n,e,t,r)}var f_=class n extends Ue{constructor(){super(D(n.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new cn(1/0),this._multiplier=1;let e=D(n.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ue.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,r){t=this.toSeconds(t),this.setRampPoint(t);let i=this._fromType(e),s=this._events.get(t),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){let l=r*a+t,c=this._exponentialApproach(s.time,s.value,i,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,t){let r=this.toSeconds(t);super.setValueAtTime(e,t);let i=this._events.get(r),s=this._events.previousEvent(i),o=this._getTicksUntilEvent(s,r);return i.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){let r=this.toSeconds(t);super.linearRampToValueAtTime(e,t);let i=this._events.get(r),s=this._events.previousEvent(i),o=this._getTicksUntilEvent(s,r);return i.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);let r=this._fromType(e),i=this._events.get(t),s=Math.round(Math.max((t-i.time)*10,1)),o=(t-i.time)/s;for(let a=0;a<=s;a++){let l=o*a+i.time,c=this._exponentialInterpolate(i.time,i.value,t,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Xt(e.ticks)){let o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}let r=this._fromType(this.getValueAtTime(e.time)),i=this._fromType(this.getValueAtTime(t)),s=this._events.get(t);return s&&s.time===t&&s.type==="setValueAtTime"&&(i=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+i)+e.ticks}getTicksAtTime(e){let t=this.toSeconds(e),r=this._events.get(t);return Math.max(this._getTicksUntilEvent(r,t),0)}getDurationOfTicks(e,t){let r=this.toSeconds(t),i=this.getTicksAtTime(t);return this.getTimeOfTick(i+e)-r}getTimeOfTick(e){let t=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&r&&r.type==="linearRampToValueAtTime"&&t.value!==r.value){let i=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(r.time))-i)/(r.time-t.time),a=Math.sqrt(Math.pow(i,2)-2*o*(t.ticks-e)),l=(-i+a)/o,c=(-i-a)/o;return(l>0?l:c)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){let r=this.toSeconds(t),i=this.toSeconds(e),s=this.getTicksAtTime(r);return this.getTicksAtTime(r+i)-s}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){let t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}};var p_=class n extends Ee{constructor(){super(D(n.getDefaults(),arguments,["value"])),this.name="TickSignal";let e=D(n.getDefaults(),arguments,["value"]);this.input=this._param=new f_({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Ee.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}};var m_=class n extends Lt{constructor(){super(D(n.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new ri,this._tickOffset=new cn;let e=D(n.getDefaults(),arguments,["frequency"]);this.frequency=new p_({context:this.context,units:e.units,value:e.frequency}),Z(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Lt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){let r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),ge(t)&&this.setTicksAtTime(t,r)),this}stop(e){let t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){let r=this._state.get(t);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){let t=this.toSeconds(e),r=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);let s=r,o=0;return this._state.forEachBetween(r.time,t+this.sampleTime,a=>{let l=s.time,c=this._tickOffset.get(a.time);c&&c.time>=s.time&&(o=c.ticks,l=c.time),s.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(l)),s=a}),this._state.remove(i),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){let t=this.now(),r=this.frequency.timeToTicks(e,t);this.setTicksAtTime(r,t)}getSecondsAtTime(e){e=this.toSeconds(e);let t=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let i=t,s=0;return this._state.forEachBetween(t.time,e+this.sampleTime,o=>{let a=i.time,l=this._tickOffset.get(o.time);l&&l.time>=i.time&&(s=l.seconds,a=l.time),i.state==="started"&&o.state!=="started"&&(s+=o.time-a),i=o}),this._state.remove(r),s}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){let r=this._tickOffset.get(t),i=this._state.get(t),s=Math.max(r.time,i.time),o=this.frequency.getTicksAtTime(s)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,r){let i=this._state.get(e);this._state.forEachBetween(e,t,o=>{i&&i.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(i.time,e),o.time-this.sampleTime,r),i=o});let s=null;if(i&&i.state==="started"){let o=Math.max(i.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(i.time),c=a-l,u=Math.ceil(c)-c;u=tr(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{r(h,Math.round(this.getTicksAtTime(h)))}catch(d){s=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}};var Zc=class n extends Lt{constructor(){super(D(n.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=De,this._lastUpdate=0,this._state=new ri("stopped"),this._boundLoop=this._loop.bind(this);let e=D(n.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new m_({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Z(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Lt.getDefaults(),{callback:De,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){s_(this.context);let r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,t),r<this._lastUpdate&&this.emit("start",r,t)),this}stop(e){let t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){let r=this.toSeconds(t),i=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(i+e,r)}_loop(){let e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,r=>{switch(r.state){case"started":let i=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,i);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,t,(r,i)=>{this.callback(r,i)}))}getStateAtTime(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};Wo.mixin(Zc);var Qc=class n extends Vn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let e=D(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;let r=e.urls[t];this.add(t,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:De,onload:De,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return J(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,r=De,i=De){return ln(t)?this._buffers.set(e.toString(),new nr(this.baseUrl+t,r,i)):this._buffers.set(e.toString(),new nr(t,r,i)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}};var Bd=class n extends rr{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Ri(super._frequencyToUnits(e))}_ticksToUnits(e){return Ri(super._ticksToUnits(e))}_beatsToUnits(e){return Ri(super._beatsToUnits(e))}_secondsToUnits(e){return Ri(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return kd(this.toMidi())}transpose(e){return new n(this.context,this.toMidi()+e)}};var ot=class extends Ar{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}};var $1=class extends Lt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new cn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){let e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){let t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};Ho(n=>{n.draw=new $1({context:n})});$o(n=>{n.draw.dispose()});var g_=class extends Vn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){J(ge(e.time),"Events must have a time property"),J(ge(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new W1(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){let t=[];this._root.search(e.time,t);for(let r of t)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{let t=e.getBalance(),r,i=null;if(t>0)if(e.left.right===null)r=e.left,r.right=e.right,i=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,i=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,i=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,i=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),i&&this._rebalance(i)}e.dispose()}_rotateLeft(e){let t=e.parent,r=e.isLeftChild(),i=e.right;i&&(e.right=i.left,i.left=e),t!==null?r?t.left=i:t.right=i:this._setRoot(i)}_rotateRight(e){let t=e.parent,r=e.isLeftChild(),i=e.left;i&&(e.left=i.right,i.right=e),t!==null?r?t.left=i:t.right=i:this._setRoot(i)}_rebalance(e){let t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){let t=[];if(this._root.search(e,t),t.length>0){let r=t[0];for(let i=1;i<t.length;i++)t[i].low>r.low&&(r=t[i]);return r.event}}return null}forEach(e){if(this._root!==null){let t=[];this._root.traverse(r=>t.push(r)),t.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,t){if(this._root!==null){let r=[];this._root.search(e,r),r.forEach(i=>{i.event&&t(i.event)})}return this}forEachFrom(e,t){if(this._root!==null){let r=[];this._root.searchAfter(e,r),r.forEach(i=>{i.event&&t(i.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}},W1=class{constructor(e,t,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}};var ii=class n extends X{constructor(){super(D(n.getDefaults(),arguments,["volume"])),this.name="Volume";let e=D(n.getDefaults(),arguments,["volume"]);this.input=this.output=new pe({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Z(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(X.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}};var z1=class n extends X{constructor(){super(D(n.getDefaults(),arguments)),this.name="Destination",this.input=new ii({context:this.context}),this.output=new pe({context:this.context}),this.volume=this.input.volume;let e=D(n.getDefaults(),arguments);Ni(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(X.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Ni(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};Ho(n=>{n.destination=new z1({context:n})});$o(n=>{n.destination.dispose()});var __=class extends Vn{constructor(e){super(),this.name="TimelineValue",this._timeline=new cn({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){let t=this._timeline.get(e);return t?t.value:this._initialValue}};var Kc=(()=>{class n{constructor(t,r){this.id=n._eventId++;let i=Object.assign(n.getDefaults(),r);this.transport=t,this.callback=i.callback,this._once=i.once,this.time=i.time}static getDefaults(){return{callback:De,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return n._eventId=0,n})();var y_=class n extends Kc{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let r=Object.assign(n.getDefaults(),t);this.duration=new ot(e.context,r.duration).valueOf(),this._interval=new ot(e.context,r.interval).valueOf(),this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Kc.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){let t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ot(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;let t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new ot(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ot(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}};var v_=class n extends Lt{constructor(){super(D(n.getDefaults(),arguments)),this.name="Transport",this._loop=new __(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new cn,this._repeatedEvents=new g_,this._syncedSignals=[],this._swingAmount=0;let e=D(n.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Zc({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Z(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Lt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){let r=t%(this._swingTicks*2)/(this._swingTicks*2),i=Math.sin(r*Math.PI)*this._swingAmount;e+=new ot(this.context,this._swingTicks*2/3).toSeconds()*i}this._timeline.forEachAtTime(t,r=>r.invoke(e))}schedule(e,t){let r=new Kc(this,{callback:e,time:new Ar(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,t,r,i=1/0){let s=new y_(this,{callback:e,duration:new Dr(this.context,i).toTicks(),interval:new Dr(this.context,t).toTicks(),time:new Ar(this.context,r).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(e,t){let r=new Kc(this,{callback:e,once:!0,time:new Ar(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){let t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){let t=this.toTicks(e);return this._timeline.forEachFrom(t,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(t,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new ot(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let r;return ge(t)&&(r=this.toTicks(t)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Ct(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Dr(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Dr(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new ot(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){let e=this.now(),t=this._clock.getTicksAtTime(e);return new ot(this.context,t).toBarsBeatsSixteenths()}set position(e){let t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){let t=this.now(),r=this._clock.frequency.timeToTicks(e,t);this.ticks=r}get progress(){if(this.loop){let e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){let t=this.now();if(this.state==="started"){let r=this._clock.getTicksAtTime(t),i=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,t),s=t+i;this.emit("stop",s),this._clock.setTicksAtTime(e,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{let t=this.now(),r=this.getTicksAtTime(t),i=e-r%e;return this._clock.nextTickTime(i,t)}}syncSignal(e,t){if(!t){let i=this.now();if(e.getValueAtTime(i)!==0){let o=1/(60/this.bpm.getValueAtTime(i)/this.PPQ);t=e.getValueAtTime(i)/o}else t=0}let r=new pe(t);return this.bpm.connect(r),r.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){let r=this._syncedSignals[t];r.signal===e&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),zc(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};Wo.mixin(v_);Ho(n=>{n.transport=new v_({context:n})});$o(n=>{n.transport.dispose()});var Je=class extends X{constructor(e){super(e),this.input=void 0,this._state=new ri("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=De,this._syncedStop=De,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ii({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Z(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(X.getDefaults(),{mute:!1,onstop:De,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,r){let i=Xt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(i=this._clampToCurrentTime(i),!this._synced&&this._state.getValueAtTime(i)==="started")J($c(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,t,r);else if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){let s=this._state.get(i);s&&(s.offset=this.toSeconds(xn(t,0)),s.duration=r?this.toSeconds(r):void 0);let o=this.context.transport.schedule(a=>{this._start(a,t,r)},i);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else s_(this.context),this._start(i,t,r);return this}stop(e){let t=Xt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||ge(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{let r=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(r)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){let r=this._state.get(t);if(r&&r.state==="started"&&r.time!==t){let i=t-this.toSeconds(r.time),s;r.duration&&(s=this.toSeconds(r.duration)-i),this._start(e,this.toSeconds(r.offset)+i,s)}}},this._syncedStop=e=>{let t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=De,this.unsync(),this._volume.dispose(),this._state.dispose(),this}};var $s=class n extends Pi{constructor(){super(D(n.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;let e=D(n.getDefaults(),arguments,["url","onload"]);ir(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ue({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new nr(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Pi.getDefaults(),{url:new nr,loop:!1,loopEnd:0,loopStart:0,onload:De,onerror:De,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,r,i=1){J(this.buffer.loaded,"buffer is either not set or not loaded");let s=this.toSeconds(e);this._startGain(s,i),this.loop?t=xn(t,this.loopStart):t=xn(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){let a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=a-l;Pd(o,a)&&(o=(o-l)%c+l),tr(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,c_(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,o)),ge(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(s+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}};var xPe=44100*5;function gr(n,e){return He(this,void 0,void 0,function*(){let t=e/n.context.sampleRate,r=new ps(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}var Vd=class n extends Pi{constructor(){super(D(n.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let e=D(n.getDefaults(),arguments,["frequency","type"]);ir(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ue({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ue({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Z(this,["frequency","detune"])}static getDefaults(){return Object.assign(Pi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){let t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}};var Kt=(()=>{class n extends Je{constructor(){super(D(n.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;let t=D(n.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ee({context:this.context,units:"frequency",value:t.frequency}),Z(this,"frequency"),this.detune=new Ee({context:this.context,units:"cents",value:t.detune}),Z(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Je.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){let r=this.toSeconds(t),i=new Vd({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(r)}_stop(t){let r=this.toSeconds(t);this._oscillator&&this._oscillator.stop(r)}_restart(t){let r=this.toSeconds(t);return this.log("restart",r),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(r),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return n._periodicWaveCache.find(r=>r.phase===this._phase&&kF(r.partials,this._partials));{let t=n._periodicWaveCache.find(r=>r.type===this._type&&r.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let r=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&r)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{let i=this._getCachedPeriodicWave();if(ge(i)){let{partials:s,wave:o}=i;this._wave=o,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{let[s,o]=this._getRealImaginary(t,this._phase),a=this.context.createPeriodicWave(s,o);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),n._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),n._periodicWaveCache.length>100&&n._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){on(t,0);let r=this._type,i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(r=i[1]),this._type!=="custom")t===0?this.type=r:this.type=r+t.toString();else{let s=new Float32Array(t);this._partials.forEach((o,a)=>s[a]=o),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(t,r){let s=2048,o=new Float32Array(s),a=new Float32Array(s),l=1;if(t==="custom"){if(l=this._partials.length+1,this._partialCount=this._partials.length,s=l,this._partials.length===0)return[o,a]}else{let c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);c?(l=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),t=c[1],l=Math.max(l,2),s=l):this._partialCount=0,this._partials=[]}for(let c=1;c<s;++c){let u=2/(c*Math.PI),h;switch(t){case"sine":h=c<=l?1:0,this._partials[c-1]=h;break;case"square":h=c&1?2*u:0,this._partials[c-1]=h;break;case"sawtooth":h=u*(c&1?1:-1),this._partials[c-1]=h;break;case"triangle":c&1?h=2*(u*u)*(c-1>>1&1?-1:1):h=0,this._partials[c-1]=h;break;case"custom":h=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}h!==0?(o[c]=-h*Math.sin(r*c),a[c]=h*Math.cos(r*c)):(o[c]=0,a[c]=0)}return[o,a]}_inverseFFT(t,r,i){let s=0,o=t.length;for(let a=0;a<o;a++)s+=t[a]*Math.cos(a*i)+r[a]*Math.sin(a*i);return s}getInitialValue(){let[t,r]=this._getRealImaginary(this._type,0),i=0,s=Math.PI*2,o=32;for(let a=0;a<o;a++)i=Math.max(this._inverseFFT(t,r,a/o*s),i);return j1(-this._inverseFFT(t,r,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return He(this,void 0,void 0,function*(){return gr(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return n._periodicWaveCache=[],n})();var Ir=class n extends X{constructor(){super(Object.assign(D(n.getDefaults(),arguments,["context"])))}connect(e,t=0,r=0){return Yc(this,e,t,r),this}};var si=class n extends Ir{constructor(){super(Object.assign(D(n.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;let e=D(n.getDefaults(),arguments,["mapping","length"]);Ct(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):OF(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Ee.getDefaults(),{length:1024})}setMap(e,t=1024){let r=new Float32Array(t);for(let i=0,s=t;i<s;i++){let o=i/(s-1)*2-1;r[i]=e(o,i)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){let t=["none","2x","4x"].some(r=>r.includes(e));J(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}};var Jc=class extends Ir{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new si({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}};var Bt=class n extends Ee{constructor(){super(Object.assign(D(n.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;let e=D(n.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new pe({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ee.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}};var Ud=class n extends Je{constructor(){super(D(n.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Jc({context:this.context}),this._modulationNode=new pe({context:this.context});let e=D(n.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Kt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Bt({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Z(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return He(this,void 0,void 0,function*(){return gr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}};var eu=class n extends Je{constructor(){super(D(n.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new pe({context:this.context,gain:0});let e=D(n.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Kt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Ee({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Kt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Bt({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Bt({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Z(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return He(this,void 0,void 0,function*(){return gr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}};var Za=class n extends Je{constructor(){super(D(n.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new pe({context:this.context,gain:0}),this._thresh=new si({context:this.context,mapping:t=>t<=0?-1:1});let e=D(n.getDefaults(),arguments,["frequency","width"]);this.width=new Ee({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Z(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Je.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return He(this,void 0,void 0,function*(){return gr(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}};var jd=class n extends Je{constructor(){super(D(n.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];let e=D(n.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Ee({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ee({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Z(this,["frequency","detune"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){let t=-e/2,r=e/(this._oscillators.length-1);this._forEach((i,s)=>i.detune.value=t+r*s)}}get count(){return this._oscillators.length}set count(e){if(on(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){let r=new Kt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):De});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[t]=r}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return He(this,void 0,void 0,function*(){return gr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}};var Gd=class n extends Je{constructor(){super(D(n.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Bt({context:this.context,value:2});let e=D(n.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Za({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Z(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Je.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return He(this,void 0,void 0,function*(){return gr(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}};var zF={am:Ud,fat:jd,fm:eu,oscillator:Kt,pulse:Za,pwm:Gd},Ws=class n extends Je{constructor(){super(D(n.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";let e=D(n.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ee({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ee({context:this.context,units:"cents",value:e.detune}),Z(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Kt.getDefaults(),eu.getDefaults(),Ud.getDefaults(),jd.getDefaults(),Za.getDefaults(),Gd.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;let t=zF[e],r=this.now();if(this._oscillator){let i=this._oscillator;i.stop(r),this.context.setTimeout(()=>i.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof zF[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&an(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&an(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ln(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return He(this,void 0,void 0,function*(){return gr(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}};function b_(n,e=1/0){let t=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(s){on(s,n,e),t.set(this,s)}})}}function _r(n,e=1/0){let t=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(s){on(this.toSeconds(s),n,e),t.set(this,s)}})}}var Hd=class n extends Je{constructor(){super(D(n.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;let e=D(n.getDefaults(),arguments,["url","onload"]);this._buffer=new nr({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Je.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:De,onerror:De,playbackRate:1,reverse:!1})}load(e){return He(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=De){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,r){return super.start(e,t,r),this}_start(e,t,r){this._loop?t=xn(t,this._loopStart):t=xn(t,0);let i=this.toSeconds(t),s=r;r=xn(r,Math.max(this._buffer.duration-i,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);let a=new $s({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Xt(s)?a.start(e,i):a.start(e,i,o-this.toSeconds(this.fadeOut))}_stop(e){let t=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(t))}restart(e,t,r){return super.restart(e,t,r),this}_restart(e,t,r){this._stop(e),this._start(e,t,r)}seek(e,t){let r=this.toSeconds(t);if(this._state.getValueAtTime(r)==="started"){let i=this.toSeconds(e);this._stop(r),this._start(r,i)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&on(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&on(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){let t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;let t=this.now(),r=this._state.getNextState("stopped",t);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(i=>i.cancelStop())),this._activeSources.forEach(i=>{i.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};An([_r(0)],Hd.prototype,"fadeIn",void 0);An([_r(0)],Hd.prototype,"fadeOut",void 0);var bn=class n extends X{constructor(){super(D(n.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Ee({context:this.context,value:0}),this.output=this._sig,this.input=void 0;let e=D(n.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(X.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(ln(e))return e;{let r;for(r in w_)if(w_[r][t]===e)return r;return e}}_setCurve(e,t,r){if(ln(r)&&Reflect.has(w_,r)){let i=w_[r];ti(i)?e!=="_decayCurve"&&(this[e]=i[t]):this[e]=i}else if(Ct(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){J(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let i=this.toSeconds(this.attack),s=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){let a=1/i;i=(1-o)/a}if(i<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,i,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,i,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,i,t)}if(s&&this.sustain<1){let a=t*this.sustain,l=e+i;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,s+l):this._sig.exponentialApproachValueAtTime(a,l,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);let t=this.getValueAtTime(e);if(t>0){let r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(J(Ct(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,r=1){return t=this.toSeconds(t),this.triggerAttack(t,r),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,r=0){return Yc(this,e,t,r),this}asArray(e=1024){return He(this,void 0,void 0,function*(){let t=e/this.context.sampleRate,r=new ps(1,t,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=i+this.toSeconds(this.release),o=s*.1,a=s+o,l=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:r}));return l._sig.toDestination(),l.triggerAttackRelease(t*(i+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}};An([_r(0)],bn.prototype,"attack",void 0);An([_r(0)],bn.prototype,"decay",void 0);An([b_(0,1)],bn.prototype,"sustain",void 0);An([_r(0)],bn.prototype,"release",void 0);var w_=(()=>{let e,t,r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/(128-1)*(Math.PI/2));let i=[],s=6.4;for(e=0;e<128-1;e++){t=e/(128-1);let d=Math.sin(t*(Math.PI*2)*s-Math.PI/2)+1;i[e]=d/10+t*.83}i[128-1]=1;let o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;let l=[];for(e=0;e<128;e++)t=e/(128-1),l[e]=.5*(1-Math.cos(Math.PI*t));let c=[];for(e=0;e<128;e++){t=e/(128-1);let d=Math.pow(t,3)*4+.2,f=Math.cos(d*Math.PI*2*t);c[e]=Math.abs(f*(1-t))}function u(d){let f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:r,Out:h(r)},exponential:"exponential",linear:"linear",ripple:{In:i,Out:u(i)},sine:{In:l,Out:u(l)},step:{In:o,Out:u(o)}}})();var Mr=class n extends X{constructor(){super(D(n.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;let e=D(n.getDefaults(),arguments);this._volume=this.output=new ii({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Z(this,"volume")}static getDefaults(){return Object.assign(X.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){let r=this["_original_"+e]=this[e];this[e]=(...i)=>{let s=i[t],o=this.context.transport.schedule(a=>{i[t]=a,r.apply(this,i)},s);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,r,i){let s=this.toSeconds(r),o=this.toSeconds(t);return this.triggerAttack(e,s,i),this.triggerRelease(s+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};var yr=class n extends Mr{constructor(){super(D(n.getDefaults(),arguments));let e=D(n.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Mr.getDefaults(),{detune:0,onsilence:De,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);let i=this.toSeconds(t);return this._triggerEnvelopeAttack(i,r),this.setNote(e,i),this}triggerRelease(e){this.log("triggerRelease",e);let t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){let r=this.toSeconds(t),i=e instanceof rr?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){let s=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,s,r)}else this.frequency.setValueAtTime(i,r);return this}};An([_r(0)],yr.prototype,"portamento",void 0);var tu=class n extends bn{constructor(){super(D(n.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new pe({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}};var Or=class n extends yr{constructor(){super(D(n.getDefaults(),arguments)),this.name="Synth";let e=D(n.getDefaults(),arguments);this.oscillator=new Ws(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new tu(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Z(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(yr.getDefaults(),{envelope:Object.assign(er(bn.getDefaults(),Object.keys(X.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(er(Ws.getDefaults(),[...Object.keys(Je.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){let r=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+i)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};var nu=class n extends yr{constructor(){super(D(n.getDefaults(),arguments)),this.name="ModulationSynth";let e=D(n.getDefaults(),arguments);this._carrier=new Or({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Or({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Ee({context:this.context,units:"frequency"}),this.detune=new Ee({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Bt({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new pe({context:this.context,gain:0}),Z(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(yr.getDefaults(),{harmonicity:3,oscillator:Object.assign(er(Ws.getDefaults(),[...Object.keys(Je.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(er(bn.getDefaults(),Object.keys(X.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(er(Ws.getDefaults(),[...Object.keys(Je.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(er(bn.getDefaults(),Object.keys(X.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}};var S_=class n extends nu{constructor(){super(D(n.getDefaults(),arguments)),this.name="FMSynth";let e=D(n.getDefaults(),arguments);this.modulationIndex=new Bt({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(nu.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}};var E_=class n extends Or{constructor(){super(D(n.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;let e=D(n.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Z(this,["oscillator","envelope"])}static getDefaults(){return ni(yr.getDefaults(),Or.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){let r=this.toSeconds(t),i=this.toFrequency(e instanceof rr?e.toFrequency():e),s=i*this.octaves;return this.oscillator.frequency.setValueAtTime(s,r),this.oscillator.frequency.exponentialRampToValueAtTime(i,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}};An([b_(0)],E_.prototype,"octaves",void 0);An([_r(0)],E_.prototype,"pitchDecay",void 0);var XF=new Set;function iu(n){XF.add(n)}function C_(n,e){let t=`registerProcessor("${n}", ${e})`;XF.add(t)}var G7=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;iu(G7);var H7=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;iu(H7);var $7=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;iu($7);var YF="feedback-comb-filter",W7=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;C_(YF,W7);var Qa=class n extends Mr{constructor(){super(D(n.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;let e=D(n.getDefaults(),arguments,["voice","options"]);J(!an(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");let t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();let r=this._voices.indexOf(this._dummyVoice);this._voices.splice(r,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Mr.getDefaults(),{maxPolyphony:32,options:{},voice:Or})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);let t=this._activeVoices.findIndex(r=>r.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){let e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}else Gc("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){let e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,r){e.forEach(i=>{let s=new Bd(this.context,i).toMidi(),o=this._getNextAvailableVoice();o&&(o.triggerAttack(i,t,r),this._activeVoices.push({midi:s,voice:o,released:!1}),this.log("triggerAttack",i,t))})}_triggerRelease(e,t){e.forEach(r=>{let i=new Bd(this.context,r).toMidi(),s=this._activeVoices.find(({midi:o,released:a})=>o===i&&!a);s&&(s.voice.triggerRelease(t),s.released=!0,this.log("triggerRelease",r,t))})}_scheduleEvent(e,t,r,i){J(!this.disposed,"Synth was already disposed"),r<=this.now()?e==="attack"?this._triggerAttack(t,r,i):this._triggerRelease(t,r):this.context.setTimeout(()=>{this._scheduleEvent(e,t,r,i)},r-this.now())}triggerAttack(e,t,r){Array.isArray(e)||(e=[e]);let i=this.toSeconds(t);return this._scheduleEvent("attack",e,i,r),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);let r=this.toSeconds(t);return this._scheduleEvent("release",e,r),this}triggerAttackRelease(e,t,r,i){let s=this.toSeconds(r);if(this.triggerAttack(e,s,i),Ct(t)){J(Ct(e),"If the duration is an array, the notes must also be an array"),e=e;for(let o=0;o<e.length;o++){let a=t[Math.min(o,t.length-1)],l=this.toSeconds(a);J(l>0,"The duration must be greater than 0"),this.triggerRelease(e[o],s+l)}}else{let o=this.toSeconds(t);J(o>0,"The duration must be greater than 0"),this.triggerRelease(e,s+o)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(e){let t=er(e,["onsilence","context"]);return this.options=ni(this.options,t),this._voices.forEach(r=>r.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){let t=this.toSeconds(e);return this._activeVoices.forEach(({voice:r})=>{r.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}};var D_=class n extends Mr{constructor(){super(D(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;let e=D(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(r=>{let i=parseInt(r,10);if(J(Nd(r)||an(i)&&isFinite(i),`url key is neither a note or midi pitch: ${r}`),Nd(r)){let s=new rr(this.context,r).toMidi();t[s]=e.urls[r]}else an(i)&&isFinite(i)&&(t[i]=e.urls[i])}),this._buffers=new Qc({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Mr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:De,onerror:De,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,r=1){return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach(i=>{let s=H1(new rr(this.context,i).toFrequency()),o=Math.round(s),a=s-o,l=this._findClosest(o),c=o-l,u=this._buffers.get(c),h=Ya(l+a),d=new $s({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,u.duration/h,r),Ct(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){let f=this._activeSources.get(o),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(r=>{let i=new rr(this.context,r).toMidi();if(this._activeSources.has(i)&&this._activeSources.get(i).length){let s=this._activeSources.get(i);t=this.toSeconds(t),s.forEach(o=>{o.stop(t)}),this._activeSources.set(i,[])}}),this}releaseAll(e){let t=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,i=1){let s=this.toSeconds(r);return this.triggerAttack(e,s,i),Ct(t)?(J(Ct(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{let l=t[Math.min(a,t.length-1)];this.triggerRelease(o,s+this.toSeconds(l))})):this.triggerRelease(e,s+this.toSeconds(t)),this}add(e,t,r){if(J(Nd(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Nd(e)){let i=new rr(this.context,e).toMidi();this._buffers.add(i,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}};An([_r(0)],D_.prototype,"attack",void 0);An([_r(0)],D_.prototype,"release",void 0);var zs=class n extends Lt{constructor(){super(D(n.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new ri("stopped"),this._startOffset=0;let e=D(n.getDefaults(),arguments,["callback","value"]);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Lt.getDefaults(),{callback:De,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,t=>{let r;if(t.state==="started"){t.id!==-1&&this.context.transport.clear(t.id);let i=t.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||an(this._loop)&&this._loop>1){r=1/0,an(this._loop)&&(r=this._loop*this._getLoopDuration());let s=this._state.getAfter(i);s!==null&&(r=Math.min(r,s.time-i)),r!==1/0&&(this._state.setStateAtTime("stopped",i+r+1,{id:-1}),r=new ot(this.context,r));let o=new ot(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),o,new ot(this.context,i),r)}else t.id=this.context.transport.schedule(this._tick.bind(this),new ot(this.context,i))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){let t=this.toTicks(e);return this._state.getValueAtTime(t)==="stopped"&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}stop(e){this.cancel(e);let t=this.toTicks(e);if(this._state.getValueAtTime(t)==="started"){this._state.setStateAtTime("stopped",t,{id:-1});let r=this._state.getBefore(t),i=t;r!==null&&(i=r.time),this._rescheduleEvents(i)}return this}cancel(e){e=xn(e,-1/0);let t=this.toTicks(e);return this._state.forEachFrom(t,r=>{this.context.transport.clear(r.id)}),this._state.cancel(t),this}_tick(e){let t=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(t)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let r=.02;o_(this.humanize)||(r=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*r}this.callback(e,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new ot(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new ot(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){let e=this.context.transport.ticks,t=this._state.get(e);if(t!==null&&t.state==="started"){let r=this._getLoopDuration();return(e-t.time)%r/r}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}};var $d=class n extends zs{constructor(){super(D(n.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new ri("stopped"),this._events=new Set;let e=D(n.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,e.events.forEach(t=>{Ct(t)?this.add(t[0],t[1]):this.add(t)})}static getDefaults(){return Object.assign(zs.getDefaults(),{events:[]})}start(e,t){let r=this.toTicks(e);if(this._state.getValueAtTime(r)!=="started"){t=xn(t,this._loop?this._loopStart:0),this._loop?t=xn(t,this._loopStart):t=xn(t,0);let i=this.toTicks(t);this._state.add({id:-1,offset:i,state:"started",time:r}),this._forEach(s=>{this._startNote(s,r,i)})}return this}_startNote(e,t,r){t-=r,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<r&&(t+=this._getLoopDuration()),e.start(new ot(this.context,t))):e.startOffset<this._loopStart&&e.startOffset>=r&&(e.loop=!1,e.start(new ot(this.context,t))):e.startOffset>=r&&e.start(new ot(this.context,t))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(t=>{t.startOffset+=this._startOffset})}stop(e){let t=this.toTicks(e);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._forEach(r=>{r.stop(e)}),this}at(e,t){let r=new Ar(this.context,e).toTicks(),i=new ot(this.context,1).toSeconds(),s=this._events.values(),o=s.next();for(;!o.done;){let a=o.value;if(Math.abs(r-a.startOffset)<i)return ge(t)&&(a.value=t),a;o=s.next()}return ge(t)?(this.add(e,t),this.at(e)):null}add(e,t){e instanceof Object&&Reflect.has(e,"time")&&(t=e,e=t.time);let r=this.toTicks(e),i;return t instanceof zs?(i=t,i.callback=this._tick.bind(this)):i=new zs({callback:this._tick.bind(this),context:this.context,value:t}),i.startOffset=r,i.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(i),this._restartEvent(i),this}_restartEvent(e){this._state.forEach(t=>{t.state==="started"?this._startNote(e,t.time,t.offset):e.stop(new ot(this.context,t.time))})}remove(e,t){return ti(e)&&e.hasOwnProperty("time")&&(t=e,e=t.time),e=this.toTicks(e),this._events.forEach(r=>{r.startOffset===e&&(Xt(t)||ge(t)&&r.value===t)&&(this._events.delete(r),r.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(t=>t.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(t=>{t instanceof n?t._forEach(e):e(t)}),this}_setAll(e,t){this._forEach(r=>{r[e]=t})}_tick(e,t){this.mute||this.callback(e,t)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(t=>{t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.loop=e,this._testLoopBoundries(t)})}get loopEnd(){return new ot(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopEnd=e,this._testLoopBoundries(t)})}get loopStart(){return new ot(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}};var Wd=class n extends X{constructor(){super(Object.assign(D(n.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let e=D(n.getDefaults(),arguments,["pan"]);this.pan=new Ue({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Z(this,"pan")}static getDefaults(){return Object.assign(X.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}};var QF="bit-crusher",K7=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;C_(QF,K7);var bHe=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100];var IHe=[1687/25e3,1601/25e3,2053/25e3,2251/25e3];var su=class n extends X{constructor(){super(D(n.getDefaults(),arguments,["solo"])),this.name="Solo";let e=D(n.getDefaults(),arguments,["solo"]);this.input=this.output=new pe({context:this.context}),n._allSolos.has(this.context)||n._allSolos.set(this.context,new Set),n._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(X.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),n._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){n._soloed.has(this.context)||n._soloed.set(this.context,new Set),n._soloed.get(this.context).add(this)}_removeSolo(){n._soloed.has(this.context)&&n._soloed.get(this.context).delete(this)}_isSoloed(){return n._soloed.has(this.context)&&n._soloed.get(this.context).has(this)}_noSolos(){return!n._soloed.has(this.context)||n._soloed.has(this.context)&&n._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),n._allSolos.get(this.context).delete(this),this._removeSolo(),this}};su._allSolos=new Map;su._soloed=new Map;var O_=class n extends X{constructor(){super(D(n.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";let e=D(n.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Wd({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ii({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Z(this,["pan","volume"])}static getDefaults(){return Object.assign(X.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}};var Q1=class n extends X{constructor(){super(D(n.getDefaults(),arguments,["volume","pan"])),this.name="Channel";let e=D(n.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new su({solo:e.solo,context:this.context}),this._panVol=this.output=new O_({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Z(this,["pan","volume"])}static getDefaults(){return Object.assign(X.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return n.buses.has(e)||n.buses.set(e,new pe({context:this.context})),n.buses.get(e)}send(e,t=0){let r=this._getBus(e),i=new pe({context:this.context,units:"decibels",gain:t});return this.connect(i),i.connect(r),i}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};Q1.buses=new Map;var K1=class extends X{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ue({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ue({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ue({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ue({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ue({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ue({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ue({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ue({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ue({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(X.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};Ho(n=>{n.listener=new K1({context:n})});$o(n=>{n.listener.dispose()});function J1(){return kt().now()}var zd=kt().transport;var yWe=kt().destination,vWe=kt().destination;var xWe=kt().listener;var bWe=kt().draw;var wWe=kt();var Rr=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(Rr||{}),tw=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(tw||{}),R_=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(R_||{}),le=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(le||{}),vr=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(vr||{}),q=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(q||{}),Xs=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(Xs||{}),te=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(te||{}),K=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(K||{}),oi=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(oi||{}),Nr=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(Nr||{}),wn=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(wn||{}),At=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(At||{}),Pr=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(Pr||{}),N_=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(N_||{}),sr=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(sr||{}),Vt=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(Vt||{});var at=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(at||{}),xr=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(xr||{});var nw={createCanvas:(n,e)=>{let t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};var j={ADAPTER:nw,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var rw=/iPhone/i,JF=/iPod/i,ek=/iPad/i,tk=/\biOS-universal(?:.+)Mac\b/i,iw=/\bAndroid(?:.+)Mobile\b/i,nk=/Android/i,ou=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,P_=/Silk/i,Ys=/Windows Phone/i,rk=/\bWindows(?:.+)ARM\b/i,ik=/BlackBerry/i,sk=/BB10/i,ok=/Opera Mini/i,ak=/\b(CriOS|Chrome)(?:.+)Mobile/i,lk=/Mobile(?:.+)Firefox\b/i,ck=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function o9(n){return function(e){return e.test(n)}}function qd(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var i=o9(t),s={apple:{phone:i(rw)&&!i(Ys),ipod:i(JF),tablet:!i(rw)&&(i(ek)||ck(e))&&!i(Ys),universal:i(tk),device:(i(rw)||i(JF)||i(ek)||i(tk)||ck(e))&&!i(Ys)},amazon:{phone:i(ou),tablet:!i(ou)&&i(P_),device:i(ou)||i(P_)},android:{phone:!i(Ys)&&i(ou)||!i(Ys)&&i(iw),tablet:!i(Ys)&&!i(ou)&&!i(iw)&&(i(P_)||i(nk)),device:!i(Ys)&&(i(ou)||i(P_)||i(iw)||i(nk))||i(/\bokhttp\b/i)},windows:{phone:i(Ys),tablet:i(rk),device:i(Ys)||i(rk)},other:{blackberry:i(ik),blackberry10:i(sk),opera:i(ok),firefox:i(lk),chrome:i(ak),device:i(ik)||i(sk)||i(ok)||i(lk)||i(ak)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var a9=qd.default??qd,ai=a9(globalThis.navigator);var z={};MS(z,{BaseTextureCache:()=>ar,BoundingBox:()=>df,CanvasRenderTarget:()=>ry,DATA_URI:()=>ty,EventEmitter:()=>Ko.default,ProgramCache:()=>ff,TextureCache:()=>fn,clearTextureCache:()=>vL,correctBlendMode:()=>hL,createIndicesForQuads:()=>mL,decomposeDataUri:()=>TL,deprecation:()=>we,destroyTextureCache:()=>yL,detectVideoAlphaMode:()=>z2,determineCrossOrigin:()=>sy,earcut:()=>SL.default,getBufferType:()=>Zo,getCanvasBoundingBox:()=>iy,getResolutionOfUrl:()=>pf,hex2rgb:()=>aL,hex2string:()=>lL,interleaveTypedArrays:()=>gL,isMobile:()=>ai,isPow2:()=>uf,isWebGLSupported:()=>K_,log2:()=>hf,nextPow2:()=>Qo,path:()=>Uw,premultiplyBlendMode:()=>cf,premultiplyRgba:()=>dL,premultiplyTint:()=>fL,premultiplyTintToRgba:()=>pL,removeItems:()=>ny,rgb2hex:()=>uL,sayHello:()=>X2,sign:()=>_L,skipHello:()=>q2,string2hex:()=>cL,trimCanvas:()=>wL,uid:()=>_s,url:()=>W2});j.RETINA_PREFIX=/@([0-9\.]+)x/;j.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ko=pa(hk(),1),SL=pa(gk(),1);var bu=pa(H2(),1);var $2={};function we(n,e,t=3){if($2[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${n}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`),console.warn(r))),$2[e]=!0}var W2={get parse(){return we("7.3.0","utils.url.parse is deprecated, use native URL API instead."),bu.parse},get format(){return we("7.3.0","utils.url.format is deprecated, use native URL API instead."),bu.format},get resolve(){return we("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),bu.resolve}};function Fi(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function af(n){return n.split("?")[0].split("#")[0]}function MY(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function OY(n,e,t){return n.replace(new RegExp(MY(e),"g"),t)}function RY(n,e){let t="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=n.length;++a){if(a<n.length)o=n.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){let l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length===2||t.length===1){t="",r=0,i=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+=`/${n.slice(i+1,a)}`:t=n.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}var Uw={toPosix(n){return OY(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Fi(n),n=this.toPosix(n);let e=/^file:\/\/\//.exec(n);if(e)return e[0];let t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(Fi(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;let r=af(this.toPosix(e??j.ADAPTER.getBaseUrl())),i=af(this.toPosix(t??this.rootname(r)));return n=this.toPosix(n),n.startsWith("/")?Uw.join(i,n.slice(1)):this.isAbsolute(n)?n:this.join(r,n)},normalize(n){if(Fi(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="",t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));let r=n.endsWith("/");return n=RY(n,!1),n.length>0&&r&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return Fi(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){let r=n[t];if(Fi(r),r.length>0)if(e===void 0)e=r;else{let i=n[t-1]??"";this.extname(i)?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(Fi(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0),t=e===47,r=-1,i=!0,s=this.getProtocol(n),o=n;n=n.slice(s.length);for(let a=n.length-1;a>=1;--a)if(e=n.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?t?"/":this.isUrl(o)?s+n:s:t&&r===1?"//":s+n.slice(0,r)},rootname(n){Fi(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){let t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){Fi(n),e&&Fi(e),n=af(this.toPosix(n));let t=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let o=e.length-1,a=-1;for(s=n.length-1;s>=0;--s){let l=n.charCodeAt(s);if(l===47){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return t===r?r=a:r===-1&&(r=n.length),n.slice(t,r)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!i){t=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":n.slice(t,r)},extname(n){Fi(n),n=af(this.toPosix(n));let e=-1,t=0,r=-1,i=!0,s=0;for(let o=n.length-1;o>=0;--o){let a=n.charCodeAt(o);if(a===47){if(!i){t=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===t+1?"":n.slice(e,r)},parse(n){Fi(n);let e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=af(this.toPosix(n));let t=n.charCodeAt(0),r=this.isAbsolute(n),i,s="";e.root=this.rootname(n),r||this.hasProtocol(n)?i=1:i=0;let o=-1,a=0,l=-1,c=!0,u=n.length-1,h=0;for(;u>=i;--u){if(t=n.charCodeAt(u),t===47){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),t===46?o===-1?o=u:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||l===-1||h===0||h===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&r?e.base=e.name=n.slice(1,l):e.base=e.name=n.slice(a,l)):(a===0&&r?(e.name=n.slice(1,o),e.base=n.slice(1,l)):(e.name=n.slice(a,o),e.base=n.slice(a,l)),e.ext=n.slice(o,l)),e.dir=this.dirname(n),s&&(e.dir=s+e.dir),e},sep:"/",delimiter:":"};var jw;function z2(){return L(this,null,function*(){return jw??(jw=(()=>L(this,null,function*(){let n=document.createElement("canvas").getContext("webgl");if(!n)return At.UNPACK;let e=yield new Promise(s=>{let o=document.createElement("video");o.onloadeddata=()=>s(o),o.onerror=()=>s(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!e)return At.UNPACK;let t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);let r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e);let i=new Uint8Array(4);return n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,i),n.deleteFramebuffer(r),n.deleteTexture(t),n.getExtension("WEBGL_lose_context")?.loseContext(),i[0]<=i[3]?At.PMA:At.UNPACK}))()),jw})}function q2(){we("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function X2(){we("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}var Gw;function K_(){return typeof Gw>"u"&&(Gw=function(){let n={stencil:!0,failIfMajorPerformanceCaveat:j.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!j.ADAPTER.getWebGLRenderingContext())return!1;let e=j.ADAPTER.createCanvas(),t=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),r=!!t?.getContextAttributes()?.stencil;if(t){let i=t.getExtension("WEBGL_lose_context");i&&i.loseContext()}return t=null,r}catch{return!1}}()),Gw}var NY={grad:.9,turn:360,rad:360/(2*Math.PI)},Qs=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},dn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},ci=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},nL=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Y2=function(n){return{r:ci(n.r,0,255),g:ci(n.g,0,255),b:ci(n.b,0,255),a:ci(n.a)}},Hw=function(n){return{r:dn(n.r),g:dn(n.g),b:dn(n.b),a:dn(n.a,3)}},PY=/^#([0-9a-f]{3,8})$/i,J_=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},rL=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},iL=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},Z2=function(n){return{h:nL(n.h),s:ci(n.s,0,100),l:ci(n.l,0,100),a:ci(n.a)}},Q2=function(n){return{h:dn(n.h),s:dn(n.s),l:dn(n.l),a:dn(n.a,3)}},K2=function(n){return iL((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},lf=function(n){return{h:(e=rL(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},FY=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kY=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,LY=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,BY=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zw={string:[[function(n){var e=PY.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?dn(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?dn(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=LY.exec(n)||BY.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Y2({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=FY.exec(n)||kY.exec(n);if(!e)return null;var t,r,i=Z2({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(NY[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return K2(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Qs(e)&&Qs(t)&&Qs(r)?Y2({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Qs(e)||!Qs(t)||!Qs(r))return null;var o=Z2({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return K2(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Qs(e)||!Qs(t)||!Qs(r))return null;var o=function(a){return{h:nL(a.h),s:ci(a.s,0,100),v:ci(a.v,0,100),a:ci(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return iL(o)},"hsv"]]},J2=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},VY=function(n){return typeof n=="string"?J2(n.trim(),zw.string):typeof n=="object"&&n!==null?J2(n,zw.object):[null,void 0]};var $w=function(n,e){var t=lf(n);return{h:t.h,s:ci(t.s+100*e,0,100),l:t.l,a:t.a}},Ww=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},eL=function(n,e){var t=lf(n);return{h:t.h,s:t.s,l:ci(t.l+100*e,0,100),a:t.a}},qw=function(){function n(e){this.parsed=VY(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return dn(Ww(this.rgba),2)},n.prototype.isDark=function(){return Ww(this.rgba)<.5},n.prototype.isLight=function(){return Ww(this.rgba)>=.5},n.prototype.toHex=function(){return e=Hw(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?J_(dn(255*s)):"","#"+J_(t)+J_(r)+J_(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return Hw(this.rgba)},n.prototype.toRgbString=function(){return e=Hw(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return Q2(lf(this.rgba))},n.prototype.toHslString=function(){return e=Q2(lf(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=rL(this.rgba),{h:dn(e.h),s:dn(e.s),v:dn(e.v),a:dn(e.a,3)};var e},n.prototype.invert=function(){return ki({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),ki($w(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),ki($w(this.rgba,-e))},n.prototype.grayscale=function(){return ki($w(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),ki(eL(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),ki(eL(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?ki({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):dn(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=lf(this.rgba);return typeof e=="number"?ki({h:e,s:t.s,l:t.l,a:t.a}):dn(t.h)},n.prototype.isEqual=function(e){return this.toHex()===ki(e).toHex()},n}(),ki=function(n){return n instanceof qw?n:new qw(n)},tL=[],sL=function(n){n.forEach(function(e){tL.indexOf(e)<0&&(e(qw,zw),tL.push(e))})};function oL(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o?.closest){var u=this.toRgb(),h=1/0,d="black";if(!s.length)for(var f in t)s[f]=new n(t[f]).toRgb();for(var p in t){var m=(a=u,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<h&&(h=m,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}sL([oL]);var wu=class ey{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof ey)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?S({},e):e}isSourceEqual(e,t){let r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){let i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){let[e,t,r,i]=this._components;return{r:e,g:t,b:r,a:i}}toRgb(){let[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){let[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){let[t,r,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];let[t,r,i]=this._components;return e[0]=t,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,r,i,s]=ey.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){let[t,r,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];let[t,r,i,s]=this._components;return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}normalize(e){let t,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let o=e;t=(o>>16&255)/255,r=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,i,s=255]=e,t/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let a=ey.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}let o=ki(e);o.isValid()&&({r:t,g:r,b:i,a:s}=o.rgba,t/=255,r/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);let[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),r)}),e)}};wu.shared=new wu,wu.temp=new wu,wu.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var ye=wu;function aL(n,e=[]){return we("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),ye.shared.setValue(n).toRgbArray(e)}function lL(n){return we("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),ye.shared.setValue(n).toHex()}function cL(n){return we("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),ye.shared.setValue(n).toNumber()}function uL(n){return we("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),ye.shared.setValue(n).toNumber()}function UY(){let n=[],e=[];for(let r=0;r<32;r++)n[r]=r,e[r]=r;n[le.NORMAL_NPM]=le.NORMAL,n[le.ADD_NPM]=le.ADD,n[le.SCREEN_NPM]=le.SCREEN,e[le.NORMAL]=le.NORMAL_NPM,e[le.ADD]=le.ADD_NPM,e[le.SCREEN]=le.SCREEN_NPM;let t=[];return t.push(e),t.push(n),t}var cf=UY();function hL(n,e){return cf[e?1:0][n]}function dL(n,e,t,r=!0){return we("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),ye.shared.setValue(n).premultiply(e,r).toArray(t??new Float32Array(4))}function fL(n,e){return we("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),ye.shared.setValue(n).toPremultiplied(e)}function pL(n,e,t,r=!0){return we("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),ye.shared.setValue(n).premultiply(e,r).toArray(t??new Float32Array(4))}var ty=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function mL(n,e=null){let t=n*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let r=0,i=0;r<t;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function Zo(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}var jY={Float32Array,Uint32Array,Int32Array,Uint8Array};function gL(n,e){let t=0,r=0,i={};for(let l=0;l<n.length;l++)r+=e[l],t+=n[l].length;let s=new ArrayBuffer(t*4),o=null,a=0;for(let l=0;l<n.length;l++){let c=e[l],u=n[l],h=Zo(u);i[h]||(i[h]=new jY[h](s)),o=i[h];for(let d=0;d<u.length;d++){let f=(d/c|0)*r+a,p=d%c;o[f+p]=u[d]}a+=c}return new Float32Array(s)}function Qo(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function uf(n){return!(n&n-1)&&!!n}function hf(n){let e=(n>65535?1:0)<<4;n>>>=e;let t=(n>255?1:0)<<3;return n>>>=t,e|=t,t=(n>15?1:0)<<2,n>>>=t,e|=t,t=(n>3?1:0)<<1,n>>>=t,e|=t,e|n>>1}function ny(n,e,t){let r=n.length,i;if(e>=r||t===0)return;t=e+t>r?r-e:t;let s=r-t;for(i=e;i<s;++i)n[i]=n[i+t];n.length=s}function _L(n){return n===0?0:n<0?-1:1}var GY=0;function _s(){return++GY}var Xw=class{constructor(n,e,t,r){this.left=n,this.top=e,this.right=t,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Xw.EMPTY=new Xw(0,0,0,0);var df=Xw;var ff={},fn=Object.create(null),ar=Object.create(null);function yL(){let n;for(n in fn)fn[n].destroy();for(n in ar)ar[n].destroy()}function vL(){let n;for(n in fn)delete fn[n];for(n in ar)delete ar[n]}var ry=class{constructor(e,t,r){this._canvas=j.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||j.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}};function xL(n,e,t){for(let r=0,i=4*t*e;r<e;++r,i+=4)if(n[i+3]!==0)return!1;return!0}function bL(n,e,t,r,i){let s=4*e;for(let o=r,a=r*s+4*t;o<=i;++o,a+=s)if(n[a+3]!==0)return!1;return!0}function iy(n){let{width:e,height:t}=n,r=n.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");let i=r.getImageData(0,0,e,t).data,s=0,o=0,a=e-1,l=t-1;for(;o<t&&xL(i,e,o);)++o;if(o===t)return df.EMPTY;for(;xL(i,e,l);)--l;for(;bL(i,e,s,o,l);)++s;for(;bL(i,e,a,o,l);)--a;return++a,++l,new df(s,o,a,l)}function wL(n){let e=iy(n),{width:t,height:r}=e,i=null;if(!e.isEmpty()){let s=n.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,t,r)}return{width:t,height:r,data:i}}function TL(n){let e=ty.exec(n);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function sy(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location;let t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function pf(n,e=1){let t=j.RETINA_PREFIX?.exec(n);return t?parseFloat(t[1]):e}var V=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(V||{}),Yw=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n=W(S({},typeof n.extension!="object"?{type:n.extension}:n.extension),{ref:n})}if(typeof n=="object")n=S({},n);else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},EL=(n,e)=>Yw(n).priority??e,G={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Yw).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map(Yw).forEach(e=>{e.type.forEach(t=>{let r=this._addHandlers,i=this._queue;r[t]?r[t](e):(i[t]=i[t]||[],i[t].push(e))})}),this},handle(n,e,t){let r=this._addHandlers,i=this._removeHandlers;if(r[n]||i[n])throw new Error(`Extension type ${n} already has a handler`);r[n]=e,i[n]=t;let s=this._queue;return s[n]&&(s[n].forEach(o=>e(o)),delete s[n]),this},handleByMap(n,e){return this.handle(n,t=>{e[t.name]=t.ref},t=>{delete e[t.name]})},handleByList(n,e,t=-1){return this.handle(n,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>EL(s,t)-EL(i,t)))},r=>{let i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};var Jo=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};var HY=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function $Y(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function oy(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let t=e.createShader(e.FRAGMENT_SHADER);for(;;){let r=HY.replace(/%forloop%/gi,$Y(n));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}return n}var Zw=0,Qw=1,Kw=2,Jw=3,eT=4,tT=5,pn=class n{constructor(){this.data=0,this.blendMode=le.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Zw)}set blend(e){!!(this.data&1<<Zw)!==e&&(this.data^=1<<Zw)}get offsets(){return!!(this.data&1<<Qw)}set offsets(e){!!(this.data&1<<Qw)!==e&&(this.data^=1<<Qw)}get culling(){return!!(this.data&1<<Kw)}set culling(e){!!(this.data&1<<Kw)!==e&&(this.data^=1<<Kw)}get depthTest(){return!!(this.data&1<<Jw)}set depthTest(e){!!(this.data&1<<Jw)!==e&&(this.data^=1<<Jw)}get depthMask(){return!!(this.data&1<<tT)}set depthMask(e){!!(this.data&1<<tT)!==e&&(this.data^=1<<tT)}get clockwiseFrontFace(){return!!(this.data&1<<eT)}set clockwiseFrontFace(e){!!(this.data&1<<eT)!==e&&(this.data^=1<<eT)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==le.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){let e=new n;return e.depthTest=!1,e.blend=!0,e}};pn.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};var mf=[];function Tu(n,e){if(!n)return null;let t="";if(typeof n=="string"){let r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(t=r[1].toLowerCase())}for(let r=mf.length-1;r>=0;--r){let i=mf[r];if(i.test&&i.test(n,t))return new i(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var Yt=class{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");let{name:c,items:u}=this;this._aliasCount++;for(let h=0,d=u.length;h<d;h++)u[h][c](e,t,r,i,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}};Object.defineProperties(Yt.prototype,{dispatch:{value:Yt.prototype.emit},run:{value:Yt.prototype.emit}});var Fr=class{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Yt("setRealSize"),this.onUpdate=new Yt("update"),this.onError=new Yt("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}};var Li=class extends Fr{constructor(e,t){let{width:r,height:i}=t||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){let i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===At.UNPACK);let s=t.realWidth,o=t.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(t.target,0,0,0,s,o,t.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(t.target,0,r.internalFormat,s,o,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}};var WY={scaleMode:oi.NEAREST,alphaMode:At.NPM},nT=class Su extends Ko.default{constructor(e=null,t=null){super(),t=Object.assign({},Su.defaultOptions,t);let{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:u,type:h,target:d,resolution:f,resourceOptions:p}=t;e&&!(e instanceof Fr)&&(e=Tu(e,p),e.internal=!0),this.resolution=f||j.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=u,this.type=h,this.target=d,this.alphaMode=r,this.uid=_s(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=uf(this.realWidth)&&uf(this.realHeight)}setResolution(e){let t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ar[this.cacheId],delete fn[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Su.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=j.STRICT_TEXTURE_CACHE){let i=typeof e=="string",s=null;if(i)s=e;else{if(!e._pixiId){let a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${_s()}`}s=e._pixiId}let o=ar[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Su(e,t),o.cacheId=s,Su.addToCache(o,s)),o}static fromBuffer(e,t,r,i){e=e||new Float32Array(t*r*4);let s=new Li(e,S({width:t,height:r},i?.resourceOptions)),o,a;return e instanceof Float32Array?(o=q.RGBA,a=te.FLOAT):e instanceof Int32Array?(o=q.RGBA_INTEGER,a=te.INT):e instanceof Uint32Array?(o=q.RGBA_INTEGER,a=te.UNSIGNED_INT):e instanceof Int16Array?(o=q.RGBA_INTEGER,a=te.SHORT):e instanceof Uint16Array?(o=q.RGBA_INTEGER,a=te.UNSIGNED_SHORT):e instanceof Int8Array?(o=q.RGBA,a=te.BYTE):(o=q.RGBA,a=te.UNSIGNED_BYTE),s.internal=!0,new Su(s,Object.assign({},WY,{type:a,format:o},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),ar[t]&&ar[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),ar[t]=e)}static removeFromCache(e){if(typeof e=="string"){let t=ar[e];if(t){let r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete ar[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete ar[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};nT.defaultOptions={mipmap:wn.POW2,anisotropicLevel:0,scaleMode:oi.LINEAR,wrapMode:Nr.CLAMP,alphaMode:At.UNPACK,target:Xs.TEXTURE_2D,format:q.RGBA,type:te.UNSIGNED_BYTE},nT._globalBatch=0;var ie=nT;var ea=class{constructor(){this.texArray=null,this.blend=0,this.type=vr.TRIANGLES,this.start=0,this.size=0,this.data=null}};var zY=0,ft=class n{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=zY++,this.disposeRunner=new Yt("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?xr.ELEMENT_ARRAY_BUFFER:xr.ARRAY_BUFFER}get index(){return this.type===xr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new n(e)}};var Eu=class n{constructor(e,t=0,r=!1,i=te.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,r,i,s){return new n(e,t,r,i,s)}};var qY={Float32Array,Uint32Array,Int32Array,Uint8Array};function CL(n,e){let t=0,r=0,i={};for(let l=0;l<n.length;l++)r+=e[l],t+=n[l].length;let s=new ArrayBuffer(t*4),o=null,a=0;for(let l=0;l<n.length;l++){let c=e[l],u=n[l],h=Zo(u);i[h]||(i[h]=new qY[h](s)),o=i[h];for(let d=0;d<u.length;d++){let f=(d/c|0)*r+a,p=d%c;o[f+p]=u[d]}a+=c}return new Float32Array(s)}var DL={5126:4,5123:2,5121:1},XY=0,YY={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},kr=class n{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=XY++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Yt("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,i=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof ft||(t instanceof Array&&(t=new Float32Array(t)),t=new ft(t));let c=e.split("|");if(c.length>1){for(let h=0;h<c.length;h++)this.addAttribute(c[h],t,r,i,s);return this}let u=this.buffers.indexOf(t);return u===-1&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new Eu(u,r,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ft||(e instanceof Array&&(e=new Uint16Array(e)),e=new ft(e)),e.type=xr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;let e=[],t=[],r=new ft,i;for(i in this.attributes){let s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*DL[s.type]/4),s.buffer=0}for(r.data=CL(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(let e in this.attributes){let t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){let e=new n;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new ft(this.buffers[t].data.slice(0));for(let t in this.attributes){let r=this.attributes[t];e.attributes[t]=new Eu(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=xr.ELEMENT_ARRAY_BUFFER),e}static merge(e){let t=new n,r=[],i=[],s=[],o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new YY[Zo(o.buffers[a].data)](i[a]),t.buffers[a]=new ft(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=xr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){u=h;break}for(let h in o.attributes){let d=o.attributes[h];(d.buffer|0)===u&&(l+=d.size*DL[d.type]/4)}for(let h=0;h<e.length;h++){let d=e[h].indexBuffer.data;for(let f=0;f<d.length;f++)t.indexBuffer.data[f+c]+=a;a+=e[h].buffers[u].data.length/l,c+=d.length}}return t}};var nl=class extends kr{constructor(e=!1){super(),this._buffer=new ft(null,e,!1),this._indexBuffer=new ft(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,te.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,te.FLOAT).addAttribute("aColor",this._buffer,4,!0,te.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,te.FLOAT).addIndex(this._indexBuffer)}};var ta=Math.PI*2,rT=180/Math.PI,iT=Math.PI/180,_t=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(_t||{});var ve=class n{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new n(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}};ve.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};var ay=[new ve,new ve,new ve,new ve],se=class n{constructor(e=0,t=0,r=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(i),this.type=_t.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new n(0,0,0,0)}clone(){return new n(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){let w=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=w)return!1;let P=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>P}let r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;let a=ay[0].set(e.left,e.top),l=ay[1].set(e.left,e.bottom),c=ay[2].set(e.right,e.top),u=ay[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;let h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(a,a),t.apply(l,l),t.apply(c,c),t.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=r||Math.min(a.x,l.x,c.x,u.x)>=i||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;let d=h*(l.y-a.y),f=h*(a.x-l.x),p=d*r+f*s,m=d*i+f*s,g=d*r+f*o,_=d*i+f*o;if(Math.max(p,m,g,_)<=d*a.x+f*a.y||Math.min(p,m,g,_)>=d*u.x+f*u.y)return!1;let v=h*(a.y-c.y),y=h*(c.x-a.x),x=v*r+y*s,T=v*i+y*s,C=v*r+y*o,b=v*i+y*o;return!(Math.max(x,T,C,b)<=v*a.x+y*a.y||Math.min(x,T,C,b)>=v*u.x+y*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){let t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){let r=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){let t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=i,this.height=s-i,this}};se.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};var Cu=class n{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=_t.CIRC}clone(){return new n(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let r=this.radius*this.radius,i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=r}getBounds(){return new se(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};Cu.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};var Du=class n{constructor(e=0,t=0,r=0,i=0){this.x=e,this.y=t,this.width=r,this.height=i,this.type=_t.ELIP}clone(){return new n(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(t-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new se(this.x-this.width,this.y-this.height,this.width,this.height)}};Du.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};var ys=class n{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){let r=[];for(let i=0,s=t.length;i<s;i++)r.push(t[i].x,t[i].y);t=r}this.points=t,this.type=_t.POLY,this.closeStroke=!0}clone(){let e=this.points.slice(),t=new n(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1,i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){let a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],u=this.points[o*2+1];l>t!=u>t&&e<(c-a)*((t-l)/(u-l))+a&&(r=!r)}return r}};ys.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((n,e)=>`${n}, ${e}`,"")}]`};var Au=class n{constructor(e=0,t=0,r=0,i=0,s=20){this.x=e,this.y=t,this.width=r,this.height=i,this.radius=s,this.type=_t.RREC}clone(){return new n(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=t-(this.y+r),o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=t-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}};Au.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};var ke=class n{constructor(e=1,t=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,i,s,o){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new ve;let r=e.x,i=e.y;return t.x=this.a*r+this.c*i+this.tx,t.y=this.b*r+this.d*i+this.ty,t}applyInverse(e,t){t=t||new ve;let r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=s*t-this.d*r,this.d=s*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this}append(e){let t=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,t,r,i,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=t-(r*this.b+i*this.d),this}prepend(e){let t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(r,t),c=Math.abs(a+l);return c<1e-5||Math.abs(ta-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){let e=this.a,t=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-t*r;return this.a=i/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new n}static get TEMP_MATRIX(){return new n}};ke.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};var rl=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],il=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],sl=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ol=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],sT=[],AL=[],ly=Math.sign;function ZY(){for(let n=0;n<16;n++){let e=[];sT.push(e);for(let t=0;t<16;t++){let r=ly(rl[n]*rl[t]+sl[n]*il[t]),i=ly(il[n]*rl[t]+ol[n]*il[t]),s=ly(rl[n]*sl[t]+sl[n]*ol[t]),o=ly(il[n]*sl[t]+ol[n]*ol[t]);for(let a=0;a<16;a++)if(rl[a]===r&&il[a]===i&&sl[a]===s&&ol[a]===o){e.push(a);break}}}for(let n=0;n<16;n++){let e=new ke;e.set(rl[n],il[n],sl[n],ol[n],0,0),AL.push(e)}}ZY();var Tt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>rl[n],uY:n=>il[n],vX:n=>sl[n],vY:n=>ol[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>sT[n][e],sub:(n,e)=>sT[n][Tt.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Tt.S:Tt.N:Math.abs(e)*2<=Math.abs(n)?n>0?Tt.E:Tt.W:e>0?n>0?Tt.SE:Tt.SW:n>0?Tt.NE:Tt.NW,matrixAppendRotationInv:(n,e,t=0,r=0)=>{let i=AL[Tt.inv(e)];i.tx=t,i.ty=r,n.append(i)}};var Lr=class n{constructor(e,t,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new n(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}};Lr.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};var oT=class{constructor(){this.worldTransform=new ke,this.localTransform=new ke,this.position=new Lr(this.onChange,this,0,0),this.scale=new Lr(this.onChange,this,1,1),this.pivot=new Lr(this.onChange,this,0,0),this.skew=new Lr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){let n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){let e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){let t=n.worldTransform,r=this.worldTransform;r.a=e.a*t.a+e.b*t.c,r.b=e.a*t.b+e.b*t.d,r.c=e.c*t.a+e.d*t.c,r.d=e.c*t.b+e.d*t.d,r.tx=e.tx*t.a+e.ty*t.c+t.tx,r.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};oT.IDENTITY=new oT;var al=oT;al.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var IL=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`;var ML=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function cy(n,e,t){let r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function aT(n){let e=new Array(n);for(let t=0;t<e.length;t++)e[t]=!1;return e}function gf(n,e){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return aT(2*e);case"bvec3":return aT(3*e);case"bvec4":return aT(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var vs=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,e)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(e==null||e.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,e)=>n.type==="mat3"&&n.size===1&&!n.isArray&&e.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,e)=>n.type==="vec2"&&n.size===1&&!n.isArray&&e.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,e)=>n.type==="vec3"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}];var QY={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},KY={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function lT(n,e){let t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(let r in n.uniforms){let i=e[r];if(!i){n.uniforms[r]?.group===!0&&(n.uniforms[r].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}let s=n.uniforms[r],o=!1;for(let a=0;a<vs.length;a++)if(vs[a].test(i,s)){t.push(vs[a].code(r,s)),o=!0;break}if(!o){let a=(i.size===1&&!i.isArray?QY:KY)[i.type].replace("location",`ud["${r}"].location`);t.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var OL={},uy=OL;function hy(){if(uy===OL||uy?.isContextLost()){let n=j.ADAPTER.createCanvas(),e;j.PREFER_ENV>=Rr.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),uy=e}return uy}var dy;function cT(){if(!dy){dy=sr.MEDIUM;let n=hy();if(n&&n.getShaderPrecisionFormat){let e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);e&&(dy=e.precision?sr.HIGH:sr.MEDIUM)}}return dy}function RL(n,e){let t=n.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),r=n.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{t[c-1]=`%c${t[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let l=t.join(`
`);a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function uT(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||RL(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||RL(n,r),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}var JY={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function _f(n){return JY[n]}var fy=null,NL={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function yf(n,e){if(!fy){let t=Object.keys(NL);fy={};for(let r=0;r<t.length;++r){let i=t[r];fy[n[i]]=NL[i]}}return fy[e]}function py(n,e,t){if(n.substring(0,9)!=="precision"){let r=e;return e===sr.HIGH&&t!==sr.HIGH&&(r=sr.MEDIUM),`precision ${r} float;
${n}`}else if(t!==sr.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}var vf;function my(){if(typeof vf=="boolean")return vf;try{vf=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{vf=!1}return vf}var eZ=0,gy={},hT=class Iu{constructor(e,t,r="pixi-shader",i={}){this.extra={},this.id=eZ++,this.vertexSrc=e||Iu.defaultVertexSrc,this.fragmentSrc=t||Iu.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),gy[r]?(gy[r]++,r+=`-${gy[r]}`):gy[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=py(this.vertexSrc,Iu.defaultVertexPrecision,sr.HIGH),this.fragmentSrc=py(this.fragmentSrc,Iu.defaultFragmentPrecision,cT())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return ML}static get defaultFragmentSrc(){return IL}static from(e,t,r){let i=e+t,s=ff[i];return s||(ff[i]=s=new Iu(e,t,r)),s}};hT.defaultVertexPrecision=sr.HIGH,hT.defaultFragmentPrecision=ai.apple.device?sr.HIGH:sr.MEDIUM;var Hn=hT;var tZ=0,lr=class n{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=tZ++,this.static=!!t,this.ubo=!!r,e instanceof ft?(this.buffer=e,this.buffer.type=xr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ft(new Float32Array(1)),this.buffer.type=xr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(!this.ubo)this.uniforms[e]=new n(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,r){return new n(e,t,r)}static uboFrom(e,t){return new n(e,t??!0,!0)}};var Tn=class n{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof lr?this.uniformGroup=t:this.uniformGroup=new lr(t):this.uniformGroup=new lr({}),this.disposeRunner=new Yt("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(let r in t.uniforms){let i=t.uniforms[r];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){let i=Hn.from(e,t);return new n(i,r)}};var xf=class{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){let r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=lr.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Hn(this.vertexSrc,i)}let t={tint:new Float32Array([1,1,1,1]),translationMatrix:new ke,default:this.defaultGroupCache[e]};return new Tn(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}};var na=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}};function PL(){return!ai.apple.device}function FL(n){let e=!0,t=j.ADAPTER.getNavigator();if(ai.tablet||ai.phone){if(ai.apple.device){let r=t.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(ai.android.device){let r=t.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?n:4}var Bi=class{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}};var kL=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`;var LL=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;var bf=class Vi extends Bi{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=nl,this.vertexSize=6,this.state=pn.for2d(),this.size=Vi.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??FL(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??PL(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return we("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return LL}static get defaultFragmentTemplate(){return kL}setShaderGenerator({vertex:e=Vi.defaultVertexSrc,fragment:t=Vi.defaultFragmentTemplate}={}){this.shaderGenerator=new xf(e,t)}contextChange(){let e=this.renderer.gl;j.PREFER_ENV===Rr.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Vi.defaultMaxTextures),this.maxTextures=oy(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){let{_drawCallPool:e,_textureArrayPool:t}=Vi,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new ea);for(;t.length<i;)t.push(new na);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){let{_bufferedTextures:e,maxTextures:t}=this,r=Vi._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++ie._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(s,t);for(let h=0;h<this._bufferSize;++h){let d=e[h];e[h]=null,d._batchEnabled!==a&&(c.count>=t&&(i.boundArray(c,s,a,t),this.buildDrawCalls(c,u,h),u=h,c=r[++l],++a),d._batchEnabled=a,d.touched=o,c.elements[c.count++]=d)}c.count>0&&(i.boundArray(c,s,a,t),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let h=0;h<s.length;h++)s[h]=null;ie._globalBatch=a}buildDrawCalls(e,t,r){let{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=Vi._drawCallPool,c=this._dcIndex,u=this._aIndex,h=this._iIndex,d=l[c];d.start=this._iIndex,d.texArray=e;for(let f=t;f<r;++f){let p=i[f],m=p._texture.baseTexture,g=cf[m.alphaMode?1:0][p.blendMode];i[f]=null,t<f&&d.blend!==g&&(d.size=h-d.start,t=f,d=l[++c],d.texArray=e,d.start=h),this.packInterleavedGeometry(p,s,o,u,h),u+=p.vertexData.length/2*a,h+=p.indices.length,d.blend=g}t<r&&(d.size=h-d.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(e){let t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){let{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;Vi.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){let e=this._dcIndex,{gl:t,state:r}=this.renderer,i=Vi._drawCallPool,s=null;for(let o=0;o<e;o++){let{texArray:a,type:l,size:c,start:u,blend:h}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,r.set(this.state),t.drawElements(l,c,t.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Vi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){let t=Qo(Math.ceil(e/8)),r=hf(t),i=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new Jo(i*this.vertexSize*4)),s}getIndexBuffer(e){let t=Qo(Math.ceil(e/12)),r=hf(t),i=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,r,i,s){let{uint32View:o,float32View:a}=t,l=i/this.vertexSize,c=e.uvs,u=e.indices,h=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=ye.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<h.length;m+=2)a[i++]=h[m],a[i++]=h[m+1],a[i++]=c[m],a[i++]=c[m+1],o[i++]=p,a[i++]=d;for(let m=0;m<u.length;m++)r[s++]=l+u[m]}};bf.defaultBatchSize=4096,bf.extension={name:"batch",type:V.RendererPlugin},bf._drawCallPool=[],bf._textureArrayPool=[];var Ks=bf;G.add(Ks);var BL=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`;var VL=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;var dT=class wf extends Tn{constructor(e,t,r){let i=Hn.from(e||wf.defaultVertexSrc,t||wf.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=wf.defaultResolution,this.multisample=wf.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new pn}apply(e,t,r,i,s){e.applyFilter(this,t,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return VL}static get defaultFragmentSrc(){return BL}};dT.defaultResolution=1,dT.defaultMultisample=at.NONE;var xt=dT;var Js=class{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ye(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;let{backgroundColor:t,background:r,backgroundAlpha:i}=e,s=r??t;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}};Js.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Js.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"background"};G.add(Js);var Mu=class{constructor(e){this.renderer=e,this.emptyRenderer=new Bi(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){let{boundTextures:r}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,r,i){let{elements:s,ids:o,count:a}=e,l=0;for(let c=0;c<a;c++){let u=s[c],h=u._batchLocation;if(h>=0&&h<i&&t[h]===u){o[c]=h;continue}for(;l<i;){let d=t[l];if(d&&d._batchEnabled===r&&d._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,t[l]=u;break}}}destroy(){this.renderer=null}};Mu.extension={type:V.RendererSystem,name:"batch"};G.add(Mu);var UL=0,eo=class{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=UL++}init(e){if(e.context)this.initFromContext(e.context);else{let t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=UL++,this.renderer.runners.contextChange.emit(e);let t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){let t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(j.PREFER_ENV>=Rr.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){let{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){let e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){let t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};eo.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},eo.extension={type:V.RendererSystem,name:"context"};G.add(eo);var ra=class{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Yt("disposeFramebuffer"),this.multisample=at.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new ie(null,{scaleMode:oi.NEAREST,resolution:1,mipmap:wn.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new ie(null,{scaleMode:oi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:wn.OFF,format:q.DEPTH_COMPONENT,type:te.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){let i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){let r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}};var ll=class extends ie{constructor(e={}){if(typeof e=="number"){let t=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:t,height:r,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=at.NONE),super(null,e),this.mipmap=wn.OFF,this.valid=!0,this._clear=new ye([0,0,0,0]),this.framebuffer=new ra(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}};var Sn=class extends Fr{constructor(e){let t=e,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){r===void 0&&!t.startsWith("data:")?e.crossOrigin=sy(t):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,t,r,i){let s=e.gl,o=t.realWidth,a=t.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===At.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(t.target,0,r.internalFormat,t.format,r.type,i)),!0}update(){if(this.destroyed)return;let e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}};var cl=class extends Sn{constructor(e,t){if(t=t||{},typeof e=="string"){let r=new Image;Sn.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??j.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,r)=>{let i=this.source;this.url=i.src;let s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){let e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);let t=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>t(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===At.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,r){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let i=!0,s=t._glTextures;for(let o in s){let a=s[o];if(a!==r&&a.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}};var ul=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){let i=t.width,s=t.height;if(r){let o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,c=e.y/s+a;r=Tt.add(r,Tt.NW),this.x0=l+o*Tt.uX(r),this.y0=c+a*Tt.uY(r),r=Tt.add(r,2),this.x1=l+o*Tt.uX(r),this.y1=c+a*Tt.uY(r),r=Tt.add(r,2),this.x2=l+o*Tt.uX(r),this.y2=c+a*Tt.uY(r),r=Tt.add(r,2),this.x3=l+o*Tt.uX(r),this.y3=c+a*Tt.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}};ul.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};var jL=new ul;function _y(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}var fe=class n extends Ko.default{constructor(e,t,r,i,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new se(0,0,1,1)),e instanceof n&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=jL,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ve(o.x,o.y):new ve(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){let{resource:t}=this.baseTexture;t?.url&&fn[t.url]&&n.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,n.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){let e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new n(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===jL&&(this._uvs=new ul),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=j.STRICT_TEXTURE_CACHE){let i=typeof e=="string",s=null;if(i)s=e;else if(e instanceof ie){if(!e.cacheId){let a=t?.pixiIdPrefix||"pixiid";e.cacheId=`${a}-${_s()}`,ie.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){let a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${_s()}`}s=e._pixiId}let o=fn[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof ie)?(t.resolution||(t.resolution=pf(e)),o=new n(new ie(e,t)),o.baseTexture.cacheId=s,ie.addToCache(o.baseTexture,s),n.addToCache(o,s)):!o&&e instanceof ie&&(o=new n(e),n.addToCache(o,s)),o}static fromURL(e,t){let r=Object.assign({autoLoad:!1},t?.resourceOptions),i=n.from(e,Object.assign({resourceOptions:r},t),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,t,r,i){return new n(ie.fromBuffer(e,t,r,i))}static fromLoader(e,t,r,i){let s=new ie(e,Object.assign({scaleMode:ie.defaultOptions.scaleMode,resolution:pf(t)},i)),{resource:o}=s;o instanceof cl&&(o.url=t);let a=new n(s);return r||(r=t),ie.addToCache(a.baseTexture,r),n.addToCache(a,r),r!==t&&(ie.addToCache(a.baseTexture,t),n.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),fn[t]&&fn[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),fn[t]=e)}static removeFromCache(e){if(typeof e=="string"){let t=fn[e];if(t){let r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete fn[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)fn[e.textureCacheIds[t]]===e&&delete fn[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;let{x:t,y:r,width:i,height:s}=e,o=t+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){let l=o&&a?"and":"or",c=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,u=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return n._EMPTY||(n._EMPTY=new n(new ie),_y(n._EMPTY),_y(n._EMPTY.baseTexture)),n._EMPTY}static get WHITE(){if(!n._WHITE){let e=j.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),n._WHITE=new n(ie.from(e)),_y(n._WHITE),_y(n._WHITE.baseTexture)}return n._WHITE}};var ui=class n extends fe{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){let i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(t*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){let{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new n(new ll(e))}};var fT=(()=>{class n{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,r,i=at.NONE){let s=new ll(Object.assign({width:t,height:r,resolution:1,multisample:i},this.textureOptions));return new ui(s)}getOptimalTexture(t,r,i=1,s=at.NONE){let o;t=Math.max(Math.ceil(t*i-1e-6),1),r=Math.max(Math.ceil(r*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=Qo(t),r=Qo(r),o=((t&65535)<<16|r&65535)>>>0,s>1&&(o+=s*4294967296)):o=s>1?-s:-1,this.texturePool[o]||(this.texturePool[o]=[]);let a=this.texturePool[o].pop();return a||(a=this.createTexture(t,r,s)),a.filterPoolKey=o,a.setResolution(i),a}getFilterTexture(t,r,i){let s=this.getOptimalTexture(t.width,t.height,r||t.resolution,i||at.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){let r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(let r in this.texturePool){let i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(let r in this.texturePool){if(!(Number(r)<0))continue;let i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}return n.SCREEN_KEY=-1,n})();var Tf=class extends kr{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}};var hl=class extends kr{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ft(this.vertices),this.uvBuffer=new ft(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+t.width/e.width,this.uvs[3]=i,this.uvs[4]=r+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=r,this.uvs[7]=i+t.height/e.height,r=t.x,i=t.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+t.width,this.vertices[3]=i,this.vertices[4]=r+t.width,this.vertices[5]=i+t.height,this.vertices[6]=r,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}};var Sf=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=at.NONE,this.sourceFrame=new se,this.destinationFrame=new se,this.bindingSourceFrame=new se,this.bindingDestinationFrame=new se,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}};var yy=[new ve,new ve,new ve,new ve],pT=new ke,Ou=class{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new fT,this.statePool=[],this.quad=new Tf,this.quadUv=new hl,this.tempRect=new se,this.activeState={},this.globalUniforms=new lr({outputFrame:new se,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){let r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new Sf,o=r.renderTexture,a,l;if(o.current){let g=o.current;a=g.resolution,l=g.multisample}else a=r.resolution,l=r.multisample;let c=t[0].resolution||a,u=t[0].multisample??l,h=t[0].padding,d=t[0].autoFit,f=t[0].legacy??!0;for(let g=1;g<t.length;g++){let _=t[g];c=Math.min(c,_.resolution||a),u=Math.min(u,_.multisample??l),h=this.useMaxPadding?Math.max(h,_.padding):h+_.padding,d=d&&_.autoFit,f=f||(_.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=u,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);let p=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(pT.copyFrom(r.projection.transform).invert(),p),d?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,u),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;let m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),r.framebuffer.clear(0,0,0,0)}pop(){let e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;let i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;let s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){let c=i.filterArea;c[0]=t.destinationFrame.width,c[1]=t.destinationFrame.height,c[2]=t.sourceFrame.x,c[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();let l=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,l.renderTexture,Pr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let c=t.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,t.resolution);u.filterFrame=c.filterFrame;let h=0;for(h=0;h<r.length-1;++h){h===1&&t.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,t.resolution),u.filterFrame=c.filterFrame),r[h].apply(this,c,u,Pr.CLEAR,t);let d=c;c=u,u=d}r[h].apply(this,c,l.renderTexture,Pr.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Pr.CLEAR){let{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){let o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);let s=i.stateId&1||this.forceClear;(t===Pr.CLEAR||t===Pr.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,i){let s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(vr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(vr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){let{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=t._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=t.worldTransform.copyTo(ke.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,i=at.NONE){return this.texturePool.getOptimalTexture(e,t,r,i)}getFilterTexture(e,t,r){if(typeof e=="number"){let s=e;e=t,t=s}e=e||this.activeState.renderTexture;let i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||at.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){let r=yy[0],i=yy[1],s=yy[2],o=yy[3];r.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);let a=Math.min(r.x,i.x,s.x,o.x),l=Math.min(r.y,i.y,s.y,o.y),c=Math.max(r.x,i.x,s.x,o.x),u=Math.max(r.y,i.y,s.y,o.y);t.x=a,t.y=l,t.width=c-a,t.height=u-l}roundFrame(e,t,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){let{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?pT.copyFrom(s):pT.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}};Ou.extension={type:V.RendererSystem,name:"filter"};G.add(Ou);var Ef=class{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=at.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}};var nZ=new se,Ru=class{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new ra(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);let e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new se,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;j.PREFER_ENV===Rr.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=i=>t.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){let{gl:i}=this;if(e){let s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){let a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){let o=t.width>>r,a=t.height>>r,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{let o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,i){let s=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=r,s.height=i,this.gl.viewport(e,t,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,i,s=R_.COLOR|R_.DEPTH){let{gl:o}=this;o.clearColor(e,t,r,i),o.clear(s)}initFramebuffer(e){let{gl:t}=this,r=new Ef(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){let{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){t.bindRenderbuffer(t.RENDERBUFFER,r.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}let i=e.colorTextures,s=i.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){let a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){let{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));let a=[];for(let l=0;l<o;l++){let c=s[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,t),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){let l=e.depthTexture;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||r.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH_STENCIL):e.depth&&e.stencil?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH24_STENCIL8):e.depth?(l=r.DEPTH_ATTACHMENT,c=r.DEPTH_COMPONENT24):(l=r.STENCIL_ATTACHMENT,c=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,c,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,c,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,l,r.RENDERBUFFER,i.stencil)}else i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){let{msaaSamples:t}=this,r=at.NONE;if(e<=1||t===null)return r;for(let i=0;i<t.length;i++)if(t[i]<=e){r=t[i];break}return r===1&&(r=at.NONE),r}blit(e,t,r){let{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;let l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;let u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new ra(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||(t=nZ,t.width=i.width,t.height=i.height),r||(r=t);let c=t.width===r.width&&t.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){let r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];let s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){let t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){let e=this.current;if(!e)return;let t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;let r=e.width,i=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,r,i):s.renderbufferStorage(s.RENDERBUFFER,l,r,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new se}destroy(){this.renderer=null}};Ru.extension={type:V.RendererSystem,name:"framebuffer"};G.add(Ru);var mT={5126:4,5123:2,5121:1},Nu=class{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);let e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;j.PREFER_ENV===Rr.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){let r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>r.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;let{gl:r}=this,i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);let o=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){let i=e.buffers[r];t.update(i)}}checkCompatibility(e,t){let r=e.attributes,i=t.attributeData;for(let s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){let r=e.attributes,i=t.attributeData,s=["g",e.id];for(let o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,t,r=!0){let i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);let l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID],u=c[l];if(u)return c[a.id]=u,u;let h=e.buffers,d=e.attributes,f={},p={};for(let m in h)f[m]=0,p[m]=0;for(let m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*mT[d[m].type];for(let m in d){let g=d[m],_=g.size;g.stride===void 0&&(f[g.buffer]===_*mT[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=_*mT[g.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(let m=0;m<h.length;m++){let g=h[m];o.bind(g),r&&g._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,i.bindVertexArray(null),o.unbind(xr.ARRAY_BUFFER),u}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];let r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let a=0;a<s.length;a++){let l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&o.dispose(s[a],t))}if(!t){for(let a in r)if(a[0]==="g"){let l=r[a];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){let t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){let r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(let c in a){let u=a[c],h=o[u.buffer],d=h._glBuffers[i];if(t.attributeData[c]){l!==d&&(s.bind(h),l=d);let f=t.attributeData[c].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(f,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,r,i){let{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){let a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(r||0)*a,i||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,t||o.getSize(),i||1):s.drawArrays(e,r,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};Nu.extension={type:V.RendererSystem,name:"geometry"};G.add(Nu);var GL=new ke,ia=class{constructor(e,t){this._texture=e,this.mapCoord=new ke,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);let r=this.mapCoord;for(let i=0;i<e.length;i+=2){let s=e[i],o=e[i+1];t[i]=s*r.a+o*r.c+r.tx,t[i+1]=s*r.b+o*r.d+r.ty}return t}update(e){let t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;let r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);let i=t.orig,s=t.trim;s&&(GL.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(GL));let o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(t._frame.x+l+c)/o.width,a[1]=(t._frame.y+l+c)/o.height,a[2]=(t._frame.x+t._frame.width-l+c)/o.width,a[3]=(t._frame.y+t._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}};var HL=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`;var $L=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;var Cf=class extends xt{constructor(e,t,r){let i=null;typeof e!="string"&&t===void 0&&r===void 0&&(i=e,e=void 0,t=void 0,r=void 0),super(e||$L,t||HL,r),this.maskSprite=i,this.maskMatrix=new ke}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,i){let s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ia(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,r,i))}};var Df=class{constructor(e=null){this.type=Vt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=xt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Vt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}};var Pu=class{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){let s=this.maskDataPool.pop()||new Df;s.pooled=!0,s.maskObject=t,r=s}let i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==Vt.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Vt.SCISSOR:this.renderer.scissor.push(r);break;case Vt.STENCIL:this.renderer.stencil.push(r);break;case Vt.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Vt.COLOR:this.pushColorMask(r);break;default:break}r.type===Vt.SPRITE&&this.maskStack.push(r)}pop(e){let t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case Vt.SCISSOR:this.renderer.scissor.pop(t);break;case Vt.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Vt.SPRITE:this.popSpriteMask(t);break;case Vt.COLOR:this.popColorMask(t);break;default:break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){let r=this.maskStack[this.maskStack.length-1];r.type===Vt.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){let t=e.maskObject;t?t.isSprite?e.type=Vt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Vt.SCISSOR:e.type=Vt.STENCIL:e.type=Vt.COLOR}pushSpriteMask(e){let{maskObject:t}=e,r=e._target,i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Cf])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=t;let s=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){let t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){let t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}};Pu.extension={type:V.RendererSystem,name:"mask"};G.add(Pu);var Fu=class{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){let{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;let i=this.getStackLength();i!==r&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}};var WL=new ke,zL=[],qL=class vy extends Fu{constructor(e){super(e),this.glConst=j.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){let e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;let t=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,s=i.renderTexture,o=r.getBounds(!0,zL.pop()??new se);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;let{a:t,b:r,c:i,d:s}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){let{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||vy.isMatrixRotated(t.worldTransform)||vy.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);let r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,i,s){vy.isMatrixRotated(s)||(s=s?WL.copyFrom(s):WL.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);let{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){let{gl:t}=this.renderer;e&&zL.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){let e=this.maskStack[this.maskStack.length-1]._scissorRect,t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};qL.extension={type:V.RendererSystem,name:"scissor"};var gT=qL;G.add(gT);var ku=class extends Fu{constructor(e){super(e),this.glConst=j.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){let e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){let t=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;let s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){let t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{let r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,t.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){let e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}};ku.extension={type:V.RendererSystem,name:"stencil"};G.add(ku);var Lu=class{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){let e=this.rendererPlugins;for(let t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(let e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}};Lu.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"_plugin"};G.add(Lu);var Bu=class{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ke,this.transform=null}update(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);let s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,r,i){let s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}};Bu.extension={type:V.RendererSystem,name:"projection"};G.add(Bu);var rZ=new al,XL=new se,Vu=class{constructor(e){this.renderer=e,this._tempMatrix=new ke}generateTexture(e,t){let c=t||{},{region:r}=c,i=Tr(c,["region"]),s=r?.copyTo(XL)||e.getLocalBounds(XL,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);let a=ui.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;let l=e.transform;return e.transform=rZ,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}};Vu.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"textureGenerator"};G.add(Vu);var dl=new se,Af=new se,Uu=class{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new se,this.destinationFrame=new se,this.viewportFrame=new se}contextChange(){let e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){let i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(dl.width=e.frame.width,dl.height=e.frame.height,t=dl),r||(Af.x=e.frame.x,Af.y=e.frame.y,Af.width=t.width,Af.height=t.height,r=Af),o=s.framebuffer):(a=i.resolution,t||(dl.width=i._view.screen.width,dl.height=i._view.screen.height,t=dl),r||(r=dl,r.width=t.width,r.height=t.height));let l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(r,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){let r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=ye.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);let s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:u,height:h}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};Uu.extension={type:V.RendererSystem,name:"renderTexture"};G.add(Uu);var If=class{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}};function YL(n,e){let t={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let s=e.getActiveAttrib(n,i);if(s.name.startsWith("gl_"))continue;let o=yf(e,s.type),a={type:o,name:s.name,size:_f(o),location:e.getAttribLocation(n,s.name)};t[s.name]=a}return t}function ZL(n,e){let t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){let s=e.getActiveUniform(n,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=yf(e,s.type);t[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:gf(l,s.size)}}return t}function _T(n,e){let t=cy(n,n.VERTEX_SHADER,e.vertexSrc),r=cy(n,n.FRAGMENT_SHADER,e.fragmentSrc),i=n.createProgram();n.attachShader(i,t),n.attachShader(i,r);let s=e.extra?.transformFeedbackVaryings;if(s&&(typeof n.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||uT(n,i,t,r),e.attributeData=YL(i,n),e.uniformData=ZL(i,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){let a=Object.keys(e.attributeData);a.sort((l,c)=>l>c?1:-1);for(let l=0;l<a.length;l++)e.attributeData[a[l]].location=l,n.bindAttribLocation(i,l,a[l]);n.linkProgram(i)}n.deleteShader(t),n.deleteShader(r);let o={};for(let a in e.uniformData){let l=e.uniformData[a];o[a]={location:n.getUniformLocation(i,a),value:gf(l.type,l.size)}}return new If(i,o)}function iZ(n,e,t,r,i){t.buffer.update(i)}var sZ={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},QL={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function KL(n){let e=n.map(s=>({data:s,offset:0,dataLen:0,dirty:0})),t=0,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s];if(t=QL[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,r%t!==0&&r<16){let a=r%t%16;r+=a,i+=a}r+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,r=t):(o.offset=i,r+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function JL(n,e){let t=[];for(let r in n)e[r]&&t.push(e[r]);return t.sort((r,i)=>r.index-i.index),t}function yT(n,e){if(!n.autoManage)return{size:0,syncFunc:iZ};let t=JL(n.uniforms,e),{uboElements:r,size:i}=KL(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){let a=r[o],l=n.uniforms[a.data.name],c=a.data.name,u=!1;for(let h=0;h<vs.length;h++){let d=vs[h];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,vs[h].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){let h=_f(a.data.type),d=Math.max(QL[a.data.type]/16,1),f=h/d,p=(4-f%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{let h=sZ[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}var oZ=0,xy={textureCount:0,uboCount:0},ju=class{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=oZ++}systemCheck(){if(!my())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;let r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),t||(xy.textureCount=0,xy.uboCount=0,this.syncUniformGroup(e.uniformGroup,xy)),i}setUniforms(e){let t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){let r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){let t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=lT(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){let r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;let i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,xy,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){let{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);let s=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;let o=this.getSignature(e,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=yT(e,this.shader.program.uniformData)),e.autoManage){let l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){let i=e.uniforms,s=[`${r}-`];for(let o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){let t=this.gl,r=e.program,i=_T(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};ju.extension={type:V.RendererSystem,name:"shader"};G.add(ju);var to=class{constructor(e){this.renderer=e}run(e){let{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.3.2 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}};to.defaultOptions={hello:!1},to.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"startup"};G.add(to);function eB(n,e=[]){return e[le.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.ADD]=[n.ONE,n.ONE],e[le.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.NONE]=[0,0],e[le.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[le.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[le.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[le.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[le.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[le.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[le.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[le.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[le.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[le.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[le.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}var aZ=0,lZ=1,cZ=2,uZ=3,hZ=4,dZ=5,tB=class vT{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=le.NONE,this._blendEq=!1,this.map=[],this.map[aZ]=this.setBlend,this.map[lZ]=this.setOffset,this.map[cZ]=this.setCullFace,this.map[uZ]=this.setDepthTest,this.map[hZ]=this.setFrontFace,this.map[dZ]=this.setDepthMask,this.checks=[],this.defaultState=new pn,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=eB(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(vT.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(vT.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;let t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){let r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};tB.extension={type:V.RendererSystem,name:"state"};var xT=tB;G.add(xT);var Gu=class extends Ko.default{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);let t=(e.priority??[]).filter(i=>e.systems[i]),r=[...t,...Object.keys(e.systems).filter(i=>!t.includes(i))];for(let i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Yt(t)})}addSystem(e,t){let r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(let i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,t){let r=Object.keys(this._systemsHash);e.items.forEach(i=>{let s=r.find(o=>this._systemsHash[o]===i);i[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}};var Mf=class by{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=by.defaultMaxIdle,this.checkCountMax=by.defaultCheckCountMax,this.mode=by.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==N_.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this.renderer.texture,t=e.managedTextures,r=!1;for(let i=0;i<t.length;i++){let s=t[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){let t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Mf.defaultMode=N_.AUTO,Mf.defaultMaxIdle=60*60,Mf.defaultCheckCountMax=60*10,Mf.extension={type:V.RendererSystem,name:"textureGC"};var xs=Mf;G.add(xs);var fl=class{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=te.UNSIGNED_BYTE,this.internalFormat=q.RGBA,this.samplerType=0}};function nB(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[n.RGB]:K.FLOAT,[n.RGBA]:K.FLOAT,[n.ALPHA]:K.FLOAT,[n.LUMINANCE]:K.FLOAT,[n.LUMINANCE_ALPHA]:K.FLOAT,[n.R8]:K.FLOAT,[n.R8_SNORM]:K.FLOAT,[n.RG8]:K.FLOAT,[n.RG8_SNORM]:K.FLOAT,[n.RGB8]:K.FLOAT,[n.RGB8_SNORM]:K.FLOAT,[n.RGB565]:K.FLOAT,[n.RGBA4]:K.FLOAT,[n.RGB5_A1]:K.FLOAT,[n.RGBA8]:K.FLOAT,[n.RGBA8_SNORM]:K.FLOAT,[n.RGB10_A2]:K.FLOAT,[n.RGB10_A2UI]:K.FLOAT,[n.SRGB8]:K.FLOAT,[n.SRGB8_ALPHA8]:K.FLOAT,[n.R16F]:K.FLOAT,[n.RG16F]:K.FLOAT,[n.RGB16F]:K.FLOAT,[n.RGBA16F]:K.FLOAT,[n.R32F]:K.FLOAT,[n.RG32F]:K.FLOAT,[n.RGB32F]:K.FLOAT,[n.RGBA32F]:K.FLOAT,[n.R11F_G11F_B10F]:K.FLOAT,[n.RGB9_E5]:K.FLOAT,[n.R8I]:K.INT,[n.R8UI]:K.UINT,[n.R16I]:K.INT,[n.R16UI]:K.UINT,[n.R32I]:K.INT,[n.R32UI]:K.UINT,[n.RG8I]:K.INT,[n.RG8UI]:K.UINT,[n.RG16I]:K.INT,[n.RG16UI]:K.UINT,[n.RG32I]:K.INT,[n.RG32UI]:K.UINT,[n.RGB8I]:K.INT,[n.RGB8UI]:K.UINT,[n.RGB16I]:K.INT,[n.RGB16UI]:K.UINT,[n.RGB32I]:K.INT,[n.RGB32UI]:K.UINT,[n.RGBA8I]:K.INT,[n.RGBA8UI]:K.UINT,[n.RGBA16I]:K.INT,[n.RGBA16UI]:K.UINT,[n.RGBA32I]:K.INT,[n.RGBA32UI]:K.UINT,[n.DEPTH_COMPONENT16]:K.FLOAT,[n.DEPTH_COMPONENT24]:K.FLOAT,[n.DEPTH_COMPONENT32F]:K.FLOAT,[n.DEPTH_STENCIL]:K.FLOAT,[n.DEPTH24_STENCIL8]:K.FLOAT,[n.DEPTH32F_STENCIL8]:K.FLOAT}:e={[n.RGB]:K.FLOAT,[n.RGBA]:K.FLOAT,[n.ALPHA]:K.FLOAT,[n.LUMINANCE]:K.FLOAT,[n.LUMINANCE_ALPHA]:K.FLOAT,[n.DEPTH_STENCIL]:K.FLOAT},e}function rB(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[te.UNSIGNED_BYTE]:{[q.RGBA]:n.RGBA8,[q.RGB]:n.RGB8,[q.RG]:n.RG8,[q.RED]:n.R8,[q.RGBA_INTEGER]:n.RGBA8UI,[q.RGB_INTEGER]:n.RGB8UI,[q.RG_INTEGER]:n.RG8UI,[q.RED_INTEGER]:n.R8UI,[q.ALPHA]:n.ALPHA,[q.LUMINANCE]:n.LUMINANCE,[q.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[te.BYTE]:{[q.RGBA]:n.RGBA8_SNORM,[q.RGB]:n.RGB8_SNORM,[q.RG]:n.RG8_SNORM,[q.RED]:n.R8_SNORM,[q.RGBA_INTEGER]:n.RGBA8I,[q.RGB_INTEGER]:n.RGB8I,[q.RG_INTEGER]:n.RG8I,[q.RED_INTEGER]:n.R8I},[te.UNSIGNED_SHORT]:{[q.RGBA_INTEGER]:n.RGBA16UI,[q.RGB_INTEGER]:n.RGB16UI,[q.RG_INTEGER]:n.RG16UI,[q.RED_INTEGER]:n.R16UI,[q.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[te.SHORT]:{[q.RGBA_INTEGER]:n.RGBA16I,[q.RGB_INTEGER]:n.RGB16I,[q.RG_INTEGER]:n.RG16I,[q.RED_INTEGER]:n.R16I},[te.UNSIGNED_INT]:{[q.RGBA_INTEGER]:n.RGBA32UI,[q.RGB_INTEGER]:n.RGB32UI,[q.RG_INTEGER]:n.RG32UI,[q.RED_INTEGER]:n.R32UI,[q.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[te.INT]:{[q.RGBA_INTEGER]:n.RGBA32I,[q.RGB_INTEGER]:n.RGB32I,[q.RG_INTEGER]:n.RG32I,[q.RED_INTEGER]:n.R32I},[te.FLOAT]:{[q.RGBA]:n.RGBA32F,[q.RGB]:n.RGB32F,[q.RG]:n.RG32F,[q.RED]:n.R32F,[q.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[te.HALF_FLOAT]:{[q.RGBA]:n.RGBA16F,[q.RGB]:n.RGB16F,[q.RG]:n.RG16F,[q.RED]:n.R16F},[te.UNSIGNED_SHORT_5_6_5]:{[q.RGB]:n.RGB565},[te.UNSIGNED_SHORT_4_4_4_4]:{[q.RGBA]:n.RGBA4},[te.UNSIGNED_SHORT_5_5_5_1]:{[q.RGBA]:n.RGB5_A1},[te.UNSIGNED_INT_2_10_10_10_REV]:{[q.RGBA]:n.RGB10_A2,[q.RGBA_INTEGER]:n.RGB10_A2UI},[te.UNSIGNED_INT_10F_11F_11F_REV]:{[q.RGB]:n.R11F_G11F_B10F},[te.UNSIGNED_INT_5_9_9_9_REV]:{[q.RGB]:n.RGB9_E5},[te.UNSIGNED_INT_24_8]:{[q.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[te.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[q.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:e={[te.UNSIGNED_BYTE]:{[q.RGBA]:n.RGBA,[q.RGB]:n.RGB,[q.ALPHA]:n.ALPHA,[q.LUMINANCE]:n.LUMINANCE,[q.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[te.UNSIGNED_SHORT_5_6_5]:{[q.RGB]:n.RGB},[te.UNSIGNED_SHORT_4_4_4_4]:{[q.RGBA]:n.RGBA},[te.UNSIGNED_SHORT_5_5_5_1]:{[q.RGBA]:n.RGBA}},e}var Hu=class{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ie,this.hasIntegerTextures=!1}contextChange(){let e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=rB(e),this.samplerTypes=nB(e);let t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};let r=new fl(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new fl(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,t=0){let{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;let i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){let{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){let{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){let o=t[s];o&&o._glTextures[i].samplerType!==K.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){let t=new fl(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??K.FLOAT,this.webGLVersion===2&&e.type===te.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){let t=e._glTextures[this.CONTEXT_UID];if(!t)return;let r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==K.FLOAT&&(this.hasIntegerTextures=!0);else{let i=e.realWidth,s=e.realHeight,o=r.gl;(t.width!==i||t.height!==s||t.dirtyId<0)&&(t.width=i,t.height=s,o.texImage2D(e.target,0,t.internalFormat,i,s,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){let{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){let i=this.managedTextures.indexOf(e);i!==-1&&ny(this.managedTextures,i,1)}}updateTextureStyle(e){let t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===wn.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Nr.CLAMP:t.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){let r=this.gl;if(t.mipmap&&e.mipmap!==wn.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===oi.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);let i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===oi.LINEAR){let s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===oi.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===oi.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}};Hu.extension={type:V.RendererSystem,name:"texture"};G.add(Hu);var $u=class{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){let{gl:t,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){let{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){let{gl:r,renderer:i}=this;t&&i.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){let{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){let{gl:t,renderer:r,CONTEXT_UID:i}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[i]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){let a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){let r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);let s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){let a=e.buffers[o];if(!a)continue;let l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}r&&(t||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}};$u.extension={type:V.RendererSystem,name:"transformFeedback"};G.add($u);var no=class{constructor(e){this.renderer=e}init(e){this.screen=new se(0,0,e.width,e.height),this.element=e.view||j.ADAPTER.createCanvas(),this.resolution=e.resolution||j.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);let r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}};no.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},no.extension={type:[V.RendererSystem,V.CanvasRendererSystem],name:"_view"};G.add(no);j.PREFER_ENV=Rr.WEBGL2;j.STRICT_TEXTURE_CACHE=!1;j.RENDER_OPTIONS=S(S(S(S({},eo.defaultOptions),Js.defaultOptions),no.defaultOptions),to.defaultOptions);Object.defineProperties(j,{WRAP_MODE:{get(){return ie.defaultOptions.wrapMode},set(n){we("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ie.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return ie.defaultOptions.scaleMode},set(n){we("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ie.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return ie.defaultOptions.mipmap},set(n){we("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ie.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return ie.defaultOptions.anisotropicLevel},set(n){we("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ie.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return we("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),xt.defaultResolution},set(n){xt.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return we("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),xt.defaultMultisample},set(n){xt.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return Ks.defaultMaxTextures},set(n){we("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ks.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return Ks.defaultBatchSize},set(n){we("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ks.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ks.canUploadSameBuffer},set(n){we("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ks.canUploadSameBuffer=n}},GC_MODE:{get(){return xs.defaultMode},set(n){we("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),xs.defaultMode=n}},GC_MAX_IDLE:{get(){return xs.defaultMaxIdle},set(n){we("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),xs.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return xs.defaultCheckCountMax},set(n){we("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),xs.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return Hn.defaultVertexPrecision},set(n){we("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Hn.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return Hn.defaultFragmentPrecision},set(n){we("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Hn.defaultFragmentPrecision=n}}});var Br=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Br||{});var Wu=class{constructor(e,t=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));let t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}};var iB=class Vr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Wu(null,null,1/0),this.deltaMS=1/Vr.targetFPMS,this.elapsedMS=1/Vr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Br.NORMAL){return this._addListener(new Wu(e,t,r))}addOnce(e,t,r=Br.NORMAL){return this._addListener(new Wu(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){let s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Vr.targetFPMS;let r=this._head,i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,Vr.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Vr._shared){let e=Vr._shared=new Vr;e.autoStart=!0,e._protected=!0}return Vr._shared}static get system(){if(!Vr._system){let e=Vr._system=new Vr;e.autoStart=!0,e._protected=!0}return Vr._system}};iB.targetFPMS=.06;var Jt=iB;Object.defineProperties(j,{TARGET_FPMS:{get(){return Jt.targetFPMS},set(n){we("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Jt.targetFPMS=n}}});var Of=class{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Br.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Jt.shared:new Jt,e.autoStart&&this.start()}static destroy(){if(this._ticker){let e=this._ticker;this.ticker=null,e.destroy()}}};Of.extension=V.Application;G.add(Of);var sB=[];G.handleByList(V.Renderer,sB);function bT(n){for(let e of sB)if(e.test(n))return new e(n);throw new Error("Unable to auto-detect a suitable renderer.")}var oB=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`;var aB=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;var wT=oB,Rf=aB;var Nf=class{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){let r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{let r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=at.HIGH?this.multisample=at.HIGH:t>=at.MEDIUM?this.multisample=at.MEDIUM:t>=at.LOW?this.multisample=at.LOW:this.multisample=at.NONE}destroy(){}};Nf.extension={type:V.RendererSystem,name:"_multisample"};G.add(Nf);var wy=class{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}};var Pf=class{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){let{gl:t,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){let{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){let{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){let s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,r){let{gl:i,CONTEXT_UID:s}=this;r=r||0;let o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,o.buffer,r*256,256)}update(e){let{gl:t,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{let s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];let r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(t||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){let t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){let{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new wy(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}};Pf.extension={type:V.RendererSystem,name:"buffer"};G.add(Pf);var Ff=class{constructor(e){this.renderer=e}render(e,t){let r=this.renderer,i,s,o,a;if(t&&(i=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){let l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(t.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}};Ff.extension={type:V.RendererSystem,name:"objectRenderer"};G.add(Ff);var Ty=class TT extends Gu{constructor(e){super(),this.type=tw.WEBGL,e=Object.assign({},j.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new lr({projectionMatrix:new ke},!0);let t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:TT.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(we("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=TT.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:K_()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return we("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return we("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return we("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return we("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){we("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return we("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){we("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return we("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Ty.extension={type:V.Renderer,priority:1},Ty.__plugins={},Ty.__systems={};var Sy=Ty;G.handleByMap(V.RendererPlugin,Sy.__plugins);G.handleByMap(V.RendererSystem,Sy.__systems);G.add(Sy);var sa=class extends Fr{constructor(e,t){let{width:r,height:i}=t||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){let o=new ie;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof Fr?this.addResourceAt(e[r],r):this.addResourceAt(Tu(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;let e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{let{realWidth:t,realHeight:r}=this.items[0];return this.resize(t,r),this.update(),Promise.resolve(this)}),this._load}};var kf=class extends sa{constructor(e,t){let{width:r,height:i}=t||{},s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Xs.TEXTURE_2D_ARRAY}upload(e,t,r){let{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,t.format,r.type,null);for(let l=0;l<i;l++){let c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,t.format,r.type,c.resource.source))}return!0}};var Lf=class extends Sn{constructor(e){super(e)}static test(e){let{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}};var lB=class Bf extends sa{constructor(e,t){let{width:r,height:i,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==Bf.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let a=0;a<Bf.SIDES;a++)this.items[a].target=Xs.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Xs.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Xs.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){let i=this.itemDirtyIds;for(let s=0;s<Bf.SIDES;s++){let o=this.items[s];(i[s]<o.dirtyId||r.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Bf.SIDES}};lB.SIDES=6;var ST=lB;var Vf=class n extends Sn{constructor(e,t){t=t||{};let r,i,s;typeof e=="string"?(r=n.EMPTY,i=e,s=!0):(r=e,i=null,s=!1),super(r),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise((e,t)=>L(this,null,function*(){if(this.url===null){e(this);return}try{let r=yield j.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;let i=yield r.blob();if(this.destroyed)return;let s=yield createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===At.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;t(r),this.onError.emit(r)}})),this._load)}upload(e,t,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return n._EMPTY=n._EMPTY??j.ADAPTER.createCanvas(0,0),n._EMPTY}};var ET=class Ey extends Sn{constructor(e,t){t=t||{},super(j.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Ey.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){let e=new Image;Sn.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;let t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*t,s=this._overrideHeight||this._overrideWidth/t*r),i=Math.round(i),s=Math.round(s);let o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${_s()}`,o.getContext("2d").drawImage(e,0,0,t,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){let t=Ey.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Ey.SVG_XML.test(e)}};ET.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,ET.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var zu=ET;var CT=class DT extends Sn{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){let r=document.createElement("video");t.autoLoad!==!1&&r.setAttribute("preload","auto"),t.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),t.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),t.loop===!0&&r.setAttribute("loop",""),t.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);let i=e[0].src||e[0];Sn.crossOrigin(r,i,t.crossorigin);for(let s=0;s<e.length;++s){let o=document.createElement("source"),{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){let c=a.split("?").shift().toLowerCase(),u=c.slice(c.lastIndexOf(".")+1);l=l||DT.MIME_TYPES[u]||`video/${u}`}o.src=a,l&&(o.type=l),r.appendChild(o)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){let t=Jt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;let e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){let e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);let t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();let e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Jt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||DT.TYPES.includes(t)}};CT.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],CT.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Uf=CT;mf.push(Vf,cl,Lf,Uf,zu,Li,ST,kf);var bs=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?se.EMPTY:(e=e||new se(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){let{a:r,b:i,c:s,d:o,tx:a,ty:l}=e,c=r*t.x+s*t.y+a,u=i*t.x+o*t.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let t=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=t,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,t,r,i,s){this.addFrameMatrix(e.worldTransform,t,r,i,s)}addFrameMatrix(e,t,r,i,s){let o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,h=e.ty,d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*t+l*r+u,_=a*t+c*r+h;d=g<d?g:d,f=_<f?_:f,p=g>p?g:p,m=_>m?_:m,g=o*i+l*r+u,_=a*i+c*r+h,d=g<d?g:d,f=_<f?_:f,p=g>p?g:p,m=_>m?_:m,g=o*t+l*s+u,_=a*t+c*s+h,d=g<d?g:d,f=_<f?_:f,p=g>p?g:p,m=_>m?_:m,g=o*i+l*s+u,_=a*i+c*s+h,d=g<d?g:d,f=_<f?_:f,p=g>p?g:p,m=_>m?_:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,t,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<r;l+=2){let c=e[l],u=e[l+1];i=c<i?c:i,s=u<s?u:s,o=c>o?c:o,a=u>a?u:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)}addVerticesMatrix(e,t,r,i,s=0,o=s){let a=e.a,l=e.b,c=e.c,u=e.d,h=e.tx,d=e.ty,f=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let _=r;_<i;_+=2){let v=t[_],y=t[_+1],x=a*v+c*y+h,T=u*y+l*v+d;f=Math.min(f,x-s),m=Math.max(m,x+s),p=Math.min(p,T-o),g=Math.max(g,T+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=g}addBounds(e){let t=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){let r=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=s&&i<=o){let a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){let r=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=s&&i<=o){let a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,i,s,o){e-=s,t-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}};var it=class n extends z.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new al,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new bs,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){let t=Object.keys(e);for(let r=0;r<t.length;++r){let i=t[r];Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new se),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new se),e=this._localBoundsRect),this._localBounds||(this._localBounds=new bs);let t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=r?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;let i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;let o=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,i){return t&&(e=t.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,i=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Cy),this.tempDisplayObjectParent}enableTempParent(){let e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*rT}set angle(e){this.transform.rotation=e*iT}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){let t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){let t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}},Cy=class extends it{constructor(){super(...arguments),this.sortDirty=null}};it.prototype.displayObjectUpdateTransform=it.prototype.updateTransform;var fZ=new ke;function pZ(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}var cB=class AT extends it{constructor(){super(),this.children=[],this.sortableChildren=AT.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{let t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;let r=this.getChildIndex(e),i=this.getChildIndex(t);this.children[r]=t,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){let t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);let r=this.getChildIndex(e);z.removeItems(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{let t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,z.removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){let t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,z.removeItems(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){let r=e,i=t,s=i-r,o;if(s>0&&s<=i){o=this.children.splice(r,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){let i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(pZ),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){let r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){let t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){let r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){let r=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){let o=this.children[i];o.visible&&o.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){let t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==AT.prototype._render&&(r=this.getBounds(!0));let s=e.projection.transform;if(s&&(i?(i=fZ.copyFrom(i),i.prepend(s)):i=s),r&&t.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){let l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){let t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let s=0;s<t.length;s++)t[s].enabled&&this._enabledFilters.push(t[s])}let i=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Vt.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,o=this.children.length;s<o;++s)this.children[s].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;let t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<r.length;++i)r[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){let t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){let t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};cB.defaultSortableChildren=!1;var Mt=cB;Mt.prototype.containerUpdateTransform=Mt.prototype.updateTransform;Object.defineProperties(j,{SORTABLE_CHILDREN:{get(){return Mt.defaultSortableChildren},set(n){z.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Mt.defaultSortableChildren=n}}});var jf=new ve,mZ=new Uint16Array([0,1,2,0,2,3]),hi=class n extends Mt{constructor(e){super(),this._anchor=new Lr(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ye(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=le.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||fe.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=mZ,this.pluginName="batch",this.isSprite=!0,this._roundPixels=j.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=z.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=z.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){let e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;let t=this.transform.worldTransform,r=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,c=this.vertexData,u=e.trim,h=e.orig,d=this._anchor,f=0,p=0,m=0,g=0;if(u?(p=u.x-d._x*h.width,f=p+u.width,g=u.y-d._y*h.height,m=g+u.height):(p=-d._x*h.width,f=p+h.width,g=-d._y*h.height,m=g+h.height),c[0]=r*p+s*g+a,c[1]=o*g+i*p+l,c[2]=r*f+s*g+a,c[3]=o*g+i*f+l,c[4]=r*f+s*m+a,c[5]=o*m+i*f+l,c[6]=r*p+s*m+a,c[7]=o*m+i*p+l,this._roundPixels){let _=j.RESOLUTION;for(let v=0;v<c.length;++v)c[v]=Math.round(c[v]*_)/_}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;let e=this._texture,t=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,h=s.ty,d=-i._x*r.width,f=d+r.width,p=-i._y*r.height,m=p+r.height;if(t[0]=o*d+l*p+u,t[1]=c*p+a*d+h,t[2]=o*f+l*p+u,t[3]=c*p+a*f+h,t[4]=o*f+l*m+u,t[5]=c*m+a*f+h,t[6]=o*d+l*m+u,t[7]=c*m+a*d+h,this._roundPixels){let g=j.RESOLUTION;for(let _=0;_<t.length;++_)t[_]=Math.round(t[_]*g)/g}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){let e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new bs),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new se),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,jf);let t=this._texture.orig.width,r=this._texture.orig.height,i=-t*this.anchor.x,s=0;return jf.x>=i&&jf.x<i+t&&(s=-r*this.anchor.y,jf.y>=s&&jf.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){let r=e instanceof fe?e:fe.from(e,t);return new n(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){let t=z.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){let t=z.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||fe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}};var uB=new ke;it.prototype._cacheAsBitmap=!1;it.prototype._cacheData=null;it.prototype._cacheAsBitmapResolution=null;it.prototype._cacheAsBitmapMultisample=null;var IT=class{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}};Object.defineProperties(it.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;this._cacheAsBitmap=n;let e;n?(this._cacheData||(this._cacheData=new IT),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});it.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))};it.prototype._initCachedDisplayObject=function(n){if(this._cacheData?.sprite)return;let e=this.alpha;this.alpha=1,n.batch.flush();let t=this.getLocalBounds(new se,!0);if(this.filters?.length){let d=this.filters[0].padding;t.pad(d)}let r=this.cacheAsBitmapResolution||n.resolution;t.ceil(r),t.width=Math.max(t.width,1/r),t.height=Math.max(t.height,1/r);let i=n.renderTexture.current,s=n.renderTexture.sourceFrame.clone(),o=n.renderTexture.destinationFrame.clone(),a=n.projection.transform,l=ui.create({width:t.width,height:t.height,resolution:r,multisample:this.cacheAsBitmapMultisample??n.multisample}),c=`cacheAsBitmap_${z.uid()}`;this._cacheData.textureCacheId=c,ie.addToCache(l.baseTexture,c),fe.addToCache(l,c);let u=this.transform.localTransform.copyTo(uB).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=a,n.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;let h=new hi(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};it.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))};it.prototype._initCachedDisplayObjectCanvas=function(n){if(this._cacheData?.sprite)return;let e=this.getLocalBounds(new se,!0),t=this.alpha;this.alpha=1;let r=n.canvasContext.activeContext,i=n._projTransform,s=this.cacheAsBitmapResolution||n.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);let o=ui.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${z.uid()}`;this._cacheData.textureCacheId=a,ie.addToCache(o.baseTexture,a),fe.addToCache(o,a);let l=uB;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),n.canvasContext.activeContext=r,n._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;let c=new hi(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};it.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};it.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};it.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ie.removeFromCache(this._cacheData.textureCacheId),fe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};it.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)};it.prototype.name=null;Mt.prototype.getChildByName=function(n,e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].name===n)return this.children[t];if(e)for(let t=0,r=this.children.length;t<r;t++){let i=this.children[t];if(!i.getChildByName)continue;let s=i.getChildByName(n,!0);if(s)return s}return null};it.prototype.getGlobalPosition=function(n=new ve,e=!1){return this.parent?this.parent.toGlobal(this.position,n,e):(n.x=this.position.x,n.y=this.position.y),n};var hB=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;var Gf=class extends xt{constructor(e=1){super(wT,hB,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}};var gZ={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},_Z=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function dB(n){let e=gZ[n],t=e.length,r=_Z,i="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o;for(let a=0;a<n;a++){let l=s.replace("%index%",a.toString());o=a,a>=t&&(o=n-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}var yZ=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function fB(n,e){let t=Math.ceil(n/2),r=yZ,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<n;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}var oa=class extends xt{constructor(e,t=8,r=4,i=xt.defaultResolution,s=5){let o=fB(s,e),a=dB(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=t}apply(e,t,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,r,i);else{let s=e.getFilterTexture(),o=e.renderer,a=t,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Pr.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,Pr.BLIT),this.uniforms.uSampler=l;let u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};var Hf=class extends xt{constructor(e=8,t=4,r=xt.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new oa(!0,e,t,r,i),this.blurYFilter=new oa(!1,e,t,r,i),this.resolution=r,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,r,i){let s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){let a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,Pr.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,r,i):this.blurXFilter.apply(e,t,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}};var pB=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;var pl=class extends xt{constructor(){let e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Rf,pB,e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){let t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){let r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){let[r,i,s]=ye.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){let r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){let t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;let r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=r+(1-r)*o,c=o*(1-r)-a*i,u=o*(1-r)+a*i,h=o*(1-r)+a*i,d=r+o*(1-r),f=o*(1-r)-a*i,p=o*(1-r)-a*i,m=o*(1-r)+a*i,g=r+o*(1-r),_=[l,c,u,0,0,h,d,f,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(_,t)}contrast(e,t){let r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){let r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){let t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){let t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){let t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){let t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){let t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){let t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){let t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){let t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,r,i,s){e=e||.2,t=t||.15,r=r||16770432,i=i||3375104;let o=ye.shared,[a,l,c]=o.setValue(r).toArray(),[u,h,d]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,c,e,0,u,h,d,t,0,a-u,l-h,c-d,0,0];this._loadMatrix(f,s)}night(e,t){e=e||.1;let r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){let r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){let t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){let e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}};pl.prototype.grayscale=pl.prototype.greyscale;var mB=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`;var gB=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;var $f=class extends xt{constructor(e,t){let r=new ke;e.renderable=!1,super(gB,mB,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,t==null&&(t=20),this.scale=new ve(t,t)}apply(e,t,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;let s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}};var _B=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;var yB=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;var Wf=class extends xt{constructor(){super(yB,_B)}};var vB=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;var zf=class extends xt{constructor(e=.5,t=Math.random()){super(Rf,vB,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}};var MT={AlphaFilter:Gf,BlurFilter:Hf,BlurFilterPass:oa,ColorMatrixFilter:pl,DisplacementFilter:$f,FXAAFilter:Wf,NoiseFilter:zf};Object.entries(MT).forEach(([n,e])=>{Object.defineProperty(MT,n,{get(){return z.deprecation("7.1.0",`filters.${n} has moved to ${n}`),e}})});var OT=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Jt.system.add(this.tickerUpdate,this,Br.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Jt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}},ws=new OT;var ro=class n{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=n.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ve,this.page=new ve,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}};var Ts=class extends ro{constructor(){super(...arguments),this.client=new ve,this.movement=new ve,this.offset=new ve,this.global=new ve,this.screen=new ve}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,i,s,o,a,l,c,u,h,d,f,p,m){throw new Error("Method not implemented.")}};var $n=class extends Ts{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}};var Ui=class extends Ts{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};Ui.DOM_DELTA_PIXEL=0,Ui.DOM_DELTA_LINE=1,Ui.DOM_DELTA_PAGE=2;var vZ=2048,xZ=new ve,RT=new ve,qf=class{constructor(e){this.dispatch=new z.EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;let t=this.mappingTable[e.type];if(t)for(let r=0,i=t.length;r<i;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){ws.pauseUpdate=!0;let r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[r](this.rootTarget,this.rootTarget.eventMode,xZ.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;let r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;let i=Array.isArray(t)?t:[t];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){let t=[e];for(let r=0;r<vZ&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(ws.pauseUpdate=!1),e.interactiveChildren&&e.children){let u=e.children;for(let h=u.length-1;h>=0;h--){let d=u[h],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,r,i,s,o||s(e,r));if(f){if(f.length>0&&!f[f.length-1].parent)continue;let p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}let l=this._isInteractive(t),c=e.isInteractive();return l&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,r)&&i(e,r)?c?[e]:[]:null}hitTestRecursive(e,t,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(ws.pauseUpdate=!1),e.interactiveChildren&&e.children){let l=e.children;for(let c=l.length-1;c>=0;c--){let u=l[c],h=this.hitTestRecursive(u,this._isInteractive(t)?t:u.eventMode,r,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;let d=e.isInteractive();return(h.length>0||d)&&h.push(e),h}}}let o=this._isInteractive(t),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,RT),!e.hitArea.contains(RT.x,RT.y)))return!0;if(e._mask){let r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){t=t??e.type;let r=`on${t}`;e.currentTarget[r]?.(e);let i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof $n)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){let i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}let r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof $n)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;let r=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==t.target){let l=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,l,s);if(this.dispatchEvent(c,"pointerout"),r&&this.dispatchEvent(c,"mouseout"),!t.composedPath().includes(s)){let u=this.createPointerEvent(e,"pointerleave",s);for(u.eventPhase=u.AT_TARGET;u.target&&!t.composedPath().includes(u.target);)u.currentTarget=u.target,this.notifyTarget(u),r&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(c)}if(s!==t.target){let l=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(t,l);this.dispatchEvent(c,"pointerover"),r&&this.dispatchEvent(c,"mouseover");let u=s?.parent;for(;u&&u!==this.rootTarget.parent&&u!==t.target;)u=u.parent;if(!u||u===this.rootTarget.parent){let h=this.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==s&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),r&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(c)}let o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=t.target?.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof $n)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=r.target?.cursor);let s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof $n)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId);if(t.overTargets){let r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");let o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof $n)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){let a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}let i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]),o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){let l=r.button===2;this.notifyTarget(r,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){let a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});let l=i.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){let c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof $n)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Ui)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}let t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){let i=this.allocateEvent($n);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){let t=this.allocateEvent(Ui);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){let r=this.allocateEvent($n);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof $n&&t instanceof $n&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Ts&&t instanceof Ts&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);let t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){let r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}};var bZ=1,wZ={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},NT=class PT{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new qf(null),ws.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new $n(null),this.rootWheelEvent=new Ui(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(S({},PT.defaultEventFeatures),{set:(t,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){let{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,PT._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;let r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=t.length;r<i;r++){let s=t[r],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,ws.pointerMoved();let t=this.normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){let s=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let r=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){let a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=r,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this.normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){let s=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,ws.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;ws.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;ws.removeTickerListener();let e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){let i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){let s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=bZ),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){let t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=wZ[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};NT.extension={name:"events",type:[V.RendererSystem,V.CanvasRendererSystem]},NT.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var Xf=NT;G.add(Xf);function xB(n){return n==="dynamic"||n==="static"}var bB={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??xB(Xf.defaultEventMode)},set interactive(n){z.deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=n,this.eventMode=n?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Xf.defaultEventMode},set eventMode(n){this._internalInteractive=xB(n),this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,e,t){let r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;n=r?`${n}capture`:n,e=typeof e=="function"?e:e.handleEvent,this.on(n,e,i)},removeEventListener(n,e,t){let r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;n=r?`${n}capture`:n,e=typeof e=="function"?e:e.handleEvent,this.off(n,e,i)},dispatchEvent(n){if(!(n instanceof ro))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};it.mixin(bB);var FT={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};it.mixin(FT);var TZ=9,Dy=100,SZ=0,EZ=0,wB=2,TB=1,CZ=-1e3,DZ=-1e3,AZ=2,Yf=class{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(z.isMobile.tablet||z.isMobile.phone)&&this.createTouchHook();let t=document.createElement("div");t.style.width=`${Dy}px`,t.style.height=`${Dy}px`,t.style.position="absolute",t.style.top=`${SZ}px`,t.style.left=`${EZ}px`,t.style.zIndex=wB.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){let e=document.createElement("button");e.style.width=`${TB}px`,e.style.height=`${TB}px`,e.style.position="absolute",e.style.top=`${CZ}px`,e.style.left=`${DZ}px`,e.style.zIndex=AZ.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);let t=e.children;if(t)for(let r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}update(){let e=performance.now();if(z.isMobile.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);let{x:t,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=i/o*l,u=s/a*l,h=this.div;h.style.left=`${t}px`,h.style.top=`${r}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){let f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,z.removeItems(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{h=f._accessibleDiv;let p=f.hitArea,m=f.worldTransform;f.hitArea?(h.style.left=`${(m.tx+p.x*m.a)*c}px`,h.style.top=`${(m.ty+p.y*m.d)*u}px`,h.style.width=`${p.width*m.a*c}px`,h.style.height=`${p.height*m.d*u}px`):(p=f.getBounds(),this.capHitArea(p),h.style.left=`${p.x*c}px`,h.style.top=`${p.y*u}px`,h.style.width=`${p.width*c}px`,h.style.height=`${p.height*u}px`,h.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(h.title=f.accessibleTitle),h.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&h.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==h.title||f.tabIndex!==h.tabIndex)&&(h.title=f.accessibleTitle,h.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${Dy}px`,t.style.height=`${Dy}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=wB.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){let{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new ro(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===TZ&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}};Yf.extension={name:"accessibility",type:[V.RendererPlugin,V.CanvasRendererPlugin]};G.add(Yf);var SB=class kT{constructor(e){this.stage=new Mt,e=Object.assign({forceCanvas:!1},e),this.renderer=bT(e),kT._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,t){let r=kT._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};SB._plugins=[];var Ay=SB;G.handleByList(V.Application,Ay._plugins);var Zf=class{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,r;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{let{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,r=s}this.renderer.resize(t,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};Zf.extension=V.Application;G.add(Zf);var EB={loader:V.LoadParser,resolver:V.ResolveParser,cache:V.CacheParser,detection:V.DetectionParser};G.handle(V.Asset,n=>{let e=n.ref;Object.entries(EB).filter(([t])=>!!e[t]).forEach(([t,r])=>G.add(Object.assign(e[t],{extension:e[t].extension??r})))},n=>{let e=n.ref;Object.keys(EB).filter(t=>!!e[t]).forEach(t=>G.remove(e[t]))});var Iy=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){return L(this,null,function*(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());yield this._loader.load(e),this._isLoading=!1,this._next()}})}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}};function br(n,e){if(Array.isArray(e)){for(let t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function mn(n,e){let t=n.split("?")[0],r=z.path.extname(t).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}var En=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(r=>typeof r=="string"||t?e(r):r):n);var ml=(n,e)=>{let t=e.split("?")[1];return t&&(n+=`?${t}`),n};function CB(n,e,t,r,i){let s=e[t];for(let o=0;o<s.length;o++){let a=s[o];t<e.length-1?CB(n.replace(r[t],a),e,t+1,r,i):i.push(n.replace(r[t],a))}}function My(n){let e=/\{(.*?)\}/g,t=n.match(e),r=[];if(t){let i=[];t.forEach(s=>{let o=s.substring(1,s.length-1).split(",");i.push(o)}),CB(n,i,0,t,r)}else r.push(n);return r}var io=n=>!Array.isArray(n);var LT=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){let t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){let r=En(e),i;for(let a=0;a<this.parsers.length;a++){let l=this.parsers[a];if(l.test(t)){i=l.getCacheableAssets(r,t);break}}i||(i={},r.forEach(a=>{i[a]=t}));let s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),t instanceof fe){let a=t;r.forEach(l=>{a.baseTexture!==fe.EMPTY.baseTexture&&ie.addToCache(a.baseTexture,l),fe.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}let t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}},ji=new LT;var Oy=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let r={promise:null,parser:null};return r.promise=(()=>L(this,null,function*(){let i=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let o=0;o<this.parsers.length;o++){let a=this.parsers[o];if(a.load&&a.test?.(e,t,this)){s=a;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=yield s.load(e,t,this),r.parser=s;for(let o=0;o<this.parsers.length;o++){let a=this.parsers[o];a.parse&&a.parse&&(yield a.testParse?.(i,t,this))&&(i=(yield a.parse(i,t,this))||i,r.parser=a)}return i}))(),r}load(e,t){return L(this,null,function*(){this._parsersValidated||this._validateParsers();let r=0,i={},s=io(e),o=En(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(c=>L(this,null,function*(){let u=z.path.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),i[c.src]=yield this.promiseCache[u].promise,t&&t(++r/a)}catch(h){throw delete this.promiseCache[u],delete i[c.src],new Error(`[Loader.load] Failed to load ${u}.
${h}`)}}));return yield Promise.all(l),s?i[o[0].src]:i})}unload(e){return L(this,null,function*(){let t=En(e,r=>({alias:[r],src:r})).map(r=>L(this,null,function*(){let i=z.path.toAbsolute(r.src),s=this.promiseCache[i];if(s){let o=yield s.promise;delete this.promiseCache[i],s.parser?.unload?.(o,r,this)}}));yield Promise.all(t)})}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),W(S({},e),{[t.name]:t})),{})}};var Ot=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Ot||{});var IZ=".json",MZ="application/json",BT={extension:{type:V.LoadParser,priority:Ot.Low},name:"loadJson",test(n){return br(n,MZ)||mn(n,IZ)},load(n){return L(this,null,function*(){return yield(yield j.ADAPTER.fetch(n)).json()})}};G.add(BT);var OZ=".txt",RZ="text/plain",VT={name:"loadTxt",extension:{type:V.LoadParser,priority:Ot.Low},test(n){return br(n,RZ)||mn(n,OZ)},load(n){return L(this,null,function*(){return yield(yield j.ADAPTER.fetch(n)).text()})}};G.add(VT);var NZ=["normal","bold","100","200","300","400","500","600","700","800","900"],PZ=[".ttf",".otf",".woff",".woff2"],FZ=["font/ttf","font/otf","font/woff","font/woff2"],kZ=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function UT(n){let e=z.path.extname(n),t=z.path.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)),r=t.length>0;for(let s of t)if(!s.match(kZ)){r=!1;break}let i=t.join(" ");return r||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}var LZ=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function BZ(n){return LZ.test(n)?n:encodeURI(n)}var jT={extension:{type:V.LoadParser,priority:Ot.Low},name:"loadWebFont",test(n){return br(n,FZ)||mn(n,PZ)},load(n,e){return L(this,null,function*(){let t=j.ADAPTER.getFontFaceSet();if(t){let r=[],i=e.data?.family??UT(n),s=e.data?.weights?.filter(a=>NZ.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){let l=s[a],c=new FontFace(i,`url(${BZ(n)})`,W(S({},o),{weight:l}));yield c.load(),t.add(c),r.push(c)}return r.length===1?r[0]:r}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})},unload(n){(Array.isArray(n)?n:[n]).forEach(e=>j.ADAPTER.getFontFaceSet().delete(e))}};G.add(jT);var DB=0,GT,VZ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",UZ={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${VZ}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},jZ={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`},HT,$T=class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{let t=URL.createObjectURL(new Blob([UZ.code],{type:"application/javascript"})),r=new Worker(t);r.addEventListener("message",i=>{r.terminate(),URL.revokeObjectURL(t),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}_initWorkers(){return L(this,null,function*(){this._initialized||(this._initialized=!0)})}getWorker(){GT===void 0&&(GT=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<GT&&(HT||(HT=URL.createObjectURL(new Blob([jZ.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(HT),e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}_run(e,t){return L(this,null,function*(){yield this._initWorkers();let r=new Promise((i,s)=>{this.queue.push({id:e,arguments:t,resolve:i,reject:s})});return this.next(),r})}next(){if(!this.queue.length)return;let e=this.getWorker();if(!e)return;let t=this.queue.pop(),r=t.id;this.resolveHash[DB]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:DB++,id:r})}},WT=new $T;function di(n,e,t){n.resource.internal=!0;let r=new fe(n),i=()=>{delete e.promiseCache[t],ji.has(t)&&ji.remove(t)};return r.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),r.once("destroyed",()=>{n.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}var GZ=[".jpeg",".jpg",".png",".webp",".avif"],HZ=["image/jpeg","image/png","image/webp","image/avif"];function zT(n){return L(this,null,function*(){let e=yield j.ADAPTER.fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);let t=yield e.blob();return yield createImageBitmap(t)})}var so={name:"loadTextures",extension:{type:V.LoadParser,priority:Ot.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return br(n,HZ)||mn(n,GZ)},load(n,e,t){return L(this,null,function*(){let r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap,i;r?this.config.preferWorkers&&(yield WT.isImageBitmapSupported())?i=yield WT.loadImageBitmap(n):i=yield zT(n):i=yield new Promise((a,l)=>{let c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=n,c.complete?a(c):(c.onload=()=>a(c),c.onerror=u=>l(u))});let s=S({},e.data);s.resolution??(s.resolution=z.getResolutionOfUrl(n)),r&&s.resourceOptions?.ownsImageBitmap===void 0&&(s.resourceOptions=S({},s.resourceOptions),s.resourceOptions.ownsImageBitmap=!0);let o=new ie(i,s);return o.resource.src=n,di(o,t,n)})},unload(n){n.destroy(!0)}};G.add(so);var $Z=".svg",WZ="image/svg+xml",qT={extension:{type:V.LoadParser,priority:Ot.High},name:"loadSVG",test(n){return br(n,WZ)||mn(n,$Z)},testParse(n){return L(this,null,function*(){return zu.test(n)})},parse(n,e,t){return L(this,null,function*(){let r=new zu(n,e?.data?.resourceOptions);yield r.load();let i=new ie(r,S({resolution:z.getResolutionOfUrl(n)},e?.data));return i.resource.src=e.src,di(i,t,e.src)})},load(n,e){return L(this,null,function*(){return(yield j.ADAPTER.fetch(n)).text()})},unload:so.unload};G.add(qT);var zZ=[".mp4",".m4v",".webm",".ogv"],qZ=["video/mp4","video/webm","video/ogg"],XT={name:"loadVideo",extension:{type:V.LoadParser,priority:Ot.High},config:{defaultAutoPlay:!0},test(n){return br(n,qZ)||mn(n,zZ)},load(n,e,t){return L(this,null,function*(){let r,i=yield(yield j.ADAPTER.fetch(n)).blob(),s=URL.createObjectURL(i);try{let o=S({autoPlay:this.config.defaultAutoPlay},e?.data?.resourceOptions),a=new Uf(s,o);yield a.load();let l=new ie(a,S({alphaMode:yield z.detectVideoAlphaMode(),resolution:z.getResolutionOfUrl(n)},e?.data));l.resource.src=n,r=di(l,t,n),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(o){throw URL.revokeObjectURL(s),o}return r})},unload(n){n.destroy(!0)}};G.add(XT);var Ry=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{let t=e;this._defaultSearchParams=Object.keys(t).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`).join("&")}}getAlias(e){let{alias:t,name:r,src:i,srcs:s}=e;return En(t||r||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>a?.src??a?.srcs??a):o?.src||o?.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){let r=[];Array.isArray(t)?t.forEach(i=>{let s=i.src??i.srcs,o=i.alias??i.name,a;if(typeof o=="string"){let l=this._createBundleAssetId(e,o);r.push(l),a=[o,l]}else{let l=o.map(c=>this._createBundleAssetId(e,c));r.push(...l),a=[...o,...l]}this.add(W(S({},i),{alias:a,src:s}))}):Object.keys(t).forEach(i=>{let s=[i,this._createBundleAssetId(e,i)];if(typeof t[i]=="string")this.add({alias:s,src:t[i]});else if(Array.isArray(t[i]))this.add({alias:s,src:t[i]});else{let o=t[i],a=o.src??o.srcs;this.add(W(S({},o),{alias:s,src:Array.isArray(a)?a:[a]}))}r.push(...s)}),this._bundles[e]=r}add(e,t,r,i,s){let o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(z.deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:r,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},En(o).forEach(l=>{let{src:c,srcs:u}=l,{data:h,format:d,loadParser:f}=l,p=En(c||u).map(_=>typeof _=="string"?My(_):Array.isArray(_)?_:[_]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);let g=[];p.forEach(_=>{_.forEach(v=>{let y={};if(typeof v!="object"){y.src=v;for(let x=0;x<this._parsers.length;x++){let T=this._parsers[x];if(T.test(v)){y=T.parse(v);break}}}else h=v.data??h,d=v.format??d,f=v.loadParser??f,y=S(S({},y),v);if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${y.src}`);y=this.buildResolvedAsset(y,{aliases:m,data:h,format:d,loadParser:f}),g.push(y)})}),m.forEach(_=>{this._assetMap[_]=g})})}resolveBundle(e){let t=io(e);e=En(e);let r={};return e.forEach(i=>{let s=this._bundles[i];if(s){let o=this.resolve(s),a={};for(let l in o){let c=o[l];a[this._extractAssetIdFromBundle(i,l)]=c}r[i]=a}}),t?r[e[0]]:r}resolveUrl(e){let t=this.resolve(e);if(typeof e!="string"){let r={};for(let i in t)r[i]=t[i].src;return r}return t.src}resolve(e){let t=io(e);e=En(e);let r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i],o=s[0],a=this._getPreferredOrder(s);a?.priority.forEach(l=>{a.params[l].forEach(c=>{let u=s.filter(h=>h[l]?h[l]===c:!1);u.length&&(s=u)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});r[i]=this._resolverHash[i]}),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){let{aliases:r,data:i,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=z.path.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=S(S({},i||{}),e.data),e.loadParser=s??e.loadParser,e.format=o??z.path.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}};var Ny=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ry,this.loader=new Oy,this.cache=ji,this._backgroundLoader=new Iy(this.loader),this._backgroundLoader.active=!0,this.reset()}init(){return L(this,arguments,function*(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=yield this.load(s)),this.resolver.addManifest(s)}let t=e.texturePreference?.resolution??1,r=typeof t=="number"?[t]:t,i=yield this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)})}add(e,t,r,i,s){this.resolver.add(e,t,r,i,s)}load(e,t){return L(this,null,function*(){this._initialized||(yield this.init());let r=io(e),i=En(e).map(a=>{if(typeof a!="string"){let l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=yield this._mapLoadToResolve(s,t);return r?o[i[0]]:o})}addBundle(e,t){this.resolver.addBundle(e,t)}loadBundle(e,t){return L(this,null,function*(){this._initialized||(yield this.init());let r=!1;typeof e=="string"&&(r=!0,e=[e]);let i=this.resolver.resolveBundle(e),s={},o=Object.keys(i),a=0,l=0,c=()=>{t?.(++a/l)},u=o.map(h=>{let d=i[h];return l+=Object.keys(d).length,this._mapLoadToResolve(d,c).then(f=>{s[h]=f})});return yield Promise.all(u),r?s[e[0]]:s})}backgroundLoad(e){return L(this,null,function*(){this._initialized||(yield this.init()),typeof e=="string"&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))})}backgroundLoadBundle(e){return L(this,null,function*(){this._initialized||(yield this.init()),typeof e=="string"&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(r=>{this._backgroundLoader.add(Object.values(r))})})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ji.get(e);let t={};for(let r=0;r<e.length;r++)t[r]=ji.get(e[r]);return t}_mapLoadToResolve(e,t){return L(this,null,function*(){let r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;let s=yield this.loader.load(r,t);this._backgroundLoader.active=!0;let o={};return r.forEach((a,l)=>{let c=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[i[l]]=c,ji.set(u,c)}),o})}unload(e){return L(this,null,function*(){this._initialized||(yield this.init());let t=En(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(t);yield this._unloadFromResolved(r)})}unloadBundle(e){return L(this,null,function*(){this._initialized||(yield this.init()),e=En(e);let t=this.resolver.resolveBundle(e),r=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));yield Promise.all(r)})}_unloadFromResolved(e){return L(this,null,function*(){let t=Object.values(e);t.forEach(r=>{ji.remove(r.src)}),yield this.loader.unload(t)})}_detectFormats(e){return L(this,null,function*(){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let r of e.detections)e.skipDetections||(yield r.test())?t=yield r.add(t):e.skipDetections||(t=yield r.remove(t));return t=t.filter((r,i)=>t.indexOf(r)===i),t})}get detections(){return this._detections}get preferWorkers(){return so.config.preferWorkers}set preferWorkers(e){z.deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(r=>r in e).forEach(r=>{t.config[r]=e[r]})})}},Qf=new Ny;G.handleByList(V.LoadParser,Qf.loader.parsers).handleByList(V.ResolveParser,Qf.resolver.parsers).handleByList(V.CacheParser,Qf.cache.parsers).handleByList(V.DetectionParser,Qf.detections);var YT={extension:V.CacheParser,test:n=>Array.isArray(n)&&n.every(e=>e instanceof fe),getCacheableAssets:(n,e)=>{let t={};return n.forEach(r=>{e.forEach((i,s)=>{t[r+(s===0?"":s+1)]=i})}),t}};G.add(YT);function Py(n){return L(this,null,function*(){if("Image"in globalThis)return new Promise(e=>{let t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=yield(yield fetch(n)).blob();yield createImageBitmap(e)}catch{return!1}return!0}return!1})}var ZT={extension:{type:V.DetectionParser,priority:1},test:()=>L(void 0,null,function*(){return Py("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")}),add:n=>L(void 0,null,function*(){return[...n,"avif"]}),remove:n=>L(void 0,null,function*(){return n.filter(e=>e!=="avif")})};G.add(ZT);var QT={extension:{type:V.DetectionParser,priority:0},test:()=>L(void 0,null,function*(){return Py("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")}),add:n=>L(void 0,null,function*(){return[...n,"webp"]}),remove:n=>L(void 0,null,function*(){return n.filter(e=>e!=="webp")})};G.add(QT);var AB=["png","jpg","jpeg"],KT={extension:{type:V.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:n=>L(void 0,null,function*(){return[...n,...AB]}),remove:n=>L(void 0,null,function*(){return n.filter(e=>!AB.includes(e))})};G.add(KT);var XZ="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function qu(n){return XZ?!1:document.createElement("video").canPlayType(n)!==""}var JT={extension:{type:V.DetectionParser,priority:0},test:()=>L(void 0,null,function*(){return qu("video/webm")}),add:n=>L(void 0,null,function*(){return[...n,"webm"]}),remove:n=>L(void 0,null,function*(){return n.filter(e=>e!=="webm")})};G.add(JT);var eS={extension:{type:V.DetectionParser,priority:0},test:()=>L(void 0,null,function*(){return qu("video/mp4")}),add:n=>L(void 0,null,function*(){return[...n,"mp4","m4v"]}),remove:n=>L(void 0,null,function*(){return n.filter(e=>e!=="mp4"&&e!=="m4v")})};G.add(eS);var tS={extension:{type:V.DetectionParser,priority:0},test:()=>L(void 0,null,function*(){return qu("video/ogg")}),add:n=>L(void 0,null,function*(){return[...n,"ogv"]}),remove:n=>L(void 0,null,function*(){return n.filter(e=>e!=="ogv")})};G.add(tS);var nS={extension:V.ResolveParser,test:so.test,parse:n=>({resolution:parseFloat(j.RETINA_PREFIX.exec(n)?.[1]??"1"),format:z.path.extname(n).slice(1),src:n})};G.add(nS);var cr=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n))(cr||{}),aa={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};var oo,Xu;function IB(){Xu={s3tc:oo.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:oo.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:oo.getExtension("WEBGL_compressed_texture_etc"),etc1:oo.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:oo.getExtension("WEBGL_compressed_texture_pvrtc")||oo.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:oo.getExtension("WEBGL_compressed_texture_atc"),astc:oo.getExtension("WEBGL_compressed_texture_astc")}}var rS={extension:{type:V.DetectionParser,priority:2},test:()=>L(void 0,null,function*(){let n=j.ADAPTER.createCanvas().getContext("webgl");return n?(oo=n,!0):(console.warn("WebGL not available for compressed textures."),!1)}),add:n=>L(void 0,null,function*(){Xu||IB();let e=[];for(let t in Xu)Xu[t]&&e.push(t);return[...e,...n]}),remove:n=>L(void 0,null,function*(){return Xu||IB(),n.filter(e=>!(e in Xu))})};G.add(rS);var Yu=class extends Li{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,t),this.origin=r,this.buffer=i?new Jo(i):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Jo(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}};var ao=class n extends Yu{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=n._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||n._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){let i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){let{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:u}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=n._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,t,r,i,s,o,a){let l=new Array(r),c=e.byteOffset,u=o,h=a,d=u+i-1&~(i-1),f=h+s-1&~(s-1),p=d*f*aa[t];for(let m=0;m<r;m++)l[m]={levelID:m,levelWidth:r>1?u:d,levelHeight:r>1?h:f,levelBuffer:new Uint8Array(e.buffer,c,p)},c+=p,u=u>>1||1,h=h>>1||1,d=u+i-1&~(i-1),f=h+s-1&~(s-1),p=d*f*aa[t];return l}};var iS=4,Fy=124,YZ=32,MB=20,ZZ=542327876,ky={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},QZ={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Ly={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},KZ=1,JZ=2,eQ=4,tQ=64,nQ=512,rQ=131072,iQ=827611204,sQ=861165636,oQ=894720068,aQ=808540228,lQ=4,cQ={[iQ]:cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[sQ]:cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[oQ]:cr.COMPRESSED_RGBA_S3TC_DXT5_EXT},uQ={70:cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:cr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:cr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function By(n){let e=new Uint32Array(n);if(e[0]!==ZZ)throw new Error("Invalid DDS file magic word");let t=new Uint32Array(n,0,Fy/Uint32Array.BYTES_PER_ELEMENT),r=t[ky.HEIGHT],i=t[ky.WIDTH],s=t[ky.MIPMAP_COUNT],o=new Uint32Array(n,ky.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,YZ/Uint32Array.BYTES_PER_ELEMENT),a=o[KZ];if(a&eQ){let l=o[QZ.FOURCC];if(l!==aQ){let v=cQ[l],y=iS+Fy,x=new Uint8Array(n,y);return[new ao(x,{format:v,width:i,height:r,levels:s})]}let c=iS+Fy,u=new Uint32Array(e.buffer,c,MB/Uint32Array.BYTES_PER_ELEMENT),h=u[Ly.DXGI_FORMAT],d=u[Ly.RESOURCE_DIMENSION],f=u[Ly.MISC_FLAG],p=u[Ly.ARRAY_SIZE],m=uQ[h];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(f===lQ)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");let g=new Array,_=iS+Fy+MB;if(p===1)g.push(new Uint8Array(n,_));else{let v=aa[m],y=0,x=i,T=r;for(let b=0;b<s;b++){let w=Math.max(1,x+3&-4),P=Math.max(1,T+3&-4),U=w*P*v;y+=U,x=x>>>1,T=T>>>1}let C=_;for(let b=0;b<p;b++)g.push(new Uint8Array(n,C,y)),C+=y}return g.map(v=>new ao(v,{format:m,width:i,height:r,levels:s}))}throw a&tQ?new Error("DDSParser does not support uncompressed texture data."):a&nQ?new Error("DDSParser does not supported YUV uncompressed texture data."):a&rQ?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&JZ?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var OB=[171,75,84,88,32,49,49,187,13,10,26,10],hQ=67305985,Gi={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},sS=64,Vy={[te.UNSIGNED_BYTE]:1,[te.UNSIGNED_SHORT]:2,[te.INT]:4,[te.UNSIGNED_INT]:4,[te.FLOAT]:4,[te.HALF_FLOAT]:8},oS={[q.RGBA]:4,[q.RGB]:3,[q.RG]:2,[q.RED]:1,[q.LUMINANCE]:1,[q.LUMINANCE_ALPHA]:2,[q.ALPHA]:1},aS={[te.UNSIGNED_SHORT_4_4_4_4]:2,[te.UNSIGNED_SHORT_5_5_5_1]:2,[te.UNSIGNED_SHORT_5_6_5]:2};function Uy(n,e,t=!1){let r=new DataView(e);if(!dQ(n,r))return null;let i=r.getUint32(Gi.ENDIANNESS,!0)===hQ,s=r.getUint32(Gi.GL_TYPE,i),o=r.getUint32(Gi.GL_FORMAT,i),a=r.getUint32(Gi.GL_INTERNAL_FORMAT,i),l=r.getUint32(Gi.PIXEL_WIDTH,i),c=r.getUint32(Gi.PIXEL_HEIGHT,i)||1,u=r.getUint32(Gi.PIXEL_DEPTH,i)||1,h=r.getUint32(Gi.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=r.getUint32(Gi.NUMBER_OF_FACES,i),f=r.getUint32(Gi.NUMBER_OF_MIPMAP_LEVELS,i),p=r.getUint32(Gi.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");let m=4,g=4,_=l+3&-4,v=c+3&-4,y=new Array(h),x=l*c;s===0&&(x=_*v);let T;if(s!==0?Vy[s]?T=Vy[s]*oS[o]:T=aS[s]:T=aa[a],T===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");let C=t?pQ(r,p,i):null,b=x*T,w=l,P=c,U=_,R=v,I=sS+p;for(let M=0;M<f;M++){let E=r.getUint32(I,i),O=I+4;for(let k=0;k<h;k++){let A=y[k];A||(A=y[k]=new Array(f)),A[M]={levelID:M,levelWidth:f>1||s!==0?w:U,levelHeight:f>1||s!==0?P:R,levelBuffer:new Uint8Array(e,O,b)},O+=b}I+=E+4,I=I%4!==0?I+4-I%4:I,w=w>>1||1,P=P>>1||1,U=w+m-1&~(m-1),R=P+g-1&~(g-1),b=U*R*T}return s!==0?{uncompressed:y.map(M=>{let E=M[0].levelBuffer,O=!1;return s===te.FLOAT?E=new Float32Array(M[0].levelBuffer.buffer,M[0].levelBuffer.byteOffset,M[0].levelBuffer.byteLength/4):s===te.UNSIGNED_INT?(O=!0,E=new Uint32Array(M[0].levelBuffer.buffer,M[0].levelBuffer.byteOffset,M[0].levelBuffer.byteLength/4)):s===te.INT&&(O=!0,E=new Int32Array(M[0].levelBuffer.buffer,M[0].levelBuffer.byteOffset,M[0].levelBuffer.byteLength/4)),{resource:new Li(E,{width:M[0].levelWidth,height:M[0].levelHeight}),type:s,format:O?fQ(o):o}}),kvData:C}:{compressed:y.map(M=>new ao(null,{format:a,width:l,height:c,levels:f,levelBuffers:M})),kvData:C}}function dQ(n,e){for(let t=0;t<OB.length;t++)if(e.getUint8(t)!==OB[t])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}function fQ(n){switch(n){case q.RGBA:return q.RGBA_INTEGER;case q.RGB:return q.RGB_INTEGER;case q.RG:return q.RG_INTEGER;case q.RED:return q.RED_INTEGER;default:return n}}function pQ(n,e,t){let r=new Map,i=0;for(;i<e;){let s=n.getUint32(sS+i,t),o=sS+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&n.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}let c=new TextDecoder().decode(new Uint8Array(n.buffer,o,l)),u=new DataView(n.buffer,o+l+1,s-l-1);r.set(c,u),i+=4+s+a}return r}var lS={extension:{type:V.LoadParser,priority:Ot.High},name:"loadDDS",test(n){return mn(n,".dds")},load(n,e,t){return L(this,null,function*(){let r=yield(yield j.ADAPTER.fetch(n)).arrayBuffer(),i=By(r).map(s=>{let o=new ie(s,S({mipmap:wn.OFF,alphaMode:At.NO_PREMULTIPLIED_ALPHA,resolution:z.getResolutionOfUrl(n)},e.data));return di(o,t,n)});return i.length===1?i[0]:i})},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};G.add(lS);var cS={extension:{type:V.LoadParser,priority:Ot.High},name:"loadKTX",test(n){return mn(n,".ktx")},load(n,e,t){return L(this,null,function*(){let r=yield(yield j.ADAPTER.fetch(n)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=Uy(n,r),a=i??s,l=S({mipmap:wn.OFF,alphaMode:At.NO_PREMULTIPLIED_ALPHA,resolution:z.getResolutionOfUrl(n)},e.data),c=a.map(u=>{a===s&&Object.assign(l,{type:u.type,format:u.format});let h=u.resource??u,d=new ie(h,l);return d.ktxKeyValueData=o,di(d,t,n)});return c.length===1?c[0]:c})},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};G.add(cS);var uS={extension:V.ResolveParser,test:n=>{let e=z.path.extname(n).slice(1);return["basis","ktx","dds"].includes(e)},parse:n=>{let e=z.path.extname(n).slice(1);if(e==="ktx"){let t=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(t.some(r=>n.endsWith(r)))return{resolution:parseFloat(j.RETINA_PREFIX.exec(n)?.[1]??"1"),format:t.find(r=>n.endsWith(r)),src:n}}return{resolution:parseFloat(j.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e,src:n}}};G.add(uS);var jy=new se,mQ=4,RB=class Kf{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){let e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}image(e,t,r,i){return L(this,null,function*(){let s=new Image;return s.src=yield this.base64(e,t,r,i),s})}base64(e,t,r,i){return L(this,null,function*(){let s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}let c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},t,r)});if(s.toDataURL!==void 0)return s.toDataURL(t,r);if(s.convertToBlob!==void 0){let o=yield s.convertToBlob({type:t,quality:r});return new Promise((a,l)=>{let c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")})}canvas(e,t){let{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&Kf._flipY(r,i,s),a&&Kf._unpremultiplyAlpha(r);let l=new z.CanvasRenderTarget(i,s,1),c=new ImageData(new Uint8ClampedArray(r.buffer),i,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,t){let{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&Kf._flipY(r,i,s),a&&Kf._unpremultiplyAlpha(r),r}_rawPixels(e,t){let r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof ui?a=e:(a=r.generateTexture(e,{region:t,resolution:r.resolution,multisample:r.multisample}),l=!0,t&&(jy.width=t.width,jy.height=t.height,t=jy)));let c=r.gl;if(a){if(i=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===q.RGBA,!l){r.renderTexture.bind(a);let f=a.framebuffer.glFramebuffers[r.CONTEXT_UID];f.blitFramebuffer&&r.framebuffer.bind(f.blitFramebuffer)}}else i=r.resolution,t||(t=jy,t.width=r.width/i,t.height=r.height/i),s=!0,o=this._rendererPremultipliedAlpha,r.renderTexture.bind();let u=Math.max(Math.round(t.width*i),1),h=Math.max(Math.round(t.height*i),1),d=new Uint8Array(mQ*u*h);return c.readPixels(Math.round(t.x*i),Math.round(t.y*i),u,h,c.RGBA,c.UNSIGNED_BYTE,d),l&&a?.destroy(!0),{pixels:d,width:u,height:h,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,r){let i=t<<2,s=r>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){let l=a*i,c=(r-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));let t=e.length;for(let r=0;r<t;r+=4){let i=e[r+3];if(i!==0){let s=255.001/i;e[r]=e[r]*s+.5,e[r+1]=e[r+1]*s+.5,e[r+2]=e[r+2]*s+.5}}}};RB.extension={name:"extract",type:V.RendererSystem};var NB=RB;G.add(NB);var gl={build(n){let e=n.points,t,r,i,s,o,a;if(n.type===_t.CIRC){let p=n.shape;t=p.x,r=p.y,o=a=p.radius,i=s=0}else if(n.type===_t.ELIP){let p=n.shape;t=p.x,r=p.y,o=p.width,a=p.height,i=s=0}else{let p=n.shape,m=p.width/2,g=p.height/2;t=p.x+m,r=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),i=m-o,s=g-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}let l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=r+s,e[2]=e[4]=t-i,e[5]=e[7]=r-s;return}let u=0,h=l*4+(i?2:0)+2,d=h,f=c;{let p=i+o,m=s,g=t+p,_=t-p,v=r+m;if(e[u++]=g,e[u++]=v,e[--h]=v,e[--h]=_,s){let y=r-m;e[d++]=_,e[d++]=y,e[--f]=y,e[--f]=g}}for(let p=1;p<l;p++){let m=Math.PI/2*(p/l),g=i+Math.cos(m)*o,_=s+Math.sin(m)*a,v=t+g,y=t-g,x=r+_,T=r-_;e[u++]=v,e[u++]=x,e[--h]=x,e[--h]=y,e[d++]=y,e[d++]=T,e[--f]=T,e[--f]=v}{let p=i,m=s+a,g=t+p,_=t-p,v=r+m,y=r-m;e[u++]=g,e[u++]=v,e[--f]=y,e[--f]=g,i&&(e[u++]=_,e[u++]=v,e[--f]=y,e[--f]=_)}},triangulate(n,e){let t=n.points,r=e.points,i=e.indices;if(t.length===0)return;let s=r.length/2,o=s,a,l;if(n.type!==_t.RREC){let u=n.shape;a=u.x,l=u.y}else{let u=n.shape;a=u.x+u.width/2,l=u.y+u.height/2}let c=n.matrix;r.push(n.matrix?c.a*a+c.c*l+c.tx:a,n.matrix?c.b*a+c.d*l+c.ty:l),s++,r.push(t[0],t[1]);for(let u=2;u<t.length;u+=2)r.push(t[u],t[u+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function PB(n,e=!1){let t=n.length;if(t<6)return;let r=0;for(let i=0,s=n[t-2],o=n[t-1];i<t;i+=2){let a=n[i],l=n[i+1];r+=(a-s)*(l+o),s=a,o=l}if(!e&&r>0||e&&r<=0){let i=t/2;for(let s=i+i%2;s<t;s+=2){let o=t-s-2,a=t-s-1,l=s,c=s+1;[n[o],n[l]]=[n[l],n[o]],[n[a],n[c]]=[n[c],n[a]]}}}var Jf={build(n){n.points=n.shape.points.slice()},triangulate(n,e){let t=n.points,r=n.holes,i=e.points,s=e.indices;if(t.length>=6){PB(t,!1);let o=[];for(let c=0;c<r.length;c++){let u=r[c];PB(u.points,!0),o.push(t.length/2),t=t.concat(u.points)}let a=z.earcut(t,o,2);if(!a)return;let l=i.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<t.length;c++)i.push(t[c])}}};var hS={build(n){let e=n.shape,t=e.x,r=e.y,i=e.width,s=e.height,o=n.points;o.length=0,i>=0&&s>=0&&o.push(t,r,t+i,r,t+i,r+s,t,r+s)},triangulate(n,e){let t=n.points,r=e.points;if(t.length===0)return;let i=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};var dS={build(n){gl.build(n)},triangulate(n,e){gl.triangulate(n,e)}};var Wn=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(Wn||{}),fi=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(fi||{}),pi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,e=20){if(!this.adaptive||!n||isNaN(n))return e;let t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};var _l=class{static curveTo(e,t,r,i,s,o){let a=o[o.length-2],l=o[o.length-1]-t,c=a-e,u=i-t,h=r-e,d=Math.abs(l*h-c*u);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;let f=l*l+c*c,p=u*u+h*h,m=l*u+c*h,g=s*Math.sqrt(f)/d,_=s*Math.sqrt(p)/d,v=g*m/f,y=_*m/p,x=g*h+_*c,T=g*u+_*l,C=c*(_+v),b=l*(_+v),w=h*(g+y),P=u*(g+y),U=Math.atan2(b-T,C-x),R=Math.atan2(P-T,w-x);return{cx:x+e,cy:T+t,radius:s,startAngle:U,endAngle:R,anticlockwise:c*u>h*l}}static arc(e,t,r,i,s,o,a,l,c){let u=a-o,h=pi._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/ta)*40),d=u/(h*2),f=d*2,p=Math.cos(d),m=Math.sin(d),g=h-1,_=g%1/g;for(let v=0;v<=g;++v){let y=v+_*v,x=d+o+f*y,T=Math.cos(x),C=-Math.sin(x);c.push((p*T+m*C)*s+r,(p*-C+m*T)*s+i)}}};var Zu=class{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}};var Qu=class n{static curveLength(e,t,r,i,s,o,a,l){let c=0,u=0,h=0,d=0,f=0,p=0,m=0,g=0,_=0,v=0,y=0,x=e,T=t;for(let C=1;C<=10;++C)u=C/10,h=u*u,d=h*u,f=1-u,p=f*f,m=p*f,g=m*e+3*p*u*r+3*f*h*s+d*a,_=m*t+3*p*u*i+3*f*h*o+d*l,v=x-g,y=T-_,x=g,T=_,c+=Math.sqrt(v*v+y*y);return c}static curveTo(e,t,r,i,s,o,a){let l=a[a.length-2],c=a[a.length-1];a.length-=2;let u=pi._segmentsCount(n.curveLength(l,c,e,t,r,i,s,o)),h=0,d=0,f=0,p=0,m=0;a.push(l,c);for(let g=1,_=0;g<=u;++g)_=g/u,h=1-_,d=h*h,f=d*h,p=_*_,m=p*_,a.push(f*l+3*d*_*e+3*h*p*r+m*s,f*c+3*d*_*t+3*h*p*i+m*o)}};function FB(n,e,t,r,i,s,o,a){let l=n-t*i,c=e-r*i,u=n+t*s,h=e+r*s,d,f;o?(d=r,f=-t):(d=-r,f=t);let p=l+d,m=c+f,g=u+d,_=h+f;return a.push(p,m,g,_),2}function yl(n,e,t,r,i,s,o,a){let l=t-n,c=r-e,u=Math.atan2(l,c),h=Math.atan2(i-n,s-e);a&&u<h?u+=Math.PI*2:!a&&u>h&&(h+=Math.PI*2);let d=u,f=h-u,p=Math.abs(f),m=Math.sqrt(l*l+c*c),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,_=f/g;if(d+=_,a){o.push(n,e,t,r);for(let v=1,y=d;v<g;v++,y+=_)o.push(n,e,n+Math.sin(y)*m,e+Math.cos(y)*m);o.push(n,e,i,s)}else{o.push(t,r,n,e);for(let v=1,y=d;v<g;v++,y+=_)o.push(n+Math.sin(y)*m,e+Math.cos(y)*m,n,e);o.push(i,s,n,e)}return g*2}function gQ(n,e){let t=n.shape,r=n.points||t.points.slice(),i=e.closePointEps;if(r.length===0)return;let s=n.lineStyle,o=new ve(r[0],r[1]),a=new ve(r[r.length-2],r[r.length-1]),l=t.type!==_t.POLY||t.closeStroke,c=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));let A=(o.x+a.x)*.5,F=(a.y+o.y)*.5;r.unshift(A,F),r.push(A,F)}let u=e.points,h=r.length/2,d=r.length,f=u.length/2,p=s.width/2,m=p*p,g=s.miterLimit*s.miterLimit,_=r[0],v=r[1],y=r[2],x=r[3],T=0,C=0,b=-(v-x),w=_-y,P=0,U=0,R=Math.sqrt(b*b+w*w);b/=R,w/=R,b*=p,w*=p;let I=s.alignment,M=(1-I)*2,E=I*2;l||(s.cap===fi.ROUND?d+=yl(_-b*(M-E)*.5,v-w*(M-E)*.5,_-b*M,v-w*M,_+b*E,v+w*E,u,!0)+2:s.cap===fi.SQUARE&&(d+=FB(_,v,b,w,M,E,!0,u))),u.push(_-b*M,v-w*M,_+b*E,v+w*E);for(let A=1;A<h-1;++A){_=r[(A-1)*2],v=r[(A-1)*2+1],y=r[A*2],x=r[A*2+1],T=r[(A+1)*2],C=r[(A+1)*2+1],b=-(v-x),w=_-y,R=Math.sqrt(b*b+w*w),b/=R,w/=R,b*=p,w*=p,P=-(x-C),U=y-T,R=Math.sqrt(P*P+U*U),P/=R,U/=R,P*=p,U*=p;let F=y-_,N=v-x,B=y-T,H=C-x,he=F*B+N*H,Ce=N*B-H*F,Ne=Ce<0;if(Math.abs(Ce)<.001*Math.abs(he)){u.push(y-b*M,x-w*M,y+b*E,x+w*E),he>=0&&(s.join===Wn.ROUND?d+=yl(y,x,y-b*M,x-w*M,y-P*M,x-U*M,u,!1)+4:d+=2,u.push(y-P*E,x-U*E,y+P*M,x+U*M));continue}let We=(-b+_)*(-w+x)-(-b+y)*(-w+v),Te=(-P+T)*(-U+x)-(-P+y)*(-U+C),ne=(F*Te-B*We)/Ce,pt=(H*We-N*Te)/Ce,nt=(ne-y)*(ne-y)+(pt-x)*(pt-x),Y=y+(ne-y)*M,Ze=x+(pt-x)*M,yt=y-(ne-y)*E,mt=x-(pt-x)*E,Cn=Math.min(F*F+N*N,B*B+H*H),Q=Ne?M:E,de=Cn+Q*Q*m,Ut=nt<=de,lt=s.join;if(lt===Wn.MITER&&nt/m>g&&(lt=Wn.BEVEL),Ut)switch(lt){case Wn.MITER:{u.push(Y,Ze,yt,mt);break}case Wn.BEVEL:{Ne?u.push(Y,Ze,y+b*E,x+w*E,Y,Ze,y+P*E,x+U*E):u.push(y-b*M,x-w*M,yt,mt,y-P*M,x-U*M,yt,mt),d+=2;break}case Wn.ROUND:{Ne?(u.push(Y,Ze,y+b*E,x+w*E),d+=yl(y,x,y+b*E,x+w*E,y+P*E,x+U*E,u,!0)+4,u.push(Y,Ze,y+P*E,x+U*E)):(u.push(y-b*M,x-w*M,yt,mt),d+=yl(y,x,y-b*M,x-w*M,y-P*M,x-U*M,u,!1)+4,u.push(y-P*M,x-U*M,yt,mt));break}}else{switch(u.push(y-b*M,x-w*M,y+b*E,x+w*E),lt){case Wn.MITER:{Ne?u.push(yt,mt,yt,mt):u.push(Y,Ze,Y,Ze),d+=2;break}case Wn.ROUND:{Ne?d+=yl(y,x,y+b*E,x+w*E,y+P*E,x+U*E,u,!0)+2:d+=yl(y,x,y-b*M,x-w*M,y-P*M,x-U*M,u,!1)+2;break}}u.push(y-P*M,x-U*M,y+P*E,x+U*E),d+=2}}_=r[(h-2)*2],v=r[(h-2)*2+1],y=r[(h-1)*2],x=r[(h-1)*2+1],b=-(v-x),w=_-y,R=Math.sqrt(b*b+w*w),b/=R,w/=R,b*=p,w*=p,u.push(y-b*M,x-w*M,y+b*E,x+w*E),l||(s.cap===fi.ROUND?d+=yl(y-b*(M-E)*.5,x-w*(M-E)*.5,y-b*M,x-w*M,y+b*E,x+w*E,u,!1)+2:s.cap===fi.SQUARE&&(d+=FB(y,x,b,w,M,E,!1,u)));let O=e.indices,k=pi.epsilon*pi.epsilon;for(let A=f;A<d+f-2;++A)_=u[A*2],v=u[A*2+1],y=u[(A+1)*2],x=u[(A+1)*2+1],T=u[(A+2)*2],C=u[(A+2)*2+1],!(Math.abs(_*(x-C)+y*(C-v)+T*(v-x))<k)&&O.push(A,A+1,A+2)}function _Q(n,e){let t=0,r=n.shape,i=n.points||r.points,s=r.type!==_t.POLY||r.closeStroke;if(i.length===0)return;let o=e.points,a=e.indices,l=i.length/2,c=o.length/2,u=c;for(o.push(i[0],i[1]),t=1;t<l;t++)o.push(i[t*2],i[t*2+1]),a.push(u,u+1),u++;s&&a.push(u,c)}function ep(n,e){n.lineStyle.native?_Q(n,e):gQ(n,e)}var Ku=class n{static curveLength(e,t,r,i,s,o){let a=e-2*r+s,l=t-2*i+o,c=2*r-2*e,u=2*i-2*t,h=4*(a*a+l*l),d=4*(a*c+l*u),f=c*c+u*u,p=2*Math.sqrt(h+d+f),m=Math.sqrt(h),g=2*h*m,_=2*Math.sqrt(f),v=d/m;return(g*p+m*d*(p-_)+(4*f*h-d*d)*Math.log((2*m+v+p)/(v+_)))/(4*g)}static curveTo(e,t,r,i,s){let o=s[s.length-2],a=s[s.length-1],l=pi._segmentsCount(n.curveLength(o,a,e,t,r,i)),c=0,u=0;for(let h=1;h<=l;++h){let d=h/l;c=o+(e-o)*d,u=a+(t-a)*d,s.push(c+(e+(r-e)*d-c)*d,u+(t+(i-t)*d-u)*d)}}};var tp={[_t.POLY]:Jf,[_t.CIRC]:gl,[_t.ELIP]:gl,[_t.RECT]:hS,[_t.RREC]:dS},Gy=[],Ju=[];var eh=class n{constructor(e,t=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new n(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}};var th=new ve,kB=class LB extends nl{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new bs,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Ju.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){let t=this.batches[e];t.reset(),Gy.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,i=null){let s=new eh(e,t,r,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;let r=new eh(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){let t=this.graphicsData;for(let r=0;r<t.length;++r){let i=t[r];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,th):th.copyFrom(e),i.shape.contains(th.x,th.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(th.x,th.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;let e=this.uvs,t=this.graphicsData,r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;let c=t[l],u=c.fillStyle,h=c.lineStyle;tp[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(u.visible||h.visible)&&this.processHoles(c.holes);for(let d=0;d<2;d++){let f=d===0?u:h;if(!f.visible)continue;let p=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=Nr.REPEAT,d===0?this.processFill(c):this.processLine(c);let _=this.points.length/2-g;_!==0&&(r&&!this._compareStyles(i,f)&&(r.end(m,g),r=null),r||(r=Gy.pop()||new Zu,r.begin(f,m,g),this.batches.push(r),i=f),this.addUvs(this.points,e,f.texture,g,_,f.matrix))}}let s=this.indices.length,o=this.points.length/2;if(r&&r.end(s,o),this.batches.length===0){this.batchable=!0;return}let a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){let r=this.graphicsData[e],i=r.fillStyle,s=r.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);let e=this.batches;for(let t=0,r=e.length;t<r;t++){let i=e[t];for(let s=0;s<i.size;s++){let o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;let e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<LB.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++ie._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),Ju.push(this.drawCalls[h]);this.drawCalls.length=0;let t=this.colors,r=this.textureIds,i=Ju.pop();i||(i=new ea,i.texArray=new na),i.texArray.count=0,i.start=0,i.size=0,i.type=vr.TRIANGLES;let s=0,o=null,a=0,l=!1,c=vr.TRIANGLES,u=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){let d=this.batches[h],f=8,p=d.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,c=l?vr.LINES:vr.TRIANGLES,o=null,s=f,e++),o!==m&&(o=m,m._batchEnabled!==e&&(s===f&&(e++,s=0,i.size>0&&(i=Ju.pop(),i||(i=new ea,i.texArray=new na),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),m.touched=1,m._batchEnabled=e,m._batchLocation=s,m.wrapMode=Nr.REPEAT,i.texArray.elements[i.texArray.count++]=m,s++)),i.size+=d.size,u+=d.size,a=m._batchLocation,this.addColors(t,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(r,a,d.attribSize,d.attribStart)}ie._globalBatch=e,this.packAttributes()}packAttributes(){let e=this.points,t=this.uvs,r=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s),l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=t[c*2],o[l++]=t[c*2+1],a[l++]=r[c],o[l++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Jf.triangulate(e,this):tp[e.type].triangulate(e,this)}processLine(e){ep(e,this);for(let t=0;t<e.holes.length;t++)ep(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){let r=e[t];tp[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){let e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){let i=e[r*2],s=e[r*2+1];e[r*2]=t.a*i+t.c*s+t.tx,e[r*2+1]=t.b*i+t.d*s+t.ty}}addColors(e,t,r,i,s=0){let o=ye.shared.setValue(t).toLittleEndianNumber(),a=ye.shared.setValue(o).toPremultiplied(r);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,t,r,i=0){e.length=Math.max(e.length,i+r);for(let s=0;s<r;s++)e[i+s]=t}addUvs(e,t,r,i,s,o=null){let a=0,l=t.length,c=r.frame;for(;a<s;){let h=e[(i+a)*2],d=e[(i+a)*2+1];if(o){let f=o.a*h+o.c*d+o.tx;d=o.b*h+o.d*d+o.ty,h=f}a++,t.push(h/c.width,d/c.height)}let u=r.baseTexture;(c.width<u.width||c.height<u.height)&&this.adjustUvs(t,r,l,s)}adjustUvs(e,t,r,i){let s=t.baseTexture,o=1e-6,a=r+i*2,l=t.frame,c=l.width/s.width,u=l.height/s.height,h=l.x/l.width,d=l.y/l.height,f=Math.floor(e[r]+o),p=Math.floor(e[r+1]+o);for(let m=r+2;m<a;m+=2)f=Math.min(f,Math.floor(e[m]+o)),p=Math.min(p,Math.floor(e[m+1]+o));h-=f,d-=p;for(let m=r;m<a;m+=2)e[m]=(e[m]+h)*c,e[m+1]=(e[m+1]+d)*u}};kB.BATCHABLE_SIZE=100;var fS=kB;var vl=class n{constructor(){this.color=16777215,this.alpha=1,this.texture=fe.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){let e=new n;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=fe.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}};var np=class n extends vl{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=fi.BUTT,this.join=Wn.MITER,this.miterLimit=10}clone(){let e=new n;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=fi.BUTT,this.join=Wn.MITER,this.miterLimit=10}};var pS={},mS=class Hy extends Mt{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new vl,this._lineStyle=new np,this._matrix=null,this._holeMode=!1,this.state=pn.for2d(),this._geometry=e||new fS,this._geometry.refCount++,this._transformID=-1,this._tintColor=new ye(16777215),this.blendMode=le.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Hy(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){let t={width:0,texture:fe.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:fi.BUTT,join:Wn.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();let r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){let e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new ys,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new ys,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);let r=this.currentPath.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,i){this._initCurve();let s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Ku.curveTo(e,t,r,i,s),this}bezierCurveTo(e,t,r,i,s,o){return this._initCurve(),Qu.curveTo(e,t,r,i,s,o,this.currentPath.points),this}arcTo(e,t,r,i,s){this._initCurve(e,t);let o=this.currentPath.points,a=_l.curveTo(e,t,r,i,s,o);if(a){let{cx:l,cy:c,radius:u,startAngle:h,endAngle:d,anticlockwise:f}=a;this.arc(l,c,u,h,d,f)}return this}arc(e,t,r,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=ta:o&&i<=s&&(i+=ta),s-i===0)return this;let a=e+Math.cos(i)*r,l=t+Math.sin(i)*r,c=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){let h=Math.abs(u[u.length-2]-a),d=Math.abs(u[u.length-1]-l);h<c&&d<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return _l.arc(a,l,e,t,r,i,s,o,u),this}beginFill(e=0,t){return this.beginTextureFill({texture:fe.WHITE,color:e,alpha:t})}normalizeColor(e){let t=ye.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){let t={texture:fe.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();let r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,i){return this.drawShape(new se(e,t,r,i))}drawRoundedRect(e,t,r,i,s){return this.drawShape(new Au(e,t,r,i,s))}drawCircle(e,t,r){return this.drawShape(new Cu(e,t,r))}drawEllipse(e,t,r,i){return this.drawShape(new Du(e,t,r,i))}drawPolygon(...e){let t,r=!0,i=e[0];i.points?(r=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;let s=new ys(t);return s.closeStroke=r,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){let e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===_t.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();let t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){let e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let i=0;i<r;i++){let s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),u={vertexData:a,blendMode:t,indices:c,uvs:l,_batchRGB:ye.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){let i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){let t=this._resolveDirectShader(e),r=this._geometry,i=this.worldAlpha,s=t.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,ye.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,r.drawCalls[a])}_renderDrawCallDirect(e,t){let{texArray:r,type:i,size:s,start:o}=t,a=r.count;for(let l=0;l<a;l++)e.texture.bind(r.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let t=this.shader,r=this.pluginName;if(!t){if(!pS[r]){let{maxTextures:i}=e.plugins[r],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;let o={tint:new Float32Array([1,1,1,1]),translationMatrix:new ke,default:lr.from({uSamplers:s},!0)},a=e.plugins[r]._shader.program;pS[r]=new Tn(a,o)}t=pS[r]}return t}_calculateBounds(){this.finishPoly();let e=this._geometry;if(!e.graphicsData.length)return;let{minX:t,minY:r,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,r,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Hy._TEMP_POINT),this._geometry.containsPoint(Hy._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){let t=this.batches[e];t._tintRGB=ye.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){let e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;let t=this.transform.worldTransform,r=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,c=this._geometry.points,u=this.vertexData,h=0;for(let d=0;d<c.length;d+=2){let f=c[d],p=c[d+1];u[h++]=r*f+s*p+a,u[h++]=o*p+i*f+l}}closePath(){let e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};mS.curves=pi,mS._TEMP_POINT=new ve;var la=mS;var rp=class{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;let t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}};var gS=new ve,BB=new ys,VB=class UB extends Mt{constructor(e,t,r,i=vr.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||pn.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=j.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){let t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===vr.TRIANGLES&&t.length<UB.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){let t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){let t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;let i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){let e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));let i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,u=i.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){let f=t[d*2],p=t[d*2+1];h[d*2]=s*f+a*p+c,h[d*2+1]=o*f+l*p+u}if(this._roundPixels){let d=j.RESOLUTION;for(let f=0;f<h.length;++f)h[f]=Math.round(h[f]*d)/d}this.vertexDirty=r}calculateUvs(){let e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new rp(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,gS);let t=this.geometry.getBuffer("aVertexPosition").data,r=BB.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){let l=i[a]*2,c=i[a+1]*2,u=i[a+2]*2;if(r[0]=t[l],r[1]=t[l+1],r[2]=t[c],r[3]=t[c+1],r[4]=t[u],r[5]=t[u+1],BB.contains(gS.x,gS.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};VB.BATCHABLE_SIZE=100;var xl=VB;var ca=class extends kr{constructor(e,t,r){super();let i=new ft(e),s=new ft(t,!0),o=new ft(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,te.FLOAT).addAttribute("aTextureCoord",s,2,!1,te.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}};var jB=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`;var GB=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;var lo=class extends Tn{constructor(e,t){let r={uSampler:e,alpha:1,uTextureMatrix:ke.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(r,t.uniforms),super(t.program||Hn.from(GB,jB),r),this._colorDirty=!1,this.uvMatrix=new ia(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new ye(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;let e=this.texture.baseTexture.alphaMode;ye.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}};var ip=class{constructor(e,t,r){this.geometry=new kr,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||te.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){let e=this.geometry,t=0;this.indexBuffer=new ft(z.createIndicesForQuads(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){let a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}let r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new ft(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){let a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}let s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ft(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){let a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===te.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){let a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===te.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,r){for(let i=0;i<this.dynamicProperties.length;i++){let s=this.dynamicProperties[i];s.uploadFunction(e,t,r,s.type===te.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let i=0;i<this.staticProperties.length;i++){let s=this.staticProperties[i];s.uploadFunction(e,t,r,s.type===te.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}};var HB=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`;var $B=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;var sp=class extends Bi{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new ke,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:te.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Tn.from($B,HB,{}),this.state=pn.for2d()}render(e){let t=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer,o=t.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));let l=t[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=z.correctBlendMode(e.blendMode,c),s.state.set(this.state);let u=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=ye.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let m=o-f;m>i&&(m=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));let g=a[p];g.uploadDynamic(t,f,m);let _=e._bufferUpdateIDs[p]||0;d=d||g._updateID<_,d&&(g._updateID=e._updateID,g.uploadStatic(t,f,m)),s.geometry.bind(g.geometry),u.drawElements(u.TRIANGLES,m*6,u.UNSIGNED_SHORT,0)}}generateBuffers(e){let t=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)t.push(new ip(this.properties,s,i));return t}_generateOneMoreBuffer(e){let t=e._batchSize,r=e._properties;return new ip(this.properties,r,t)}uploadVertices(e,t,r,i,s,o){let a=0,l=0,c=0,u=0;for(let h=0;h<r;++h){let d=e[t+h],f=d._texture,p=d.scale.x,m=d.scale.y,g=f.trim,_=f.orig;g?(l=g.x-d.anchor.x*_.width,a=l+g.width,u=g.y-d.anchor.y*_.height,c=u+g.height):(a=_.width*(1-d.anchor.x),l=_.width*-d.anchor.x,c=_.height*(1-d.anchor.y),u=_.height*-d.anchor.y),i[o]=l*p,i[o+1]=u*m,i[o+s]=a*p,i[o+s+1]=u*m,i[o+s*2]=a*p,i[o+s*2+1]=c*m,i[o+s*3]=l*p,i[o+s*3+1]=c*m,o+=s*4}}uploadPosition(e,t,r,i,s,o){for(let a=0;a<r;a++){let l=e[t+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,t,r,i,s,o){for(let a=0;a<r;a++){let l=e[t+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,t,r,i,s,o){for(let a=0;a<r;++a){let l=e[t+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,r,i,s,o){for(let a=0;a<r;++a){let l=e[t+a],c=ye.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}};sp.extension={name:"particle",type:V.RendererPlugin};G.add(sp);var ua=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(ua||{});var $y={willReadFrequently:!0},Ss=class ae{static get experimentalLetterSpacingSupported(){let e=ae._experimentalLetterSpacingSupported;if(e!==void 0){let t=j.ADAPTER.getCanvasRenderingContext2D().prototype;e=ae._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,i,s,o,a,l,c){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,t,r,i=ae._canvas){r=r??t.wordWrap;let s=t.toFontString(),o=ae.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);let a=i.getContext("2d",$y);a.font=s;let l=(r?ae.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length),u=0;for(let p=0;p<l.length;p++){let m=ae._measureText(l[p],t.letterSpacing,a);c[p]=m,u=Math.max(u,m)}let h=u+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance);let d=t.lineHeight||o.fontSize+t.strokeThickness,f=Math.max(d,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new ae(e,t,h,f,l,c,d+t.leading,u,o)}static _measureText(e,t,r){let i=!1;ae.experimentalLetterSpacingSupported&&(ae.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(e).width;return s>0&&(i?s-=t:s+=(ae.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,r=ae._canvas){let i=r.getContext("2d",$y),s=0,o="",a="",l=Object.create(null),{letterSpacing:c,whiteSpace:u}=t,h=ae.collapseSpaces(u),d=ae.collapseNewlines(u),f=!h,p=t.wordWrapWidth+c,m=ae.tokenize(e);for(let g=0;g<m.length;g++){let _=m[g];if(ae.isNewline(_)){if(!d){a+=ae.addLine(o),f=!h,o="",s=0;continue}_=" "}if(h){let y=ae.isBreakingSpace(_),x=ae.isBreakingSpace(o[o.length-1]);if(y&&x)continue}let v=ae.getFromCache(_,c,l,i);if(v>p)if(o!==""&&(a+=ae.addLine(o),o="",s=0),ae.canBreakWords(_,t.breakWords)){let y=ae.wordWrapSplit(_);for(let x=0;x<y.length;x++){let T=y[x],C=T,b=1;for(;y[x+b];){let P=y[x+b];if(!ae.canBreakChars(C,P,_,x,t.breakWords))T+=P;else break;C=P,b++}x+=b-1;let w=ae.getFromCache(T,c,l,i);w+s>p&&(a+=ae.addLine(o),f=!1,o="",s=0),o+=T,s+=w}}else{o.length>0&&(a+=ae.addLine(o),o="",s=0);let y=g===m.length-1;a+=ae.addLine(_,!y),f=!1,o="",s=0}else v+s>p&&(f=!1,a+=ae.addLine(o),o="",s=0),(o.length>0||!ae.isBreakingSpace(_)||f)&&(o+=_,s+=v)}return a+=ae.addLine(o,!1),a}static addLine(e,t=!0){return e=ae.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,i){let s=r[e];return typeof s!="number"&&(s=ae._measureText(e,t,i)+t,r[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){let r=e[t];if(!ae.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ae._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ae._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){let t=[],r="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){let s=e[i],o=e[i+1];if(ae.isBreakingSpace(s,o)||ae.isNewline(s)){r!==""&&(t.push(r),r=""),t.push(s);continue}r+=s}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,i,s){return!0}static wordWrapSplit(e){return ae.graphemeSegmenter(e)}static measureFont(e){if(ae._fonts[e])return ae._fonts[e];let t={ascent:0,descent:0,fontSize:0},r=ae._canvas,i=ae._context;i.font=e;let s=ae.METRICS_STRING+ae.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width),a=Math.ceil(i.measureText(ae.BASELINE_SYMBOL).width),l=Math.ceil(ae.HEIGHT_MULTIPLIER*a);if(a=a*ae.BASELINE_MULTIPLIER|0,o===0||l===0)return ae._fonts[e]=t,t;r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);let c=i.getImageData(0,0,o,l).data,u=c.length,h=o*4,d=0,f=0,p=!1;for(d=0;d<a;++d){for(let m=0;m<h;m+=4)if(c[f+m]!==255){p=!0;break}if(!p)f+=h;else break}for(t.ascent=a-d,f=u-h,p=!1,d=l;d>a;--d){for(let m=0;m<h;m+=4)if(c[f+m]!==255){p=!0;break}if(!p)f-=h;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,ae._fonts[e]=t,t}static clearMetrics(e=""){e?delete ae._fonts[e]:ae._fonts={}}static get _canvas(){if(!ae.__canvas){let e;try{let t=new OffscreenCanvas(0,0);if(t.getContext("2d",$y)?.measureText)return ae.__canvas=t,t;e=j.ADAPTER.createCanvas()}catch{e=j.ADAPTER.createCanvas()}e.width=e.height=10,ae.__canvas=e}return ae.__canvas}static get _context(){return ae.__context||(ae.__context=ae._canvas.getContext("2d",$y)),ae.__context}};Ss.METRICS_STRING="|\xC9q\xC5",Ss.BASELINE_SYMBOL="M",Ss.BASELINE_MULTIPLIER=1.4,Ss.HEIGHT_MULTIPLIER=2,Ss.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let n=new Intl.Segmenter;return e=>[...n.segment(e)].map(t=>t.segment)}return n=>[...n]})(),Ss.experimentalLetterSpacing=!1,Ss._fonts={},Ss._newlines=[10,13],Ss._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var mi=Ss;var bQ=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],WB=class op{constructor(e){this.styleID=0,this.reset(),yS(this,e,e)}clone(){let e={};return yS(e,this,op.defaultStyle),new op(e)}reset(){yS(this,op.defaultStyle,op.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){let t=_S(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){let t=_S(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){wQ(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){let t=_S(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){let e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let i=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!bQ.includes(i)&&(i=`"${i}"`),t[r]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};WB.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ua.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var wr=WB;function _S(n){let e=ye.shared,t=r=>{let i=e.setValue(r);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(n)?n.map(t):t(n)}function wQ(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}function yS(n,e,t){for(let r in t)Array.isArray(e[r])?n[r]=e[r].slice():n[r]=e[r]}var TQ={texture:!0,children:!1,baseTexture:!0},zB=class vS extends hi{constructor(e,t,r){let i=!1;r||(r=j.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;let s=fe.from(r);s.orig=new se,s.trim=new se,super(s),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=vS.defaultResolution??j.RESOLUTION,this._autoResolution=vS.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return mi.experimentalLetterSpacing}static set experimentalLetterSpacing(e){z.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),mi.experimentalLetterSpacing=e}updateText(e){let t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();let r=this.context,i=mi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,c=i.lineWidths,u=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let d,f,p=t.dropShadow?2:1;for(let m=0;m<p;++m){let g=t.dropShadow&&m===0,_=g?Math.ceil(Math.max(1,o)+t.padding*2):0,v=_*this._resolution;if(g){r.fillStyle="black",r.strokeStyle="black";let x=t.dropShadowColor,T=t.dropShadowBlur*this._resolution,C=t.dropShadowDistance*this._resolution;r.shadowColor=ye.shared.setValue(x).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=T,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*C,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*C+v}else r.fillStyle=this._generateFillStyle(t,a,i),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let y=(l-h.fontSize)/2;l-h.fontSize<0&&(y=0);for(let x=0;x<a.length;x++)d=t.strokeThickness/2,f=t.strokeThickness/2+x*l+h.ascent+y,t.align==="right"?d+=u-c[x]:t.align==="center"&&(d+=(u-c[x])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[x],d+t.padding,f+t.padding-_,!0),t.fill&&this.drawLetterSpacing(a[x],d+t.padding,f+t.padding-_)}this.updateTexture()}drawLetterSpacing(e,t,r,i=!1){let s=this._style.letterSpacing,o=!1;if(mi.experimentalLetterSpacingSupported&&(mi.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let a=t,l=mi.graphemeSegmenter(e),c=this.context.measureText(e).width,u=0;for(let h=0;h<l.length;++h){let d=l[h];i?this.context.strokeText(d,a,r):this.context.fillText(d,a,r);let f="";for(let p=h+1;p<l.length;++p)f+=l[p];u=this.context.measureText(f).width,a+=c-u+s,c=u}}updateTexture(){let e=this.canvas;if(this._style.trim){let o=z.trimCanvas(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}let t=this._texture,r=this._style,i=r.trim?0:r.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){let i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s,o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,u=i.slice(),h=e.fillGradientStops.slice();if(!h.length){let d=u.length+1;for(let f=1;f<d;++f)h.push(f/d)}if(u.unshift(i[0]),h.unshift(0),u.push(i[i.length-1]),h.push(1),e.fillGradientType===ua.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);let d=r.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){let p=r.lineHeight*(f-1)+d,m=r.lineHeight*f,g=m;f>0&&p>m&&(g=(m+p)/2);let _=m+d,v=r.lineHeight*(f+1),y=_;f+1<t.length&&v<_&&(y=(_+v)/2);let x=(y-g)/c;for(let T=0;T<u.length;T++){let C=0;typeof h[T]=="number"?C=h[T]:C=T/u.length;let b=Math.min(1,Math.max(0,g/c+C*x));b=Number(b.toFixed(5)),s.addColorStop(b,u[T])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);let d=u.length+1,f=1;for(let p=0;p<u.length;p++){let m;typeof h[p]=="number"?m=h[p]:m=f/d,s.addColorStop(m,u[p]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},TQ,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);let t=z.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);let t=z.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof wr?this._style=e:this._style=new wr(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};zB.defaultAutoResolution=!0;var Wy=zB;var ap=class{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}};function SQ(n,e){let t=!1;if(n?._textures?.length){for(let r=0;r<n._textures.length;r++)if(n._textures[r]instanceof fe){let i=n._textures[r].baseTexture;e.includes(i)||(e.push(i),t=!0)}}return t}function EQ(n,e){if(n.baseTexture instanceof ie){let t=n.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function CQ(n,e){if(n._texture&&n._texture instanceof fe){let t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function DQ(n,e){return e instanceof Wy?(e.updateText(!0),!0):!1}function AQ(n,e){if(e instanceof wr){let t=e.toFontString();return mi.measureFont(t),!0}return!1}function IQ(n,e){if(n instanceof Wy){e.includes(n.style)||e.push(n.style),e.includes(n)||e.push(n);let t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function MQ(n,e){return n instanceof wr?(e.includes(n)||e.push(n),!0):!1}var qB=class XB{constructor(e){this.limiter=new ap(XB.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(IQ),this.registerFindHook(MQ),this.registerFindHook(SQ),this.registerFindHook(EQ),this.registerFindHook(CQ),this.registerUploadHook(DQ),this.registerUploadHook(AQ)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Jt.system.addOnce(this.tick,this,Br.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){let e=this.queue[0],t=!1;if(e&&!e._destroyed){for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Jt.system.addOnce(this.tick,this,Br.UTILITY);else{this.ticking=!1;let e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Mt)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Jt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};qB.uploadsPerFrame=4;var nh=qB;Object.defineProperties(j,{UPLOADS_PER_FRAME:{get(){return nh.uploadsPerFrame},set(n){z.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),nh.uploadsPerFrame=n}}});function YB(n,e){return e instanceof ie?(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0):!1}function OQ(n,e){if(!(e instanceof la))return!1;let{geometry:t}=e;e.finishPoly(),t.updateBatches();let{batches:r}=t;for(let i=0;i<r.length;i++){let{texture:s}=r[i].style;s&&YB(n,s.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function RQ(n,e){return n instanceof la?(e.push(n),!0):!1}var lp=class extends nh{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(RQ),this.registerUploadHook(YB),this.registerUploadHook(OQ)}};lp.extension={name:"prepare",type:V.RendererSystem};G.add(lp);var Iht=new ve;var ZB=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`;var QB=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;var KB=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`;var xS=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;var JB=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;var zy=new ke,cp=class extends Bi{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new hl,this.state=pn.for2d()}contextChange(){let e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Tn.from(xS,JB,t),this.shader=e.context.webGLVersion>1?Tn.from(QB,ZB,t):Tn.from(xS,KB,t)}render(e){let t=this.renderer,r=this.quad,i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);let s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();let a=e._texture,l=a.baseTexture,c=l.alphaMode>0,u=e.tileTransform.localTransform,h=e.uvMatrix,d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[t.CONTEXT_UID]?d=l.wrapMode!==Nr.CLAMP:l.wrapMode===Nr.CLAMP&&(l.wrapMode=Nr.REPEAT));let f=d?this.simpleShader:this.shader,p=a.width,m=a.height,g=e._width,_=e._height;zy.set(u.a*p/g,u.b*p/_,u.c*m/g,u.d*m/_,u.tx/g,u.ty/_),zy.invert(),d?zy.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=zy.toArray(!0),f.uniforms.uColor=ye.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,t.shader.bind(f),t.geometry.bind(r),this.state.blendMode=z.correctBlendMode(e.blendMode,c),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}};cp.extension={name:"tilingSprite",type:V.RendererPlugin};G.add(cp);var eV=class up{constructor(e,t,r=null){this.linkedSheets=[],this._texture=e instanceof fe?e:null,this.baseTexture=e instanceof ie?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;let i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){let{scale:t}=this.data.meta,r=z.getResolutionOfUrl(e,null);return r===null&&(r=parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=up.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e,r=up.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){let i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){let a=null,l=null,c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new se(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new se(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new se(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new se(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new fe(this.baseTexture,a,u,l,s.rotated?2:0,s.anchor,s.borders),fe.addToCache(this.textures[i],i.toString())}t++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){let i=e[t][r];this.animations[t].push(this.textures[i])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*up.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*up.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(let t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};eV.BATCH_SIZE=1e3;var qy=eV;var NQ=["jpg","png","jpeg","avif","webp"];function tV(n,e,t){let r={};if(n.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[i]=e.textures[i]}),!t){let i=z.path.dirname(n[0]);e.linkedSheets.forEach((s,o)=>{let a=tV([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(r,a)})}return r}var nV={extension:V.Asset,cache:{test:n=>n instanceof qy,getCacheableAssets:(n,e)=>tV(n,e,!1)},resolver:{test:n=>{let e=n.split("?")[0].split("."),t=e.pop(),r=e.pop();return t==="json"&&NQ.includes(r)},parse:n=>{let e=n.split(".");return{resolution:parseFloat(j.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:V.LoadParser,priority:Ot.Normal},testParse(n,e){return L(this,null,function*(){return z.path.extname(e.src).toLowerCase()===".json"&&!!n.frames})},parse(n,e,t){return L(this,null,function*(){let r=z.path.dirname(e.src);r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");let i=r+n.meta.image;i=ml(i,e.src);let s=(yield t.load([i]))[i],o=new qy(s.baseTexture,n,e.src);yield o.parse();let a=n?.meta?.related_multi_packs;if(Array.isArray(a)){let l=[];for(let u of a){if(typeof u!="string")continue;let h=r+u;e.data?.ignoreMultiPack||(h=ml(h,e.src),l.push(t.load({src:h,data:{ignoreMultiPack:!0}})))}let c=yield Promise.all(l);o.linkedSheets=c,c.forEach(u=>{u.linkedSheets=[o].concat(o.linkedSheets.filter(h=>h!==u))})}return o})},unload(n){n.destroy(!0)}}};G.add(nV);var Es=class{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}};var co=class{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){let t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let s in t){let o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(let c in a){let u=a[c].split("="),h=u[0],d=u[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[h]=p}r[o].push(l)}let i=new Es;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}};var ha=class{static test(e){let t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){let t=new Es,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<r.length;c++)t.info.push({face:r[c].getAttribute("face"),size:parseInt(r[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)t.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)t.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){let u=o[c];t.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)t.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)t.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return t}};var da=class{static test(e){return typeof e=="string"&&e.includes("<font>")?ha.test(j.ADAPTER.parseXML(e)):!1}static parse(e){return ha.parse(j.ADAPTER.parseXML(e))}};var bS=[co,ha,da];function wS(n){for(let e=0;e<bS.length;e++)if(bS[e].test(n))return bS[e];return null}function TS(n,e,t,r,i,s){let o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a,l=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,u=n.width/r-l-c*2,h=n.height/r-l-c*2,d=o.slice(),f=t.fillGradientStops.slice();if(!f.length){let p=d.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),t.fillGradientType===ua.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,h+c);let p=0,m=(s.fontProperties.fontSize+t.strokeThickness)/h;for(let g=0;g<i.length;g++){let _=s.lineHeight*g;for(let v=0;v<d.length;v++){let y=0;typeof f[v]=="number"?y=f[v]:y=v/d.length;let x=_/h+y*m,T=Math.max(p,x);T=Math.min(T,1),a.addColorStop(T,d[v]),p=T}}}else{a=e.createLinearGradient(c,h/2,u+c,h/2);let p=d.length+1,m=1;for(let g=0;g<d.length;g++){let _;typeof f[g]=="number"?_=f[g]:_=m/p,a.addColorStop(_,d[g]),m++}}return a}function SS(n,e,t,r,i,s,o){let a=t.text,l=t.fontProperties;e.translate(r,i),e.scale(s,s);let c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=TS(n,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){let h=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=ye.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,u+t.lineHeight-l.descent),o.fill&&e.fillText(a,c,u+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function bl(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}function hp(n){return Array.from?Array.from(n):n.split("")}function ES(n){typeof n=="string"&&(n=[n]);let e=[];for(let t=0,r=n.length;t<r;t++){let i=n[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);let s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...hp(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var fa=class Cs{constructor(e,t,r){let[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=z.getResolutionOfUrl(o.file),c={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let u=0;u<e.page.length;u++){let{id:h,file:d}=e.page[u];c[h]=t instanceof Array?t[u]:t[d],a?.fieldType&&a.fieldType!=="none"&&(c[h].baseTexture.alphaMode=At.NO_PREMULTIPLIED_ALPHA,c[h].baseTexture.mipmap=wn.OFF)}for(let u=0;u<e.char.length;u++){let{id:h,page:d}=e.char[u],{x:f,y:p,width:m,height:g,xoffset:_,yoffset:v,xadvance:y}=e.char[u];f/=l,p/=l,m/=l,g/=l,_/=l,v/=l,y/=l;let x=new se(f+c[d].frame.x/l,p+c[d].frame.y/l,m,g);this.chars[h]={xOffset:_,yOffset:v,xAdvance:y,kerning:{},texture:new fe(c[d].baseTexture,x),page:d}}for(let u=0;u<e.kerning.length;u++){let{first:h,second:d,amount:f}=e.kerning[u];h/=l,d/=l,f/=l,this.chars[d]&&(this.chars[d].kerning[h]=f)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(let e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(let e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let i;if(e instanceof Es)i=e;else{let o=wS(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}t instanceof fe&&(t=[t]);let s=new Cs(i,t,r);return Cs.available[s.font]=s,s}static uninstall(e){let t=Cs.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Cs.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");let b=Object.assign({},Cs.defaultOptions,r),{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l}=b,c=Tr(b,["chars","padding","resolution","textureWidth","textureHeight"]),u=ES(i),h=t instanceof wr?t:new wr(t),d=a,f=new Es;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};let p=0,m=0,g,_,v,y=0,x=[],T=[];for(let w=0;w<u.length;w++){g||(g=j.ADAPTER.createCanvas(),g.width=a,g.height=l,_=g.getContext("2d"),v=new ie(g,S({resolution:o},c)),x.push(v),T.push(new fe(v)),f.page.push({id:T.length-1,file:""}));let P=u[w],U=mi.measureText(P,h,!1,g),R=U.width,I=Math.ceil(U.height),M=Math.ceil((h.fontStyle==="italic"?2:1)*R);if(m>=l-I*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${P}')`);--w,g=null,_=null,v=null,m=0,p=0,y=0;continue}if(y=Math.max(I+U.fontProperties.descent,y),M*o+p>=d){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${P}')`);--w,m+=y*o,m=Math.ceil(m),p=0,y=0;continue}SS(g,_,U,p,m,o,h);let E=bl(U.text);f.char.push({id:E,page:T.length-1,x:p/o,y:m/o,width:M,height:I,xoffset:0,yoffset:0,xadvance:R-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),p+=(M+2*s)*o,p=Math.ceil(p)}if(!r?.skipKerning)for(let w=0,P=u.length;w<P;w++){let U=u[w];for(let R=0;R<P;R++){let I=u[R],M=_.measureText(U).width,E=_.measureText(I).width,O=_.measureText(U+I).width-(M+E);O&&f.kerning.push({first:bl(U),second:bl(I),amount:O})}}let C=new Cs(f,T,!0);return Cs.available[e]!==void 0&&Cs.uninstall(e),Cs.available[e]=C,C}};fa.ALPHA=[["a","z"],["A","Z"]," "],fa.NUMERIC=[["0","9"]],fa.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],fa.ASCII=[[" ","~"]],fa.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:fa.ALPHANUMERIC},fa.available={};var Hi=fa;var rV=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`;var iV=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;var sV=[],oV=[],aV=[],PQ=class lV extends Mt{constructor(e,t={}){super();let{align:r,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},lV.styleDefaults,t);if(!Hi.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new ye(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Lr(()=>{this.dirty=!0},this,0,0),this._roundPixels=j.ROUND_PIXELS,this.dirty=!0,this._resolution=j.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){let e=Hi.available[this._fontName],t=this.fontSize,r=t/e.size,i=new ve,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=hp(l),u=this._maxWidth*e.size/t,h=e.distanceFieldType==="none"?sV:oV,d=null,f=0,p=0,m=0,g=-1,_=0,v=0,y=0,x=0;for(let R=0;R<c.length;R++){let I=c[R],M=bl(I);if(/(?:\s)/.test(I)&&(g=R,_=f,x++),I==="\r"||I===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++m,++v,i.x=0,i.y+=e.lineHeight,d=null,x=0;continue}let E=e.chars[M];if(!E)continue;d&&E.kerning[d]&&(i.x+=E.kerning[d]);let O=aV.pop()||{texture:fe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ve};O.texture=E.texture,O.line=m,O.charCode=M,O.position.x=Math.round(i.x+E.xOffset+this._letterSpacing/2),O.position.y=Math.round(i.y+E.yOffset),O.prevSpaces=x,s.push(O),f=O.position.x+Math.max(E.xAdvance-E.xOffset,E.texture.orig.width),i.x+=E.xAdvance+this._letterSpacing,y=Math.max(y,E.yOffset+E.texture.height),d=M,g!==-1&&u>0&&i.x>u&&(++v,z.removeItems(s,1+g-v,1+R-g),R=g,g=-1,o.push(_),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,_),m++,i.x=0,i.y+=e.lineHeight,d=null,x=0)}let T=c[c.length-1];T!=="\r"&&T!==`
`&&(/(?:\s)/.test(T)&&(f=_),o.push(f),p=Math.max(p,f),a.push(-1));let C=[];for(let R=0;R<=m;R++){let I=0;this._align==="right"?I=p-o[R]:this._align==="center"?I=(p-o[R])/2:this._align==="justify"&&(I=a[R]<0?0:(p-o[R])/a[R]),C.push(I)}let b=s.length,w={},P=[],U=this._activePagesMeshData;h.push(...U);for(let R=0;R<b;R++){let I=s[R].texture,M=I.baseTexture.uid;if(!w[M]){let E=h.pop();if(!E){let k=new ca,A,F;e.distanceFieldType==="none"?(A=new lo(fe.EMPTY),F=le.NORMAL):(A=new lo(fe.EMPTY,{program:Hn.from(iV,rV),uniforms:{uFWidth:0}}),F=le.NORMAL_NPM);let N=new xl(k,A);N.blendMode=F,E={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:N,vertices:null,uvs:null,indices:null}}E.index=0,E.indexCount=0,E.vertexCount=0,E.uvsCount=0,E.total=0;let{_textureCache:O}=this;O[M]=O[M]||new fe(I.baseTexture),E.mesh.texture=O[M],E.mesh.tint=this._tintColor.value,P.push(E),w[M]=E}w[M].total++}for(let R=0;R<U.length;R++)P.includes(U[R])||this.removeChild(U[R].mesh);for(let R=0;R<P.length;R++)P[R].mesh.parent!==this&&this.addChild(P[R].mesh);this._activePagesMeshData=P;for(let R in w){let I=w[R],M=I.total;if(!(I.indices?.length>6*M)||I.vertices.length<xl.BATCHABLE_SIZE*2)I.vertices=new Float32Array(4*2*M),I.uvs=new Float32Array(4*2*M),I.indices=new Uint16Array(6*M);else{let E=I.total,O=I.vertices;for(let k=E*4*2;k<O.length;k++)O[k]=0}I.mesh.size=6*M}for(let R=0;R<b;R++){let I=s[R],M=I.position.x+C[I.line]*(this._align==="justify"?I.prevSpaces:1);this._roundPixels&&(M=Math.round(M));let E=M*r,O=I.position.y*r,k=I.texture,A=w[k.baseTexture.uid],F=k.frame,N=k._uvs,B=A.index++;A.indices[B*6+0]=0+B*4,A.indices[B*6+1]=1+B*4,A.indices[B*6+2]=2+B*4,A.indices[B*6+3]=0+B*4,A.indices[B*6+4]=2+B*4,A.indices[B*6+5]=3+B*4,A.vertices[B*8+0]=E,A.vertices[B*8+1]=O,A.vertices[B*8+2]=E+F.width*r,A.vertices[B*8+3]=O,A.vertices[B*8+4]=E+F.width*r,A.vertices[B*8+5]=O+F.height*r,A.vertices[B*8+6]=E,A.vertices[B*8+7]=O+F.height*r,A.uvs[B*8+0]=N.x0,A.uvs[B*8+1]=N.y0,A.uvs[B*8+2]=N.x1,A.uvs[B*8+3]=N.y1,A.uvs[B*8+4]=N.x2,A.uvs[B*8+5]=N.y2,A.uvs[B*8+6]=N.x3,A.uvs[B*8+7]=N.y3}this._textWidth=p*r,this._textHeight=(i.y+e.lineHeight)*r;for(let R in w){let I=w[R];if(this.anchor.x!==0||this.anchor.y!==0){let k=0,A=this._textWidth*this.anchor.x,F=this._textHeight*this.anchor.y;for(let N=0;N<I.total;N++)I.vertices[k++]-=A,I.vertices[k++]-=F,I.vertices[k++]-=A,I.vertices[k++]-=F,I.vertices[k++]-=A,I.vertices[k++]-=F,I.vertices[k++]-=A,I.vertices[k++]-=F}this._maxLineHeight=y*r;let M=I.mesh.geometry.getBuffer("aVertexPosition"),E=I.mesh.geometry.getBuffer("aTextureCoord"),O=I.mesh.geometry.getIndex();M.data=I.vertices,E.data=I.uvs,O.data=I.indices,M.update(),E.update(),O.update()}for(let R=0;R<s.length;R++)aV.push(s[R]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);let{distanceFieldRange:t,distanceFieldType:r,size:i}=Hi.available[this._fontName];if(r!=="none"){let{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+l*l),h=(Math.abs(c)+Math.abs(u))/2,d=this.fontSize/i,f=e._view.resolution;for(let p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=h*t*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){let e=Hi.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Hi.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Hi.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){let{_textureCache:t}=this,r=Hi.available[this._fontName].distanceFieldType==="none"?sV:oV;r.push(...this._activePagesMeshData);for(let i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=fe.EMPTY});for(let i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};PQ.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};var FQ=[".xml",".fnt"],cV={extension:{type:V.LoadParser,priority:Ot.Normal},name:"loadBitmapFont",test(n){return FQ.includes(z.path.extname(n).toLowerCase())},testParse(n){return L(this,null,function*(){return co.test(n)||da.test(n)})},parse(n,e,t){return L(this,null,function*(){let r=co.test(n)?co.parse(n):da.parse(n),{src:i}=e,{page:s}=r,o=[];for(let c=0;c<s.length;++c){let u=s[c].file,h=z.path.join(z.path.dirname(i),u);h=ml(h,i),o.push(h)}let a=yield t.load(o),l=o.map(c=>a[c]);return Hi.install(r,l,!0)})},load(n,e){return L(this,null,function*(){return(yield j.ADAPTER.fetch(n)).text()})},unload(n){n.destroy()}};G.add(cV);var CS=class rh extends wr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new rh(Object.keys(rh.defaultOptions).reduce((t,r)=>W(S({},t),{[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete rh.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){let{availableFonts:r}=rh;if(r[e]){let i=r[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return j.ADAPTER.fetch(e).then(i=>i.blob()).then(i=>L(this,null,function*(){return new Promise((s,o)=>{let a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})})).then(o=>L(this,[o],function*([i,s]){let a=Object.assign({family:z.path.basename(e,z.path.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);r[e]=a,this._fonts.push(a),this.styleID++;let l=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style,display:a.display});a.fontFace=l,yield l.load(),document.fonts.add(l),yield document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...e){let t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){let t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=z.rgb2hex(e)),typeof e=="number"?z.hex2string(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor),t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));let s=`${r}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,rh.defaultOptions)}onBeforeDraw(){let{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){let{userAgent:e}=j.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};CS.availableFonts={},CS.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};var dp=CS;var Xy=class ih extends hi{constructor(e="",t={}){super(fe.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;let r=new Image,i=fe.from(r,{scaleMode:j.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new se,i.trim=new se,this.texture=i;let s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),u=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=ih.defaultMaxWidth,this.maxHeight=ih.defaultMaxHeight,this._domElement=c,this._styleElement=u,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(u),this._foreignObject.appendChild(c),this._image=r,this._loadImage=new Image,this._autoResolution=ih.defaultAutoResolution,this._resolution=ih.defaultResolution??j.RESOLUTION,this.text=e,this.style=t}measureText(e){let{text:t,style:r,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);let s=this._domElement.getBoundingClientRect();this._svgRoot.remove();let{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");let l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(i)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:l+r.padding*2,height:c+r.padding*2}}updateText(e=!0){return L(this,null,function*(){let{style:t,_image:r,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;let{width:s,height:o}=this.measureText();r.width=i.width=Math.ceil(Math.max(1,s)),r.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;let a=this._updateID;yield new Promise(l=>{i.onload=()=>L(this,null,function*(){if(a<this._updateID){l();return}yield t.onBeforeDraw(),r.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()});let c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})})}get source(){return this._image}updateTexture(){let{style:e,texture:t,_image:r,resolution:i}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=r.width/i,t.trim.height=t._frame.height=r.height/i,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(r.width,r.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},ih.defaultDestroyOptions,e),super.destroy(e);let t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);let t=z.sign(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);let t=z.sign(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof dp?(this.ownsStyle=!1,this._style=e):e instanceof wr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=dp.from(e)):(this.ownsStyle=!0,this._style=new dp(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Xy.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Xy.defaultMaxWidth=2024,Xy.defaultMaxHeight=2024,Xy.defaultAutoResolution=!0;var LQ=["container"];var uV=(()=>{let e=class e{constructor(r,i){this.elementRef=r,this.ngZone=i,this.cursor=new la,this.notetracks=new Array,this.noteContainer=new Mt,this.devicePixelRatio=window.devicePixelRatio||1}init(){this.ngZone.runOutsideAngular(()=>{this.app=new Ay({background:new ye("rgb(10, 15, 25, 1)").toArray()})}),this.elementRef.nativeElement.appendChild(this.app.view),this.resize()}ngOnInit(){this.init(),this.createCursor(),this.placeNotes(),this.app.ticker.add(r=>{this.noteContainer.x=zd.seconds*-20})}createCursor(){this.cursor=new la,this.cursor.beginFill(new ye("rgb(20, 150, 255, 1)").toArray()),this.cursor.drawRect(0,0,2,600),this.cursor.endFill(),this.app.stage.addChild(this.cursor)}placeNotes(){this.midistream.tracks.forEach(i=>{let s=i.notes;s.forEach(a=>{let l=new la;l.beginFill(new ye("rgb(255, 150, 0, 1)").toArray()),l.drawRect(a.time*20,450-a.midi*4,Math.max(a.duration*8,3),3),l.endFill(),this.noteContainer.addChild(l)});let o=new Array;s.forEach(a=>{let l={time:a.time,note:a.name,velocity:a.velocity};o.push(l)}),this.notetracks.push(o)}),this.app.stage.addChild(this.noteContainer);let r=new Qa(S_,{envelope:{attack:.02,decay:.1,sustain:.8,release:.8}}).toDestination();this.part=new $d((i,s)=>{r.triggerAttackRelease(s.note,"8n",i,s.velocity)},this.notetracks[0]).start(0)}play(){zd.start()}stop(){zd.stop()}resize(){let r=document.getElementById("pixidiv"),i=this.elementRef.nativeElement.offsetWidth;console.log("width----------------",i);let s=400,o=1/this.devicePixelRatio;this.app.renderer.resize(i*this.devicePixelRatio,s*this.devicePixelRatio)}destroy(){this.app.destroy(),zd.stop(),this.part.clear()}ngOnDestroy(){this.destroy()}};e.\u0275fac=function(i){return new(i||e)(Pe(Ln),Pe(ze))},e.\u0275cmp=kn({type:e,selectors:[["app-pixiapp"]],viewQuery:function(i,s){if(i&1&&$m(LQ,5),i&2){let o;zr(o=qr())&&(s.container=o.first)}},hostBindings:function(i,s){i&1&&wt("resize",function(){return s.resize()},!1,aD)},inputs:{midistream:"midistream",devicePixelRatio:"devicePixelRatio"},standalone:!0,features:[Bn],decls:5,vars:0,consts:[[2,"margin-bottom","10px"],["type","button",1,"mybutton",3,"click"]],template:function(i,s){i&1&&(ue(0,"div",0)(1,"button",1),wt("click",function(){return s.play()}),Ye(2,"play track"),oe(),ue(3,"button",1),wt("click",function(){return s.stop()}),Ye(4,"stop track"),oe()())},styles:[".pixidiv[_ngcontent-%COMP%]{position:relative;max-width:1000;max-height:800;border-style:solid;border-width:1;border-color:#00f}.mybutton[_ngcontent-%COMP%]{color:#fff;background-color:#172e44;border-style:solid;border-radius:5px;border-width:1px;padding-left:10px;padding-right:10px}"]});let n=e;return n})();var hV=(()=>{let e=class e{constructor(){this.title="FrontendANG"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["app-root"]],standalone:!0,features:[Bn],decls:2,vars:0,consts:[[1,"pageContainer"]],template:function(i,s){i&1&&(ue(0,"div",0),Wr(1,"router-outlet"),oe())},dependencies:[ja,Hb],styles:["[_nghost-%COMP%]{max-width:1280px;padding:2rem;text-align:center}tr[_ngcontent-%COMP%]:nth-child(2n){background:#F2F2F2}tr[_ngcontent-%COMP%]:nth-child(odd){background:#FFF}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}table[_ngcontent-%COMP%]{margin:0 auto}.title[_ngcontent-%COMP%]{color:#fff}.pageContainer[_ngcontent-%COMP%]{max-width:1000px;margin:auto;border-style:solid;border-width:1px;border-color:#182836;background-color:#131e31;padding:15px}.mybutton[_ngcontent-%COMP%]{color:#fff;background-color:#172e44;border-style:solid;border-radius:5px;border-width:1px;padding-left:10px;padding-right:10px}.topbuttons[_ngcontent-%COMP%]{background:#8189ce;border-top-style:solid;border-top-width:1px;border-bottom-style:solid;border-bottom-width:1px;border-color:#cfd2f5;margin-top:10px;margin-bottom:10px}"]});let n=e;return n})();var BQ=[],dV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=qe({imports:[ja.forRoot(BQ),ja]});let n=e;return n})();var DS=pa(l1());var fV=(()=>{let e=class e{constructor(r){this.http=r,this.rootPath="https://localhost:44356/"}getmididetails(r){return this.http.get(this.rootPath+"api/MidiDataApi/findbyid"+r)}};e.\u0275fac=function(i){return new(i||e)(re(Ba))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function UQ(n,e){if(n&1&&(ue(0,"div"),Wr(1,"app-pixiapp",2),oe()),n&2){let t=ut(2);Ae(1),ct("midistream",t.midistream)}}function jQ(n,e){if(n&1&&(ue(0,"div")(1,"p"),Ye(2),oe(),ue(3,"p"),Ye(4),oe(),Pt(5,UQ,2,1,"div",1),oe()),n&2){let t=ut();Ae(2),Ci("Filenumber ",t.miditrack.fileNumber,""),Ae(2),Ci("Composer: ",t.miditrack.composer,""),Ae(1),ct("ngIf",t.midistream)}}var pV=(()=>{let e=class e{constructor(r,i,s){this.route=r,this.getmididetailsService=i,this.transferService=s,this.Id=1,this.download=()=>{let o=this.miditrack.filePath;this.transferService.download(o).subscribe(a=>{if(a){console.log("arrayBuffer",a);let l=new DS.Midi(a);this.midistream=new DS.Midi(a),l.tracks.forEach(c=>{c.notes.forEach(h=>{})})}})}}ngOnInit(){this.setProporties(),this.getmiditrack()}setProporties(){let r=Number(this.route.snapshot.paramMap.get("id"));this.Id=r,console.log("this.Id",this.Id)}getmiditrack(){this.getmididetailsService.getmididetails(this.Id).subscribe(r=>{r&&(this.miditrack=r,this.download())})}play(){this.synths=[];let r=J1()+.5;this.midistream.tracks.forEach(i=>{let s=new Qa(Or,{envelope:{attack:.02,decay:.1,sustain:.3,release:.8}}).toDestination();s.volume.value=.3,this.synths.push(s),i.notes.forEach(o=>{s.triggerAttackRelease(o.name,o.duration,o.time+r,o.velocity)})})}stop(){this.synths.forEach(r=>{r.dispose()}),this.synths=[]}};e.\u0275fac=function(i){return new(i||e)(Pe(is),Pe(fV),Pe(md))},e.\u0275cmp=kn({type:e,selectors:[["app-mididetail"]],standalone:!0,features:[Bn],decls:3,vars:1,consts:[[1,"title"],[4,"ngIf"],[3,"midistream"]],template:function(i,s){i&1&&(ue(0,"h1",0),Ye(1,"Midi details"),oe(),Pt(2,jQ,6,3,"div",1)),i&2&&(Ae(2),ct("ngIf",s.miditrack))},dependencies:[uV,lc],styles:[".title[_ngcontent-%COMP%]{color:#fff;border-style:none}p[_ngcontent-%COMP%]{color:azure}.mybutton[_ngcontent-%COMP%]{color:#fff;background-color:#172e44;border-style:solid;border-radius:5px;border-width:1px;padding-left:10px;padding-right:10px}"]});let n=e;return n})();var GQ=[{path:"",component:oO,title:"Homepage"},{path:"mididetails/:id",component:pV,title:"midi details"},{path:"uploadmidi",component:aO,title:"upload midi file"}],mV=GQ;uM(hV,{providers:[nx(dM,dV,$I),tM(nM()),eO(mV)]}).catch(n=>console.error(n));
